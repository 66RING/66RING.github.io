<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="linux," />










<meta name="description" content="Linux哲学 Linux基本原则  由目的单一的小程序组成，组合小程序完整复杂任务    一切皆文件    避免捕获用户接口，避免与用户交互    配置文件保存为纯文本格式     命令格式命令 选项 参数 短选项：-加某个字母，如-h查看help 短选项可以多个选项写一起-a -b &#x3D; -ab   长选项：--&lt;option&gt;   命令模板 []中表示可选的内容 &lt;&gt;中">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux学习">
<meta property="og:url" content="http://yoursite.com/2020/01/20/universe/linux/linux_note/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="Linux哲学 Linux基本原则  由目的单一的小程序组成，组合小程序完整复杂任务    一切皆文件    避免捕获用户接口，避免与用户交互    配置文件保存为纯文本格式     命令格式命令 选项 参数 短选项：-加某个字母，如-h查看help 短选项可以多个选项写一起-a -b &#x3D; -ab   长选项：--&lt;option&gt;   命令模板 []中表示可选的内容 &lt;&gt;中">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2020-01-19T16:00:00.000Z">
<meta property="article:modified_time" content="2020-09-12T03:47:28.865Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="linux">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2020/01/20/universe/linux/linux_note/"/>





  <title>Linux学习 | Hexo</title>
  








<meta name="generator" content="Hexo 4.2.1"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Hexo</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/01/20/universe/linux/linux_note/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Linux学习</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-01-20T00:00:00+08:00">
                2020-01-20
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="Linux哲学"><a href="#Linux哲学" class="headerlink" title="Linux哲学"></a>Linux哲学</h2><ul>
<li>Linux基本原则<ul>
<li><ol>
<li>由目的单一的小程序组成，组合小程序完整复杂任务</li>
</ol>
</li>
<li><ol start="2">
<li>一切皆文件</li>
</ol>
</li>
<li><ol start="3">
<li>避免捕获用户接口，避免与用户交互</li>
</ol>
</li>
<li><ol start="4">
<li>配置文件保存为纯文本格式</li>
</ol>
</li>
</ul>
</li>
<li>命令格式<code>命令 选项 参数</code><ul>
<li>短选项：<code>-</code>加某个字母，如<code>-h</code>查看help<ul>
<li>短选项可以多个选项写一起<code>-a -b = -ab</code></li>
</ul>
</li>
<li>长选项：<code>--&lt;option&gt;</code></li>
</ul>
</li>
<li>命令模板<ul>
<li><code>[]</code>中表示可选的内容</li>
<li><code>&lt;&gt;</code>中表示必须给出的内容</li>
<li><code>...</code>表示可以出现多个，可以使用多次</li>
<li>用<code>|</code>分割表示多选一，如<code>[-a|-b]</code></li>
</ul>
</li>
<li>魔数Magic Number：标记文件的执行格式，如<code>#!/bin/sh</code>，也称为shebang</li>
</ul>
<h3 id="FHS-文件层级系统"><a href="#FHS-文件层级系统" class="headerlink" title="FHS(文件层级系统)"></a>FHS(文件层级系统)</h3><ul>
<li>/boot: 系统启动相关文件</li>
<li>/dev: 设备文件</li>
<li>/etc: 配置文件，存文本</li>
<li>/home: 用户家目录</li>
<li>/root: 管理员家目录</li>
<li>/lib: 库文件<ul>
<li>/lib/modules: 内核模块文件</li>
<li>静态库<ul>
<li>linux下表现为.a</li>
</ul>
</li>
<li>动态库:载入到内存中可以复用<ul>
<li>win下表现为.dll文件，linux下表现为.so(shared object)</li>
</ul>
</li>
</ul>
</li>
<li>/opt: 可选目录，第三方程序的安装目录</li>
<li>/proc: 伪文件系统，内核映射</li>
<li>/sys: 伪文件系统，跟硬件相关的属性映射</li>
<li>/tmp: 临时文件，会定时清理</li>
<li>/var: 可变化文件</li>
<li>/bin: 可执行文件，用户命令</li>
<li>/sbin: 管理命令</li>
<li>/usr: universal shared read-only<ul>
<li>usr下之所以有/usr/bin和/usr/sbin是因为/bin跟启动系统相关，而/usr下跟启动系统后提供正常功能相关</li>
</ul>
</li>
<li>/usr/local: 又是一个独立的文件系统，也有bin，sbin。是第三方软件的安装路径</li>
</ul>
<h2 id="常用工具"><a href="#常用工具" class="headerlink" title="常用工具"></a>常用工具</h2><ul>
<li>man：查看手册<ul>
<li><code>whatis name</code>查看name的目录，使用<code>man [n] name</code>打开name第n章</li>
</ul>
</li>
<li>tr：字符串转换或删除<ul>
<li><code>tr &#39;a-z&#39; &#39;A-Z&#39;</code>把输入中的字符转换成大写</li>
<li><code>tr -d &#39;abc&#39;</code>删除出现的字符，这里是a，b，c</li>
</ul>
</li>
<li>shell中可以开子shell，使用<code>pstree</code>可以查看父子关系，使用exit退出一个</li>
<li>环境变量<ul>
<li><code>PATH</code>命令搜索路径</li>
<li><code>HISTSIZE</code>命令历史缓冲区<ul>
<li>使用<code>history</code>查看命令历史</li>
<li>使用<code>!n</code>执行命令历史中第n条历史命令</li>
<li>使用<code>!-n</code>执行命令历史中倒数第n条历史命令</li>
<li>使用<code>!!</code>执行刚才执行的命令</li>
<li>使用<code>!string</code>执行命令历史中最近的以指定字符串开头的命令</li>
<li>使用<code>!$</code>引用上一个命令的最后一个参数</li>
</ul>
</li>
</ul>
</li>
<li>命令替换：<code>$(COMMAND)</code>或使用反引号`COMMAND`<ul>
<li>把命令的结果放入一个命令中</li>
<li><code>echo $(ls)</code></li>
</ul>
</li>
<li><strong>shell中的引号</strong>：<ul>
<li>反引号``：命令替换</li>
<li>双引号””：弱引用。可以实现变量替换</li>
<li>单引号’’：强引用。不能实现变量替换</li>
</ul>
</li>
<li>文件名通配，globbing<ul>
<li><code>*</code>：任意长度的任意字符</li>
<li><code>?</code>：任意单个字符</li>
<li><code>[]</code>：指定范围内的任意单个字符</li>
<li><code>[^]</code>：指定范围外的任意单个字符</li>
<li>特殊字符，形如<code>[:punct:]</code>。<code>[:punct:]</code>所有的标点符号</li>
</ul>
</li>
<li>生成列表<ul>
<li><code>seq [OPTION] [FIRST] [INCREMENT] LAST</code></li>
</ul>
</li>
<li><code>xargs</code><ul>
<li>从标准输入接收命令并执行</li>
</ul>
</li>
<li><code>w</code><ul>
<li>显示已登录的用户</li>
</ul>
</li>
<li><code>last</code><ul>
<li>显示登录日志，即显示<code>/var/log/wtmp</code>文件</li>
</ul>
</li>
<li><code>lastb</code><ul>
<li>显示错误的登录日志，即显示<code>/var/log/btmp</code>文件</li>
</ul>
</li>
<li><code>lastlog</code><ul>
<li>显示每一个用户最近一次的成功登录信息</li>
</ul>
</li>
<li><code>basename</code><ul>
<li>显示文件的基路径名</li>
</ul>
</li>
</ul>
<h2 id="管道及IO重定向"><a href="#管道及IO重定向" class="headerlink" title="管道及IO重定向"></a>管道及IO重定向</h2><ul>
<li>系统设定<ul>
<li>默认输入设备，标准输入，stdin, 0</li>
<li>默认输出设备，标准输出，stdout, 1</li>
<li>标准错误输出，stderr, 2</li>
</ul>
</li>
<li>重定向，默认都是重定向标准输入输出<ul>
<li>输出重定向<ul>
<li><code>&gt;</code>覆盖输出<ul>
<li>强制覆盖：当设置了不允许覆盖已存在文件时使用<code>&gt;|</code></li>
</ul>
</li>
<li><code>&gt;&gt;</code>追加输出</li>
<li><code>2&gt;</code>, <code>2&gt;&gt;</code>重定向错误输出<ul>
<li>可以使用<code>ls ./ &gt; a.out 2&gt; b.out</code>这样的形式</li>
</ul>
</li>
<li><code>&amp;&gt;</code>重定向标准输出或错误输出到同一个文件</li>
</ul>
</li>
<li>输入重定向<ul>
<li><code>&lt;</code>输入重定向</li>
<li><code>&lt;&lt;</code>Here Document  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">echo &lt;&lt; END_SIGN</span><br><span class="line">&gt; hello</span><br><span class="line">&gt; END_SIGN</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
</li>
<li>管道<ul>
<li><code>cmd1 | cmd2</code>前一个命令的输出作为后一个命令的输入</li>
</ul>
</li>
<li>tee<ul>
<li><code>man tee</code>一个输入两个输出</li>
</ul>
</li>
</ul>
<h2 id="Shell编程"><a href="#Shell编程" class="headerlink" title="Shell编程"></a>Shell编程</h2><h3 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h3><p><code>VARNAME=VALUE</code></p>
<ul>
<li>引用：<code>$VAENAME</code> or <code>${VARNAME}</code>，注意<code>$()</code>是引用执行结果，而<code>{}</code>才是引用内容</li>
<li>环境变量：作用域为当前shell或器子进程<ul>
<li>用<code>export</code>导出，<code>export var=value</code></li>
</ul>
</li>
<li>位置变量<ul>
<li><code>$0, $1, ...</code>，所有参数，第一个参数…</li>
<li><code>shift [n]</code>，把第一个变量弹出。因此有很多变量时可以使用shift</li>
</ul>
</li>
<li>特殊变量<ul>
<li><code>$?</code>，上一个命令的<strong>执行状态</strong>返回值，0正确，1~255执行错误</li>
<li><code>$#</code>，参数个数</li>
<li><code>$*</code>，参数列表</li>
<li><code>$@</code>，参数列表</li>
</ul>
</li>
<li>声明<code>declare [OPTION] VAR=VALUE</code><ul>
<li><code>declare -i SUM=0</code>，声明整形变量SUM</li>
<li><code>declare -x A=0</code>，声明export变量A</li>
</ul>
</li>
</ul>
<h3 id="条件分支"><a href="#条件分支" class="headerlink" title="条件分支"></a>条件分支</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">if expression; then</span><br><span class="line">    statement</span><br><span class="line">elif</span><br><span class="line">    statement</span><br><span class="line">else</span><br><span class="line">    statement</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<ul>
<li>条件测试的表达式<ul>
<li><code>[ expression ]</code>， <strong>注意</strong> 中扩号两端的空格是必须的</li>
<li><code>[[ expression ]]</code>，两种方法用法相同，但是两个中括号是bash的关键字</li>
<li><code>test expression</code></li>
<li>因为if语句取的是表达式执行状态的结果，所以如果条件判断是命令则不需要中括号，如<code>if test expression; then</code></li>
</ul>
</li>
<li>shell中进行算数运算<ul>
<li><strong>shell把所有的变量都当作字符</strong>，所以要进行算数运算需要额外操作</li>
<li><ol>
<li><code>let</code>，见<code>help let</code>。如<code>let c=$a+$b</code></li>
</ol>
</li>
<li><ol start="2">
<li><code>$[expression]</code>。如<code>c=$[$a+$b]</code></li>
</ol>
</li>
<li><ol start="3">
<li><code>$(())</code>。如<code>c=$(($a+$b))</code></li>
</ol>
</li>
<li><ol start="4">
<li><code>expr expression</code>，表达式中，各操作数和操作符直接要有空格，且要使用命令引用。因为本质是调用<code>expr</code>程序。如<code>c=$(expr $a + $b)</code></li>
</ol>
</li>
</ul>
</li>
<li>退出脚本：<code>exit</code><ul>
<li>如果没有指定退出状态，则返回上一条命令的执行状态</li>
<li>0正确，1～255错误</li>
</ul>
</li>
<li>文件测试<ul>
<li><code>-e FILE</code>，是否存在</li>
<li><code>-f FILE</code>，是否普通文件</li>
<li><code>-d FILE</code>，是否为目录</li>
<li><code>-r/w/x</code>，是否可读写执行</li>
</ul>
</li>
<li>组合测试条件<ul>
<li><code>-a</code>，逻辑与</li>
<li><code>-o</code>，逻辑或</li>
<li><code>!</code>，非</li>
<li>也可以使用<code>[ expression ] || [ expression ]</code></li>
</ul>
</li>
</ul>
<h4 id="switch-case"><a href="#switch-case" class="headerlink" title="switch case"></a>switch case</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> SWITCH <span class="keyword">in</span></span><br><span class="line">    value1)</span><br><span class="line">        statement</span><br><span class="line">        ...</span><br><span class="line">        ;;</span><br><span class="line">    value2|value3)</span><br><span class="line">        statement</span><br><span class="line">        ...</span><br><span class="line">        ;;</span><br><span class="line">    [0-9])</span><br><span class="line">        statement</span><br><span class="line">        ...</span><br><span class="line">        ;;</span><br><span class="line">    *)</span><br><span class="line">        statement</span><br><span class="line">        ...</span><br><span class="line">        ;;</span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure>


<h3 id="文本处理"><a href="#文本处理" class="headerlink" title="文本处理"></a>文本处理</h3><h4 id="sed"><a href="#sed" class="headerlink" title="sed"></a>sed</h4><p>流编辑器(Stream EDitor, sed)。行编辑器。默认将输出到屏幕</p>
<p><code>sed [option] &#39;AddressCommand&#39; file...</code></p>
<ul>
<li>option<ul>
<li><code>-n</code>静默模式，不再显示模式空间中的内容</li>
<li><code>-i</code>修改原文件</li>
<li><code>-r</code>使用扩展正则表达式</li>
</ul>
</li>
<li>Address:<ul>
<li><ol>
<li>Startline,Endline<ul>
<li>$ 表示最后一行</li>
</ul>
</li>
</ol>
</li>
<li><ol start="2">
<li>/RegExp/</li>
</ol>
</li>
<li><ol start="3">
<li>/pattern1/,/pattern2/<ul>
<li>从被1匹配到的行开始到被2匹配的行结束</li>
</ul>
</li>
</ol>
</li>
<li><ol start="4">
<li>Startline, +N<ul>
<li>从起始行开始向后N行</li>
</ul>
</li>
</ol>
</li>
</ul>
</li>
<li>Command<ul>
<li><code>d</code>删除<ul>
<li>如<code>sed 1,2d</code></li>
</ul>
</li>
<li><code>p</code>显示符合条件行</li>
<li><code>a string</code>在指定行后追加</li>
<li><code>i string</code>在指定行前面加</li>
<li><code>r FILE</code>将指定文件的内容添加都符号条件的行</li>
<li><code>w FILE</code>将地址指定的范围的行保存到指定文件中</li>
<li><code>s/pattern/string/[opt]</code>查找并替换<ul>
<li><code>g</code>全局替换</li>
<li><code>i</code>忽略大小写</li>
<li>分隔符号不一定是<code>/</code>也可是<code>@, #, ~...</code>等</li>
<li><code>%</code>全文查找</li>
</ul>
</li>
<li>引用匹配串<ul>
<li><code>&amp;</code>整个串</li>
<li><code>\1</code>第1组</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="特殊权限"><a href="#特殊权限" class="headerlink" title="特殊权限"></a>特殊权限</h3><ul>
<li><p>SUID：文件运行时，相应进程的属主是程序文件自身的属主，而非启动者</p>
<ul>
<li><code>chmod u+s FILE</code></li>
<li><code>chmod u-s FILE</code></li>
<li>如果FILE本身就有执行权限，则SUID显示为s，否则为S</li>
</ul>
</li>
<li><p>GUID：文件运行时，相应进程的属组是程序文件自身的属组，而非启动者所属的基本组</p>
<ul>
<li><code>chmod g+s FILE</code></li>
<li><code>chmod g-s FILE</code></li>
</ul>
</li>
<li><p>Sticky：在一个公共目录，每个用户都可以创建文件，删除自己的文件，但不能删除别人的文件</p>
<ul>
<li><code>chmod o+t DIR</code></li>
<li><code>chmod o-t DIR</code></li>
</ul>
</li>
<li><p>也可用<code>111</code>，二进制表示</p>
</li>
<li><p>FACL, Filesystem Access Control List</p>
<ul>
<li><code>setfacl OPTION FILE</code><ul>
<li><code>-m</code>，设定<ul>
<li><code>u:UID:perm</code></li>
<li><code>g:GID:perm</code></li>
</ul>
</li>
<li><code>-x</code>，取消设定</li>
</ul>
</li>
<li><code>getfacl FILE</code></li>
</ul>
</li>
</ul>
<h2 id="文件系统"><a href="#文件系统" class="headerlink" title="文件系统"></a>文件系统</h2><h3 id="创建设备节点"><a href="#创建设备节点" class="headerlink" title="创建设备节点"></a>创建设备节点</h3><p><code>mknod</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">                         主设备号  次设备号             </span><br><span class="line">crw-rw----+ 1 root video      81,   2   Aug 31 17:04 video2</span><br></pre></td></tr></table></figure>


<h3 id="文件系统-1"><a href="#文件系统-1" class="headerlink" title="文件系统"></a>文件系统</h3><p>文件系统类型众多，接口可能各异，软件开发不可能要为每种文件系统的不同接口编写代码，那就本末倒置了。所以 <strong>Linux使用VFS(虚拟文件系统)作为翻译官</strong> 以支持众多文件系统。</p>
<p>linux常用的文件系统有ext3、ext4、xfs…</p>
<p>创建文件系统：<code>mkfs</code></p>
<ul>
<li>格式化<ul>
<li>高级格式化：创建文件系统<code>mkfs</code></li>
</ul>
</li>
</ul>
<h3 id="内存"><a href="#内存" class="headerlink" title="内存"></a>内存</h3><p>linux使用线性虚拟内存做中介，从虚拟内存映射到物理内存。当物理内存满时，将闲置的程序内存放到交换空间。</p>
<p>查看内存以及交换空间<code>free</code>，默认单位是字节，<code>free -m</code>以兆为单位显示。</p>
<ul>
<li>交换空间扩容<ul>
<li><ol>
<li>新建分区</li>
</ol>
</li>
<li><ol start="2">
<li>创建交换分区文件系统<code>mkswap /path/dev</code></li>
</ol>
</li>
<li><ol start="3">
<li>启用交换空间<code>swapon /path/dev</code>，关闭交换分区<code>swapoff /path/dev</code></li>
</ol>
</li>
</ul>
</li>
</ul>
<h3 id="dd命令"><a href="#dd命令" class="headerlink" title="dd命令"></a>dd命令</h3><p><code>man dd</code> conver and copy a file，转换并复制文件。取别于cp，cp是以文件为单位复制，而dd复制的是底层是数据流。cp复制文件需要将文件从文件系统读取到内存，然后再从内存复制到文件系统的其他位置。而dd复制相当于直接复制文件的二进制代码。</p>
<p>dd的好处是可以只复制文件的某一部分。</p>
<ul>
<li><code>dd if=&lt;src&gt; of=&lt;tar&gt;</code><ul>
<li>dd备份<ul>
<li><code>dd if=/dev/sda of=/mnt/usb/mdr.bak bs=512 count=1</code></li>
<li><code>dd if=/mnt/usb/mdr.bak of=/dev/sda bs=512 count=1</code></li>
<li>每次复制512byte，共复制1次</li>
</ul>
</li>
<li>用dd做磁盘镜像<ul>
<li><code>dd if=/path/dev of=/path/xxx.iso bs=1M count=1024</code></li>
<li>还可以用来做磁盘性能测试</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="fstab文件"><a href="#fstab文件" class="headerlink" title="fstab文件"></a>fstab文件</h3><p>文件系统配置文件<code>/etc/fstab</code>文件系统表。初始化时会自动挂载此文件中定义的每个文件系统</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">要挂载的设备 挂载点 文件系统类型 挂载选项 转储频率 文件系统检测次序</span><br><span class="line">    转储频率 表示多长时间(天)做次备份</span><br><span class="line">    文件系统检测次序 只有根可以为1</span><br></pre></td></tr></table></figure>


<h3 id="mount命令"><a href="#mount命令" class="headerlink" title="mount命令"></a>mount命令</h3><ul>
<li><code>mount DEVICE MOUNT_POINT</code><ul>
<li><code>-o loop</code>挂载本地回环设备。<strong>如iso镜像</strong></li>
<li><code>-a</code>挂载定义在fstab中的所有文件系统 </li>
</ul>
</li>
</ul>
<p>当<code>umount</code>busy时，可以使用<code>fuser -v /mount/point</code>查看谁在访问。使用<code>fuser -km /mount/point</code>杀死所有进程</p>
<h3 id="文件压缩与归档"><a href="#文件压缩与归档" class="headerlink" title="文件压缩与归档"></a>文件压缩与归档</h3><p>对于文本文件，会发现压缩比非常打，这是因为对文本文件的压缩，是对文本进行标记，以后该文本再次出现时，使用标记代替文本，以达到压缩的目的。算法不同压缩比也可能不同。</p>
<ul>
<li>目流行的压缩格式(工具):xz(zx), bz2(bzip2), gz(gzip)。只能压缩文件，不能压缩目录。默认还会删除原文件。<ul>
<li>gzip<ul>
<li>压缩<code>gzip &lt;FILE&gt;</code><ul>
<li><code>-[1-9]</code>指定压缩比</li>
</ul>
</li>
<li>解压缩<code>gunzip &lt;FILE&gt;</code>或<code>gzip -d &lt;FILE&gt;</code></li>
<li><code>zcat</code>在不解压的情况下查看文本文件的内容</li>
</ul>
</li>
<li>bz2<ul>
<li><code>bzip2</code>压缩，对于大文件比gzip有更大压缩比的工具，格式近似</li>
<li><code>-d</code>解压缩</li>
<li><code>-k</code>压缩保留源文件</li>
<li><code>bunzip2</code>解压</li>
<li><code>bzcat</code></li>
</ul>
</li>
<li>xz<ul>
<li>格式类似<code>man xz</code></li>
</ul>
</li>
<li>zip<ul>
<li><strong>压缩比不大</strong>，但可以压缩目录，格式也独特</li>
<li><code>zip OUT_FILE.ZIP IN_FILE1 ...</code></li>
<li>这种能将多个文件整合在一起就叫<strong>archive(归档)</strong></li>
</ul>
</li>
</ul>
</li>
<li>归档工具，只归档不压缩，体积还会变大<ul>
<li>tar<ul>
<li><code>-c</code>创建归档文件</li>
<li><code>-f</code>FILE` <strong>操作的文件</strong></li>
<li><code>-x</code>展开归档, 一般用<code>-xf</code></li>
<li><code>--xattrs</code>归档时保留其扩展属性信息</li>
<li><code>-t</code>查看归档里有啥</li>
</ul>
</li>
</ul>
</li>
<li>即归档又压缩<ul>
<li>当然可以先使用tar归档，再压缩。但是可以直接一步到位<ul>
<li><code>-zcf</code>归档然后调用gzip压缩</li>
<li><code>-zxf</code>调用gzip解压缩然后展开归档</li>
<li><code>-jcf</code>, <code>-jxf</code>调用bz2</li>
<li><code>-Jcf</code>, <code>-Jxf</code>调用xz</li>
<li>展开时使用的工具可以省略，如<code>-xf</code></li>
</ul>
</li>
</ul>
</li>
</ul>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/linux/" rel="tag"># linux</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/12/10/Major/compuer_organization/" rel="next" title="Computer Organization">
                <i class="fa fa-chevron-left"></i> Computer Organization
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2020/01/23/universe/regular_expression/" rel="prev" title="正则表达式基础语法">
                正则表达式基础语法 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>
    <a href="https://github.com/66RING/66RING.github.io/edit/myblog/source/_posts/universe/linux/linux_note.md" target="_blank">编辑</a>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">John Doe</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/%20%7C%7C%20archive">
              
                  <span class="site-state-item-count">56</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">51</span>
                  <span class="site-state-item-name">tags</span>
                
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Linux哲学"><span class="nav-number">1.</span> <span class="nav-text">Linux哲学</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#FHS-文件层级系统"><span class="nav-number">1.1.</span> <span class="nav-text">FHS(文件层级系统)</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#常用工具"><span class="nav-number">2.</span> <span class="nav-text">常用工具</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#管道及IO重定向"><span class="nav-number">3.</span> <span class="nav-text">管道及IO重定向</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Shell编程"><span class="nav-number">4.</span> <span class="nav-text">Shell编程</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#变量"><span class="nav-number">4.1.</span> <span class="nav-text">变量</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#条件分支"><span class="nav-number">4.2.</span> <span class="nav-text">条件分支</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#switch-case"><span class="nav-number">4.2.1.</span> <span class="nav-text">switch case</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#文本处理"><span class="nav-number">4.3.</span> <span class="nav-text">文本处理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#sed"><span class="nav-number">4.3.1.</span> <span class="nav-text">sed</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#特殊权限"><span class="nav-number">4.4.</span> <span class="nav-text">特殊权限</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#文件系统"><span class="nav-number">5.</span> <span class="nav-text">文件系统</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#创建设备节点"><span class="nav-number">5.1.</span> <span class="nav-text">创建设备节点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#文件系统-1"><span class="nav-number">5.2.</span> <span class="nav-text">文件系统</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#内存"><span class="nav-number">5.3.</span> <span class="nav-text">内存</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#dd命令"><span class="nav-number">5.4.</span> <span class="nav-text">dd命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#fstab文件"><span class="nav-number">5.5.</span> <span class="nav-text">fstab文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#mount命令"><span class="nav-number">5.6.</span> <span class="nav-text">mount命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#文件压缩与归档"><span class="nav-number">5.7.</span> <span class="nav-text">文件压缩与归档</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">John Doe</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
