<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Mens et Manus">
<meta property="og:type" content="website">
<meta property="og:title" content="Ring&#39;s Blog">
<meta property="og:url" content="http://yoursite.com/page/5/index.html">
<meta property="og:site_name" content="Ring&#39;s Blog">
<meta property="og:description" content="Mens et Manus">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Travis TuRing">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://yoursite.com/page/5/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>Ring's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Ring's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/26/universe/how_to_makefile/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Travis TuRing">
      <meta itemprop="description" content="Mens et Manus">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ring's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/02/26/universe/how_to_makefile/" class="post-title-link" itemprop="url">How to makefile</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-02-26 00:00:00" itemprop="dateCreated datePublished" datetime="2020-02-26T00:00:00+08:00">2020-02-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-07-12 16:38:47" itemprop="dateModified" datetime="2020-07-12T16:38:47+08:00">2020-07-12</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="How-to-makefile"><a href="#How-to-makefile" class="headerlink" title="How to makefile"></a>How to makefile</h1><h2 id="Compile-process"><a href="#Compile-process" class="headerlink" title="Compile process"></a>Compile process</h2><p>How dose a project turn into an excutable file? There are four step:</p>
<ul>
<li>Preprocessing<ul>
<li>Unfold all include libs, macro, head. And produce <code>.i</code> file.</li>
<li>(gcc/g++ commands)<code>-E</code></li>
</ul>
</li>
<li>Compilation<ul>
<li>The <code>.i</code> file produce an <code>.s</code> file(assembly code).</li>
<li><code>-S</code></li>
</ul>
</li>
<li>Assemble<ul>
<li>The <code>.s</code> file produce an <code>.o</code> file(object file).It is a binary file.</li>
<li><code>-c</code></li>
</ul>
</li>
<li>Linking<ul>
<li>Linking the <code>.o</code> file produce an excutable file.</li>
</ul>
</li>
</ul>
<p>Whole example</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">gcc -E halo.c -o halo.i  </span><br><span class="line">gcc -S halo.i -o halo.s  </span><br><span class="line">gcc -c halo.s -o halo.o  </span><br><span class="line">gcc -o halo.o -o halo</span><br></pre></td></tr></table></figure>

<h2 id="Why-makefile"><a href="#Why-makefile" class="headerlink" title="Why makefile"></a>Why makefile</h2><p>As we see, compile a file include so much process.Though <code>gcc halo.c -o halo</code> can do the same thing as above, you need to make sure all the <code>.c</code> file are in the directory.<br>And what if a thousand file to compile?</p>
<h2 id="Lets-start"><a href="#Lets-start" class="headerlink" title="Lets start"></a>Lets start</h2><h3 id="Format"><a href="#Format" class="headerlink" title="Format"></a>Format</h3><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">target: dependencies</span></span><br><span class="line">    command</span><br><span class="line"></span><br><span class="line">^ before command IS A TAB, and make sure a new line at the end</span><br></pre></td></tr></table></figure>
<p>We should write â€œfrom rear to frontâ€. Which means write final target command first and then write dependencies commandS</p>
<h3 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make target...</span><br></pre></td></tr></table></figure>

<p>If didnâ€™t specify target, run the first target as default. That is why should we wirte main object at first.</p>
<h1 id="CMake"><a href="#CMake" class="headerlink" title="CMake"></a>CMake</h1><p>Makefile may not work at different platform. Is quite annoying to rebuild a Makefile. So CMake is came.</p>
<p>CMake can auto generate Makefile, it is more cross-platform.</p>
<p>Usually, cmake command write in a <code>CMakeLists.txt</code> file.</p>
<h2 id="Some-basic"><a href="#Some-basic" class="headerlink" title="Some basic"></a>Some basic</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">CMAKE_MINIMUM_REQUIRED(VERSION define_a_minimum_version_here)</span><br><span class="line"></span><br><span class="line">PROJECT(define_project_name)</span><br><span class="line"></span><br><span class="line">AUX_SOURCE_DIRECTORY(&#x2F;your&#x2F;dir&#x2F;source pkg_name)  # to packaging files in dir_source. So you do not need every single source file below.</span><br><span class="line"></span><br><span class="line">ADD_EXECUTABLE(executalbe_name source_files...)</span><br><span class="line"># or</span><br><span class="line">ADD_EXECUTABLE(executalbe_name $&#123;pkg_name&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="Multi-Dir-CMake"><a href="#Multi-Dir-CMake" class="headerlink" title="Multi Dir CMake"></a>Multi Dir CMake</h2><p>Every sub dir need a CMake file. So your main CMake file can use it.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">AUX_SOURCE_DIRECTORY(&#x2F;your&#x2F;dir&#x2F;source pkg_name)</span><br><span class="line"></span><br><span class="line"># static library</span><br><span class="line">ADD_LIBRARY(lib_name STATIC $&#123;pkg_name&#125;)  </span><br><span class="line"></span><br><span class="line"># dynamic library</span><br><span class="line">ADD_LIBRARY(lib_name SHARED $&#123;pkg_name&#125;)</span><br></pre></td></tr></table></figure>

<p>Use sub dir</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">CMAKE_MINIMUM_REQUIRED(VERSION minimum_version)</span><br><span class="line"></span><br><span class="line">PROJECT(project_name)</span><br><span class="line"></span><br><span class="line">ADD_SUBDIRACTORY(.&#x2F;subdir)  # add subdir</span><br><span class="line"></span><br><span class="line">AUX_SOURCE_DIRECTORY(&#x2F;your&#x2F;dir&#x2F;source pkg_name)</span><br><span class="line"></span><br><span class="line">ADD_EXECUTABLE(executalbe_name $&#123;pkg_name&#125;)</span><br><span class="line"></span><br><span class="line">TARGET_LINKLIBRARYS(executalbe_name SubLib)  # link sub lib</span><br></pre></td></tr></table></figure>


<h2 id="Standard-Project"><a href="#Standard-Project" class="headerlink" title="Standard Project"></a>Standard Project</h2><p>ğŸ“/Project<br>â€”ğŸ“/build<br>â€”ğŸ“/src<br>â€”ğŸ“/lib<br>â€”ğŸ“/CMakeLists.txt</p>
<ul>
<li><p><code>./src/CMakeLists.txt</code></p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">INCLUDE_DIRECTORY(.&#x2F;path&#x2F;to&#x2F;lib)  #INCLUDE_DIRECTORY(.&#x2F;lib)</span><br><span class="line"></span><br><span class="line">SET(EXECUTABLE_OUTPUT_PATH $(PROJECT_BINARARY_DIR)&#x2F;bin)</span><br><span class="line"># set executable output to EXECUTABLE_OUTPUT_PATH&#x2F;bin &#x3D;..&#x2F;build&#x2F;bin</span><br><span class="line"></span><br><span class="line">AUX_SOURCE_DIRECTORY(&#x2F;your&#x2F;dir&#x2F;source pkg_name)</span><br><span class="line"></span><br><span class="line">ADD_EXECUTABLE(executalbe_name $&#123;pkg_name&#125;)</span><br><span class="line"></span><br><span class="line">TARGET_LINKLIBRARYS(executalbe_name SubLib)  # link sub lib</span><br></pre></td></tr></table></figure></li>
<li><p><code>./lib/CMakeLists.txt</code></p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">AUX_SOURCE_DIRECTORY(&#x2F;your&#x2F;dir&#x2F;source pkg_name)</span><br><span class="line"></span><br><span class="line">SET(LIBRARAY_OUTPUT_PATH $(PROJECT_BINARARY_DIR)&#x2F;lib)</span><br><span class="line"># set library output to PROJECT_BINARARY_DIR&#x2F;lib&#x3D;..&#x2F;build&#x2F;lib</span><br><span class="line"></span><br><span class="line"># static library</span><br><span class="line">ADD_LIBRARY(lib_name STATIC $&#123;pkg_name&#125;)  </span><br><span class="line"></span><br><span class="line"># dynamic library</span><br><span class="line">ADD_LIBRARY(lib_name SHARED $&#123;pkg_name&#125;)</span><br></pre></td></tr></table></figure></li>
<li><p><code>./CMakeLists.txt</code></p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">CMAKE_MINIMUM_REQUIRED(VERSION minimum_version)</span><br><span class="line"></span><br><span class="line">PROJECT(project_name)</span><br><span class="line"></span><br><span class="line">ADD_SUBDIRACTORY(.&#x2F;subdir)  # add subdir</span><br><span class="line"></span><br><span class="line">ADD_SUBDIRACTORY(.&#x2F;src)</span><br></pre></td></tr></table></figure>
</li>
<li><p>ccmake(config cmake)</p>
</li>
<li><p>some other option</p>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/26/universe/vim/vim_in_action/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Travis TuRing">
      <meta itemprop="description" content="Mens et Manus">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ring's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/02/26/universe/vim/vim_in_action/" class="post-title-link" itemprop="url">vimå®ç”¨æŠ€å·§</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-02-26 00:00:00" itemprop="dateCreated datePublished" datetime="2020-02-26T00:00:00+08:00">2020-02-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-10-02 21:47:40" itemprop="dateModified" datetime="2020-10-02T21:47:40+08:00">2020-10-02</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Vimå®ç”¨æŠ€å·§"><a href="#Vimå®ç”¨æŠ€å·§" class="headerlink" title="Vimå®ç”¨æŠ€å·§"></a>Vimå®ç”¨æŠ€å·§</h1><h2 id="æ‚é¡¹"><a href="#æ‚é¡¹" class="headerlink" title="æ‚é¡¹"></a>æ‚é¡¹</h2><table>
<thead>
<tr>
<th>æ“ä½œ</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td>o</td>
<td>åˆ‡æ¢é«˜äº®ä¸­å…‰æ ‡æ‰€åœ¨çš„ç«¯ç‚¹</td>
</tr>
<tr>
<td>.</td>
<td>é‡å¤æ‰§è¡Œä¸Šä¸€æ­¥æ“ä½œ</td>
</tr>
<tr>
<td>%</td>
<td>å®ƒä»£è¡¨å½“å‰æ–‡ä»¶ä¸­çš„æ‰€æœ‰è¡Œ</td>
</tr>
<tr>
<td>%</td>
<td>å¯ä»¥åœ¨ä¸€ç»„å¼€, é—­æ‹¬å·é—´è·³è½¬</td>
</tr>
<tr>
<td>m{mark}</td>
<td>å½“å‰ä½ç½®æ ‡è®°ä¸º{mark}ä»¥ä¾¿ä»¥åè·³è½¬</td>
</tr>
<tr>
<td>`{mark}</td>
<td>è·³åˆ°{mark}æ ‡è®°å¤„</td>
</tr>
<tr>
<td>qa</td>
<td>å½•åˆ¶å®åˆ°å¯„å­˜å™¨a</td>
</tr>
<tr>
<td>qA</td>
<td>å¾€å¯„å­˜å™¨aä¸­è¿½åŠ æ“ä½œ</td>
</tr>
<tr>
<td>i/d{</td>
<td>i for inside, a for around, å°±å¯ä»¥ç”¨di/daç­‰æ“ä½œ</td>
</tr>
<tr>
<td>=i{</td>
<td>=æ ¼å¼åŒ–?(ç¼©è¿›), inside {}</td>
</tr>
<tr>
<td>:earlier/later 1m</td>
<td>å›åˆ°1minå‰/å</td>
</tr>
<tr>
<td>c-z</td>
<td>æŒ‚èµ·vim,å‘½ä»¤è¡Œä¸‹:$ fgå¯ä»¥æ¢å¤,jobsæŸ¥çœ‹æŒ‚èµ·çš„è¿›ç¨‹</td>
</tr>
<tr>
<td>c-a/c-x</td>
<td>æ•°å­—åŠ /å‡1</td>
</tr>
<tr>
<td>{}</td>
<td>è·³è½¬åˆ°ä¸Šä¸€ä¸ª/ä¸‹ä¸€ä¸ªæ®µè½</td>
</tr>
<tr>
<td>q:, q/, q?</td>
<td>æ‰“å¼€å‘½ä»¤å†å²</td>
</tr>
<tr>
<td>gv</td>
<td>é€‰æ‹©ä¸Šä¸€æ¬¡çš„é€‰æ‹©</td>
</tr>
<tr>
<td>g <c-a>/<c-v></td>
<td>visual modeä¸‹</td>
</tr>
<tr>
<td>:g/regex/ex</td>
<td>run the Ex command only on teh line that match</td>
</tr>
<tr>
<td>:v/regex/ex</td>
<td>run the Ex command only on teh line not match</td>
</tr>
<tr>
<td>:windo {ex}</td>
<td>run ex on all windows</td>
</tr>
</tbody></table>
<h2 id="çŠ¶æ€ä¿å­˜"><a href="#çŠ¶æ€ä¿å­˜" class="headerlink" title="çŠ¶æ€ä¿å­˜"></a>çŠ¶æ€ä¿å­˜</h2><table>
<thead>
<tr>
<th>command</th>
<th>action</th>
</tr>
</thead>
<tbody><tr>
<td>:mkview</td>
<td>ä¿ç•™å½“å‰bufferçš„ä¸€äº›çŠ¶æ€ï¼Œå¦‚foldçŠ¶æ€ï¼Œå°è€Œç²¾</td>
</tr>
<tr>
<td>:loadview</td>
<td>æ¢å¤å½“å‰bufferï¼Œmkviewä¿ç•™çš„çŠ¶æ€</td>
</tr>
<tr>
<td>:mksession</td>
<td>ä¿ç•™å½“å‰vimçŠ¶æ€æˆ.vimæ–‡ä»¶ï¼ŒåŒ…æ‹¬æ‰€æœ‰çš„windowç­‰ï¼Œå¤§è€Œå…¨ã€‚ç”±äºæ˜¯.vimï¼Œå¯ä»¥é€šè¿‡sourceæ¢å¤</td>
</tr>
</tbody></table>
<h2 id="æŸ¥æ‰¾"><a href="#æŸ¥æ‰¾" class="headerlink" title="æŸ¥æ‰¾"></a>æŸ¥æ‰¾</h2><table>
<thead>
<tr>
<th>æ“ä½œ</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td>*</td>
<td>å‘ä¸‹æŸ¥æ‰¾å…‰æ ‡åœé çš„è¯è¯­</td>
</tr>
<tr>
<td>#</td>
<td>å‘ä¸ŠæŸ¥æ‰¾</td>
</tr>
<tr>
<td>;</td>
<td>é‡å¤ä¸Šä¸€æ¬¡æŸ¥æ‰¾</td>
</tr>
<tr>
<td>,</td>
<td>åè½¬æ–¹å‘é‡å¤ä¸Šä¸€æ¬¡æŸ¥æ‰¾</td>
</tr>
<tr>
<td>\zeå’Œ\ze</td>
<td>åŒ¹é…ç•Œå®šç¬¦, åŒ¹é…è¾¹ç•Œ</td>
</tr>
</tbody></table>
<h3 id="æŒ‰æ­£åˆ™è¡¨è¾¾å¼æŸ¥æ‰¾"><a href="#æŒ‰æ­£åˆ™è¡¨è¾¾å¼æŸ¥æ‰¾" class="headerlink" title="æŒ‰æ­£åˆ™è¡¨è¾¾å¼æŸ¥æ‰¾"></a>æŒ‰æ­£åˆ™è¡¨è¾¾å¼æŸ¥æ‰¾</h3><table>
<thead>
<tr>
<th>æ“ä½œ</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td>\v</td>
<td>ä½¿ç”¨æ­£åˆ™çš„ç‰¹æ®Šç¬¦å·è§„åˆ™</td>
</tr>
<tr>
<td>\V</td>
<td>åŸæ„æŸ¥æ‰¾, å³.å•Šä»€ä¹ˆçš„ä¸ç”¨åæ–œè½¬æ„</td>
</tr>
<tr>
<td>\w</td>
<td>ç”¨æ¥åŒ¹é…å•è¯ç±»å­—ç¬¦, åŒ…æ‹¬å­—æ¯,æ•°å­—åŠç¬¦å·</td>
</tr>
<tr>
<td>\W</td>
<td>åŒ¹é…å•è¯ç±»ä»¥å¤–çš„æ‰€æœ‰å­—ç¬¦</td>
</tr>
<tr>
<td>\{num}</td>
<td>å¼•ç”¨è¢«æ²¡å¯¹()æ•è·çš„å­åŒ¹é… \0ä¼šå¼•ç”¨æ•´ä¸ªåŒ¹é…</td>
</tr>
<tr>
<td>&lt;å’Œ&gt;</td>
<td>\væ¨¡å¼ä¸­&lt;å’Œ&gt;ç”¨æ¥åŒ¹é…è¾¹ç•Œ</td>
</tr>
</tbody></table>
<h2 id="æ“ä½œç¬¦-åŠ¨ä½œ-æ“ä½œ"><a href="#æ“ä½œç¬¦-åŠ¨ä½œ-æ“ä½œ" class="headerlink" title="æ“ä½œç¬¦ + åŠ¨ä½œ = æ“ä½œ"></a>æ“ä½œç¬¦ + åŠ¨ä½œ = æ“ä½œ</h2><h3 id="æ“ä½œç¬¦"><a href="#æ“ä½œç¬¦" class="headerlink" title="æ“ä½œç¬¦"></a>æ“ä½œç¬¦</h3><table>
<thead>
<tr>
<th>æ“ä½œ</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td>c</td>
<td>ä¿®æ”¹</td>
</tr>
<tr>
<td>d</td>
<td>åˆ é™¤</td>
</tr>
<tr>
<td>y</td>
<td>å¤åˆ¶åˆ°å¯„å­˜å™¨</td>
</tr>
<tr>
<td>g~</td>
<td>åè½¬å¤§å°å†™</td>
</tr>
<tr>
<td>gu</td>
<td>åè½¬ä¸ºå°å†™</td>
</tr>
<tr>
<td>gU</td>
<td>åè½¬ä¸ºå¤§å†™</td>
</tr>
<tr>
<td>&gt;</td>
<td>å¢åŠ ç¼©è¿›</td>
</tr>
<tr>
<td>&lt;</td>
<td>å‡å°ç¼©è¿›</td>
</tr>
<tr>
<td>=</td>
<td>è‡ªåŠ¨ç¼©è¿›</td>
</tr>
<tr>
<td>!</td>
<td>ä½¿ç”¨å¤–éƒ¨ç¨‹åº</td>
</tr>
</tbody></table>
<h3 id="åŠ¨ä½œ"><a href="#åŠ¨ä½œ" class="headerlink" title="åŠ¨ä½œ"></a>åŠ¨ä½œ</h3><table>
<thead>
<tr>
<th>æ“ä½œ</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td>w</td>
<td>å‘åä¸€ä¸ªå•è¯</td>
</tr>
<tr>
<td>W</td>
<td>å½“å‰å­—ä¸²</td>
</tr>
<tr>
<td>aw</td>
<td>a word, å…‰æ ‡åœé çš„æ•´ä¸ªå•è¯åŠä¸€ä¸ªç©ºæ ¼</td>
</tr>
<tr>
<td>ab</td>
<td>ä¸€å¯¹åœ†æ‹¬å·</td>
</tr>
<tr>
<td>aB</td>
<td>ä¸€å¯¹èŠ±æ‹¬å·</td>
</tr>
<tr>
<td>t</td>
<td>to åˆ°</td>
</tr>
<tr>
<td>iâ€</td>
<td>inside åœ¨â€â€ä¸­</td>
</tr>
<tr>
<td>it</td>
<td>inside tag <h1></h1></td>
</tr>
<tr>
<td>p</td>
<td>æ®µè½</td>
</tr>
<tr>
<td>s</td>
<td>å¥å­</td>
</tr>
<tr>
<td>@a</td>
<td>å®a</td>
</tr>
</tbody></table>
<h3 id="ä¾‹å­"><a href="#ä¾‹å­" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h3><table>
<thead>
<tr>
<th>æ“ä½œ</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td>caw</td>
<td>ä¿®æ”¹å½“æœŸå•è¯</td>
</tr>
<tr>
<td>dta</td>
<td>åˆ é™¤å½“å‰ä½ç½®åˆ°å­—æ¯å•Š</td>
</tr>
<tr>
<td>ä»¥æ­¤ç±»æ¨</td>
<td></td>
</tr>
</tbody></table>
<h2 id="Ctrl-xè¡¥å…¨"><a href="#Ctrl-xè¡¥å…¨" class="headerlink" title="Ctrl+xè¡¥å…¨"></a>Ctrl+xè¡¥å…¨</h2><table>
<thead>
<tr>
<th>æ“ä½œ</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td>c-x,c-r</td>
<td>insert from a register</td>
</tr>
<tr>
<td>c-x,c-a</td>
<td>last inserted text</td>
</tr>
<tr>
<td>c-x,c-]</td>
<td>tag completion</td>
</tr>
<tr>
<td>c-x,c-f</td>
<td>filename completion</td>
</tr>
<tr>
<td>c-x,c-p/c-n</td>
<td>context-aware word completion</td>
</tr>
<tr>
<td>c-x,c-l</td>
<td>context-aware line completion</td>
</tr>
</tbody></table>
<h2 id="å¯„å­˜å™¨"><a href="#å¯„å­˜å™¨" class="headerlink" title="å¯„å­˜å™¨"></a>å¯„å­˜å™¨</h2><table>
<thead>
<tr>
<th>æ“ä½œ</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td>â€œ{register}</td>
<td>åˆ¶å®šå¯„å­˜å™¨{register}</td>
</tr>
<tr>
<td>â€œâ€</td>
<td>æ— åå¯„å­˜å™¨, æ²¡æŒ‡å®šå¯„å­˜å™¨æƒ…å†µä¸‹ç¼ºçœä½¿ç”¨</td>
</tr>
<tr>
<td>â€œ0</td>
<td>å¤åˆ¶ä¸“ç”¨å¯„å­˜å™¨</td>
</tr>
<tr>
<td>â€œ_</td>
<td>é»‘æ´å¯„å­˜å™¨, æœ‰å»æ— å›</td>
</tr>
<tr>
<td>â€œ+</td>
<td>X11å‰ªè´´æ¿</td>
</tr>
<tr>
<td>&lt;C-r&gt;{register}</td>
<td>åœ¨åœ¨æ’å…¥æ¨¡å¼ä¸‹æ’å…¥å¯„å­˜å™¨å†…å®¹</td>
</tr>
<tr>
<td>:reg a</td>
<td>æŸ¥çœ‹å¯„å­˜å™¨a</td>
</tr>
<tr>
<td>ç­‰ç­‰</td>
<td></td>
</tr>
</tbody></table>
<h2 id="Shellå‘½ä»¤"><a href="#Shellå‘½ä»¤" class="headerlink" title="Shellå‘½ä»¤"></a>Shellå‘½ä»¤</h2><table>
<thead>
<tr>
<th>æ“ä½œ</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td>%</td>
<td>å‘½ä»¤è¡Œä¸­çš„%ä¼šå±•å¼€æˆå½“å‰æ–‡ä»¶çš„å®Œæ•´è·¯å¾„</td>
</tr>
<tr>
<td>:shell</td>
<td>å¯åŠ¨ä¸€ä¸ªshell(è¾“å…¥exitè¿”å›vim)</td>
</tr>
<tr>
<td>:!{cmd}</td>
<td>åœ¨shellä¸­æ‰§è¡Œ{cmd}</td>
</tr>
<tr>
<td>:read !{cmd}</td>
<td>æŠŠ{cmd}çš„æ ‡å‡†è¾“å‡ºæ’å…¥åˆ°å…‰æ ‡ä¸‹æ–¹</td>
</tr>
<tr>
<td>:[range]write !{cmd}</td>
<td>ä»¥[range]ä½œä¸º{cmd}çš„æ ‡å‡†è¾“å…¥</td>
</tr>
</tbody></table>
<h2 id="åˆ†å±æ“ä½œ"><a href="#åˆ†å±æ“ä½œ" class="headerlink" title="åˆ†å±æ“ä½œ"></a>åˆ†å±æ“ä½œ</h2><table>
<thead>
<tr>
<th>æ“ä½œ</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td>&lt;C-w&gt;=</td>
<td>ä½¿å¾—æ‰€æœ‰çª—å£ç­‰å®½, ç™»é«˜</td>
</tr>
<tr>
<td>&lt;C-w&gt;_</td>
<td>æœ€å¤§åŒ–æ´»åŠ¨çª—å£çš„é«˜åº¦</td>
</tr>
<tr>
<td>&lt;C-w&gt;|</td>
<td>æœ€å¤§åŒ–æ´»åŠ¨çª—å£çš„å®½åº¦</td>
</tr>
<tr>
<td>&lt;C-w&gt;æ–¹å‘</td>
<td>ç§»åŠ¨å…‰æ ‡æ‰€åœ¨çš„çª—å£</td>
</tr>
</tbody></table>
<h2 id="åœ°å€"><a href="#åœ°å€" class="headerlink" title="åœ°å€"></a>åœ°å€</h2><table>
<thead>
<tr>
<th>æ“ä½œ</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td>0</td>
<td>è™šæ‹Ÿè¡Œ, ä½äºç¬¬ä¸€è¡Œä¸Šæ–¹</td>
</tr>
<tr>
<td>1</td>
<td>æ–‡ä»¶ç¬¬ä¸€è¡Œ</td>
</tr>
<tr>
<td>$</td>
<td>æœ€åä¸€è¡Œ</td>
</tr>
<tr>
<td>.</td>
<td>å…‰æ ‡æ‰€åœ¨è¡Œ</td>
</tr>
<tr>
<td>â€˜m</td>
<td>åŒ…å«ä½ç½®æ ‡è®°mçš„è¡Œ</td>
</tr>
<tr>
<td>â€˜&lt;</td>
<td>é«˜äº®é€‰å–çš„èµ·å§‹è¡Œ</td>
</tr>
<tr>
<td>â€˜&gt;</td>
<td>é«˜äº®é€‰å–çš„ç»“æŸè¡Œ</td>
</tr>
<tr>
<td>%</td>
<td>æ•´ä¸ªæ–‡ä»¶</td>
</tr>
</tbody></table>
<h2 id="å®"><a href="#å®" class="headerlink" title="å®"></a>å®</h2><p>å½•åˆ¶å®å…¶å®æ˜¯æŠŠæ“ä½œè¿‡ç¨‹æ”¾å…¥äº†ä¸€ä¸ªå¯„å­˜å™¨ä¸­ï¼Œå¦‚<code>qq</code>å°±æ˜¯ç”¨å¯„å­˜å™¨qæ¥å½•åˆ¶å®ã€‚ç”¨<code>:reg q</code>å¯ä»¥æŸ¥çœ‹å†…å®¹ã€‚</p>
<ul>
<li><code>qq</code>ï¼šç”¨å¯„å­˜å™¨qå½•åˆ¶å®</li>
<li><code>qQ</code>:å¾€å¯„å­˜å™¨qä¸­è¿½åŠ æ“ä½œ</li>
<li><code>:put q</code>ï¼šæŠŠå¯„å­˜å™¨qçš„å†…å®¹ç²˜è´´åˆ°æ–‡æ¡£ï¼Œä»¥ä¾¿ä¿®æ”¹<ul>
<li>Or <code>[&quot;x]p</code></li>
</ul>
</li>
<li><code>:d q</code>ï¼šå¤åˆ¶å›å¯„å­˜å™¨<ul>
<li><code>[&quot;x]d{motion}</code> delete text move over [into register x], like<code>&quot;qd3d</code>åˆ é™¤ä¸‰è¡Œï¼Œåˆ°å¯„å­˜å™¨qä¸­</li>
</ul>
</li>
</ul>
<h2 id="ç›®å½•æ“ä½œ"><a href="#ç›®å½•æ“ä½œ" class="headerlink" title="ç›®å½•æ“ä½œ"></a>ç›®å½•æ“ä½œ</h2><h3 id="åˆ©ç”¨-è¿›è¡Œæ–‡ä»¶æ“ä½œ"><a href="#åˆ©ç”¨-è¿›è¡Œæ–‡ä»¶æ“ä½œ" class="headerlink" title="åˆ©ç”¨%è¿›è¡Œæ–‡ä»¶æ“ä½œ"></a>åˆ©ç”¨%è¿›è¡Œæ–‡ä»¶æ“ä½œ</h3><p>åªè¯»å¯„å­˜å™¨%ä¸­å‚¨å­˜æœ‰å½“å‰æ–‡ä»¶è·¯å¾„ï¼Œé€šè¿‡å…³é”®å­—å¯ä»¥å±•å¼€åˆ°ç»å¯¹è·¯å¾„ã€æ‰€åœ¨ç›®å½•ç­‰ä¿¡æ¯ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">:echo expand(&#39;%:t&#39;)  &quot; æ–‡ä»¶å</span><br><span class="line">:echo expand(&#39;%:p&#39;)  &quot; ç»å¯¹è·¯å¾„</span><br><span class="line">:echo expand(&#39;%:p:h&#39;) &quot; æ‰€åœ¨ç›®å½•</span><br><span class="line">:echo expand(&#39;%:p:h:t&#39;) &quot; æ‰€åœ¨ç›®å½•å</span><br></pre></td></tr></table></figure>

<p> <strong>pè¡¨ç¤ºpathï¼Œhè¡¨ç¤ºheadï¼Œtè¡¨ç¤ºtail</strong> </p>
<h3 id="æ‰“å¼€ç›®å½•"><a href="#æ‰“å¼€ç›®å½•" class="headerlink" title="æ‰“å¼€ç›®å½•"></a>æ‰“å¼€ç›®å½•</h3><p>å¦‚æœæ‰“å¼€çš„æ˜¯ç›®å½•ï¼Œåˆ™Vimä¼šä½¿ç”¨<code>Explore</code>æ‰“å¼€ã€‚å½“ç„¶ä¹Ÿå¯æ‰‹åŠ¨åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­<code>:Explore</code>æ‰“å¼€å½“å‰ç›®å½•ã€‚</p>
<ul>
<li><code>:Sexplore</code>ï¼Œæ°´å¹³åˆ†å‰²æ‰“å¼€ç›®å½•</li>
<li><code>:Vexplore</code>ï¼Œå‚ç›´åˆ†å‰²æ‰“å¼€ç›®å½•</li>
</ul>
<h1 id="Vim-Doc-File"><a href="#Vim-Doc-File" class="headerlink" title="Vim Doc File"></a>Vim Doc File</h1><h2 id="Insertæ¨¡å¼ä¸‹çš„å¿«é€Ÿæ“ä½œ"><a href="#Insertæ¨¡å¼ä¸‹çš„å¿«é€Ÿæ“ä½œ" class="headerlink" title="Insertæ¨¡å¼ä¸‹çš„å¿«é€Ÿæ“ä½œ"></a>Insertæ¨¡å¼ä¸‹çš„å¿«é€Ÿæ“ä½œ</h2><ul>
<li>ä¿®æ­£æ“ä½œ<ul>
<li><code>&lt;c-w&gt;</code>ï¼Œå‘ååˆ é™¤ä¸€ä¸ªè¯</li>
<li><code>&lt;c-u&gt;</code>ï¼Œå‘å‰åˆ é™¤æ•´è¡Œ</li>
</ul>
</li>
<li>ä»å¯„å­˜å™¨æ’å…¥<ul>
<li><code>&lt;c-r&gt;{reg}</code></li>
<li><code>&lt;c-r&gt;&lt;c-r&gt;{reg}</code>ï¼Œä¸ç¿»è¯‘ç‰¹æ®Šå­—ç¬¦ï¼Œå¦‚å›è½¦ã€é€€æ ¼ç­‰</li>
</ul>
</li>
<li>æ’å…¥Digraphs<ul>
<li><code>&lt;c-k&gt;{key}</code>ï¼Œæ’å…¥ä¸€ä¸ªdigraphsï¼Œå¦‚Â®ç­‰é”®ç›˜æ²¡æœ‰çš„å­—ç¬¦ï¼Œå…·ä½“keyçœ‹<code>:digraphs</code></li>
</ul>
</li>
<li>é‡å¤æ“ä½œ<ul>
<li><code>&lt;c-a&gt;</code>ï¼Œè¾“å…¥ä½ ä¸Šæ¬¡åœ¨Insertæ¨¡å¼ä¸‹çš„è¾“å…¥</li>
<li><code>&lt;c-@&gt;</code>ï¼Œè¾“å…¥ä½ ä¸Šæ¬¡åœ¨Insertæ¨¡å¼ä¸‹çš„è¾“å…¥ï¼Œç„¶åé€€å‡ºInsertæ¨¡å¼</li>
<li><code>&lt;c-y&gt;</code>ï¼Œæ’å…¥é¼ æ ‡ä¸Šæ–¹çš„å­—ç¬¦</li>
</ul>
</li>
<li>å¿«é€Ÿæ‰§è¡Œæ™®é€šæ¨¡å¼<ul>
<li><code>&lt;c-o&gt;{cmd}</code></li>
</ul>
</li>
<li><strong>Omni Completion</strong><ul>
<li>building, see <code>compl-omni-filetype</code> and <code>ft-c-omni</code></li>
</ul>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/25/universe/GDB_Usage/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Travis TuRing">
      <meta itemprop="description" content="Mens et Manus">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ring's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/02/25/universe/GDB_Usage/" class="post-title-link" itemprop="url">GDB usage</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-02-25 00:00:00" itemprop="dateCreated datePublished" datetime="2020-02-25T00:00:00+08:00">2020-02-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-06-17 14:23:22" itemprop="dateModified" datetime="2020-06-17T14:23:22+08:00">2020-06-17</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Basic-Usage"><a href="#Basic-Usage" class="headerlink" title="Basic Usage"></a>Basic Usage</h1><ul>
<li>Make sure compile file with <code>-g</code> option, which mean turn on debugging with gdb<ul>
<li>like this: <code>gcc -g main.cpp -o main</code></li>
</ul>
</li>
</ul>
<h2 id="Debugging-with-GDB"><a href="#Debugging-with-GDB" class="headerlink" title="Debugging with GDB"></a>Debugging with GDB</h2><ul>
<li>open file<ul>
<li>here are two way</li>
<li><code>gdb filename</code><ul>
<li><code>gdb path/to/main</code></li>
</ul>
</li>
<li><code>gdb</code> -&gt; <code>file path/to/main</code></li>
</ul>
</li>
<li>show list<ul>
<li>use <code>l</code> command to show source code with line number</li>
</ul>
</li>
<li>add breakpoint<ul>
<li>use <code>b linenum</code> to add breakpoint, such as <code>b 1</code> add breakpoint at line 1</li>
<li>or use <code>b functionname</code> to add breakpoint, such as <code>b main</code> add breakpoint at main function</li>
</ul>
</li>
<li>show breakpoint information<ul>
<li><code>i b</code> i for information, b for breakpoint</li>
</ul>
</li>
<li>delete breakpoint<ul>
<li><code>d pointid</code> pointid from <code>i b</code></li>
<li><code>i b</code> information will be like a order list. If delete a pointid in the previous, the next point will just add in the end of the idlist.</li>
</ul>
</li>
<li>run debug<ul>
<li><code>r</code></li>
<li>use <code>p variable</code> will show the variable information</li>
</ul>
</li>
<li>gdb controler<ul>
<li><code>n</code> for next line, one step debugging</li>
<li><code>s</code> for step into(one step)</li>
<li><code>set args [parameter]</code> for command line args</li>
</ul>
</li>
<li>finish function and continue<ul>
<li><code>finish</code> for finish function</li>
<li><code>c</code> for continue until program exit or breakpoint</li>
</ul>
</li>
<li>quit gdb<ul>
<li><code>q</code></li>
</ul>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/25/universe/linux/linux_philosophy/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Travis TuRing">
      <meta itemprop="description" content="Mens et Manus">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ring's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/02/25/universe/linux/linux_philosophy/" class="post-title-link" itemprop="url">Linuxå“²å­¦è®°å½•</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-02-25 00:00:00" itemprop="dateCreated datePublished" datetime="2020-02-25T00:00:00+08:00">2020-02-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-08-20 17:10:26" itemprop="dateModified" datetime="2020-08-20T17:10:26+08:00">2020-08-20</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="å¼€å‘æ•ˆç‡é—®é¢˜"><a href="#å¼€å‘æ•ˆç‡é—®é¢˜" class="headerlink" title="å¼€å‘æ•ˆç‡é—®é¢˜"></a>å¼€å‘æ•ˆç‡é—®é¢˜</h4><p><strong>é—­æº</strong> </p>
<p>åœ¨ä¸€ä¸ªé¡¹ç›®å¼€å‘ä¸­<br>å‡è®¾ä¸€ä¸ªäººå¼€å‘æ•ˆç‡æ˜¯100%, å› ä¸ºä»–èƒ½å…¨èº«å¿ƒæŠ•å…¥é¡¹ç›®ä¸­. ä¸¤ä¸ªäººæ¯ä¸ªäººçš„å¼€å‘æ•ˆç‡æ˜¯80%, å…¶ä¸­20%æ˜¯å› ä¸ºå¦ä¸€ä¸ªäººæŸè€—çš„æ²Ÿé€šæˆæœ¬, é‚£ä¹ˆä¸¤ä¸ªäººçš„æ•ˆç‡å°±åƒä¸€ä¸ªäººçš„160%.<br>ä½†æ˜¯å¦‚æœäººæ•°å¢åŠ , æ¯ä¸ªäººçš„æ²Ÿé€šæˆæœ¬ä¹Ÿä¼šå¢åŠ , æœ€åå‘ç°æ•ˆç‡é™ä½. æ‰€ä»¥ä¸€ä¸ªå¤šäººå¼€å‘çš„å¤§å‹é¡¹ç›®ç†è®ºä¸Šæ˜¯ä¸å¯èƒ½æˆåŠŸçš„.</p>
<p>é‚£ä¹ˆæ¡†æ¶, æ¡†æ¶çš„æ‰©å±•æ€§å°±æ˜¾å¾—å°¤å…¶é‡è¦.</p>
<p><strong>å¼€æº</strong></p>
<p>ä¸€ä¸ªå¼€æºé¡¹ç›®å¾€å¾€æœ‰æˆç™¾ä¸Šåƒçš„äººå‚ä¸, é‚£æ ¹æ®ä¸Šé¢çš„ç†è®º, ä¸€ä¸ªå¼€æºé¡¹ç›®å°±ä¸ä¼šæˆåŠŸ.<br>ä½†æ˜¯å½“äººæ•°å¤šåˆ°ä¸€å®šç¨‹åº¦çš„æ—¶å€™, ä¸€ä¸ªæ½œåœ¨çš„é”™è¯¯ä¸€æ—¦å‡ºç°å°±ä¼šç«‹åˆ»å¾—åˆ°è§£å†³, åè€Œå¤§å¤§æé«˜äº†æ•ˆç‡.<br>ä½†æ˜¯å½“äººæ•°å¤šåˆ°ä¸€å®šç¨‹åº¦çš„æ—¶å€™, å·²ç»ä¸åœ¨ä¸Šé¢ç†è®ºçš„èŒƒç•´ä¹‹å†…äº†, å°±åƒç‰©ç†ä¸–ç•Œçš„<strong>å®è§‚å’Œå¾®è§‚é—®é¢˜</strong>.<br>åœ¨å¤šäººå¼€å‘çš„å¼€æºé¡¹ç›®ä¸­çš„ç†è®ºå°±éµå¾ª<em>linus</em> æå‡ºçš„<strong>linusç†è®º</strong>. å¼€æºé¡¹ç›®çš„æˆåŠŸå°±è¶³ä»¥è¯æ˜å…¶æ­£ç¡®æ€§.</p>
<h4 id="å¼€æºç¨‹åºçš„è´£ä»»"><a href="#å¼€æºç¨‹åºçš„è´£ä»»" class="headerlink" title="å¼€æºç¨‹åºçš„è´£ä»»"></a>å¼€æºç¨‹åºçš„è´£ä»»</h4><p>ä¸€ä¸ªå¼€æºç¨‹åºå¾€å¾€æœ‰ä¸€ä¸ªå¼€æºåè®®, è¿™äº›åè®®å¾€å¾€æŠŠè´£ä»»åªæƒ³å¹¿å¤§ç¤¾åŒºçš„å¼€å‘è€…, ä¹Ÿå°±æ˜¯æˆ‘ä»¬è‡ªå·±.<br>æ‰€ä»¥æˆ‘ä»¬è·å–çš„å¼€æºè½¯ä»¶æˆ‘ä»¬è‡ªå·±, æˆ‘ä»¬å¹¿å¤§å¼€å‘è€…å°±è¦å¯¹å…¶è´Ÿè´£.</p>
<p>ä¸¾ä¸ªä¾‹å­:æ¯”å¦‚ä½ æ‰¾å­¦éœ¸æŠ„ä½œä¸š, ä½†æ˜¯æŠ„æ¥çš„ç­”æ¡ˆå…¨æ˜¯é”™æ˜¯, ä½ è¯¥æ€ªå­¦éœ¸å—?<br>äºæ˜¯ä½ åœ¨æŠ„ä¹‹å‰, é—®äº†ä¸€ä¸‹åˆ«äººæ˜¯ä¸æ˜¯ä¹ŸæŠ„äº†å­¦éœ¸çš„ä½œä¸š, åˆ«äººå‘Šè¯‰ä½ è¯´æ²¡é—®é¢˜, æˆ–è€…ä½ æ£€æŸ¥äº†ä¸€éå‘ç°æ²¡é—®é¢˜. é‚£ç¤¾åŒºå°±ä¿è¯äº†å®ƒçš„å®‰å…¨æ€§.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/23/universe/linux/linux_tips/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Travis TuRing">
      <meta itemprop="description" content="Mens et Manus">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ring's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/02/23/universe/linux/linux_tips/" class="post-title-link" itemprop="url">linux command line</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-02-23 00:00:00" itemprop="dateCreated datePublished" datetime="2020-02-23T00:00:00+08:00">2020-02-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-08-24 16:39:11" itemprop="dateModified" datetime="2020-08-24T16:39:11+08:00">2020-08-24</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Command-line"><a href="#Command-line" class="headerlink" title="Command line"></a>Command line</h1><h2 id="Some-Ussful-tips"><a href="#Some-Ussful-tips" class="headerlink" title="Some Ussful tips"></a>Some Ussful tips</h2><ul>
<li><code>#</code> can delete a sub-string <strong>from the very beginning</strong> , like <code>var=apple; echo ${var#app}</code>, which will print <code>le</code>. <ul>
<li><code>#</code>, delete a few things as posible</li>
<li><code>##</code>, (greedy)delete a more things as posible</li>
<li><code>%</code>, use like <code>#</code>, but it delete from the end<ul>
<li><code>echo ${var%el}</code>, print app</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="shebang"><a href="#shebang" class="headerlink" title="shebang"></a>shebang</h2><p>a shebang is the interpreter of this script. like this</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br></pre></td></tr></table></figure>

<h2 id="Redirection"><a href="#Redirection" class="headerlink" title="Redirection"></a>Redirection</h2><table>
<thead>
<tr>
<th>command</th>
<th>function</th>
</tr>
</thead>
<tbody><tr>
<td>a &gt; b</td>
<td>aâ€™s std output override into b</td>
</tr>
<tr>
<td>a &gt;&gt; b</td>
<td>aâ€™s std output appand into b</td>
</tr>
<tr>
<td>a &lt; b</td>
<td>b as aâ€™s input</td>
</tr>
<tr>
<td>a &lt;&lt; b</td>
<td>here document</td>
</tr>
<tr>
<td>a &lt;&lt;&lt; b</td>
<td>here</td>
</tr>
</tbody></table>
<h3 id="Here-document"><a href="#Here-document" class="headerlink" title="Here document"></a>Here document</h3><p>A block as input</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> &lt;&lt; token</span><br><span class="line">    text</span><br><span class="line">token</span><br><span class="line"></span><br><span class="line">example:</span><br><span class="line"><span class="built_in">echo</span> &lt;&lt; __EOF__</span><br><span class="line">halo</span><br><span class="line">__EOF__</span><br><span class="line"></span><br><span class="line">$ halo</span><br></pre></td></tr></table></figure>

<h3 id="Here"><a href="#Here" class="headerlink" title="Here"></a>Here</h3><p>a bit like <em>here document</em>, a line as input.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">read</span> ans1 ans2 ans3 &lt;&lt;&lt; <span class="string">"a1 a2 a3"</span></span><br><span class="line"></span><br><span class="line">a1 a2 a3 as input to <span class="built_in">read</span> process</span><br></pre></td></tr></table></figure>

<h2 id="Useful-commands"><a href="#Useful-commands" class="headerlink" title="Useful commands"></a>Useful commands</h2><h3 id="Grep"><a href="#Grep" class="headerlink" title="Grep"></a>Grep</h3><p><code>grep [option] file1 file2...</code>ï¼Œsupport base regular expressionï¼Œ<code>egrep</code> or <code>grep -E</code> support extended Regex</p>
<p>The most commonly used<br>| options  | description                    |<br>|â€”â€”â€”-|â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€“|<br>| -i       | â€“ignore-case                  |<br>| -v       | â€“revert-mathch                |<br>| -c       | â€“count                        |<br>| -l       | â€“file-with-match              |<br>| -L       | â€“file-without-math            |<br>| -n       | â€“line-number                  |<br>| -h       | no filename in multi file mode |<br>| -a/-text | do not ignore binary data      |<br>| -e       | â€“regexp                       |<br>| -f       | specify regexp file            |</p>
<h3 id="Sed"><a href="#Sed" class="headerlink" title="Sed"></a>Sed</h3><p>sed can deal with text file with script-command or script-file.</p>
<p><code>sed [options][target-file]</code></p>
<table>
<thead>
<tr>
<th>options</th>
<th>description</th>
</tr>
</thead>
<tbody><tr>
<td>-e</td>
<td></td>
</tr>
<tr>
<td>&lt;++&gt;</td>
<td>&lt;++&gt;</td>
</tr>
<tr>
<td>&lt;++&gt;</td>
<td>&lt;++&gt;</td>
</tr>
<tr>
<td>&lt;++&gt;</td>
<td>&lt;++&gt;</td>
</tr>
<tr>
<td>&lt;++&gt;</td>
<td>&lt;++&gt;</td>
</tr>
<tr>
<td>&lt;++&gt;</td>
<td>&lt;++&gt;</td>
</tr>
<tr>
<td>&lt;++&gt;</td>
<td>&lt;++&gt;</td>
</tr>
</tbody></table>
<p>script action</p>
<table>
<thead>
<tr>
<th>action</th>
<th>description</th>
</tr>
</thead>
<tbody><tr>
<td>a\</td>
<td>add a new line or lines next to current line</td>
</tr>
<tr>
<td>c\</td>
<td>replace current line with some text</td>
</tr>
<tr>
<td>d</td>
<td>delete line</td>
</tr>
<tr>
<td>i\</td>
<td>insert text befor curent line</td>
</tr>
<tr>
<td>h</td>
<td>&lt;++&gt;</td>
</tr>
<tr>
<td>H</td>
<td>&lt;++&gt;</td>
</tr>
<tr>
<td>g</td>
<td>&lt;++&gt;</td>
</tr>
<tr>
<td>G</td>
<td>&lt;++&gt;</td>
</tr>
<tr>
<td>I</td>
<td>&lt;++&gt;</td>
</tr>
<tr>
<td>p</td>
<td>print line</td>
</tr>
<tr>
<td>n</td>
<td>&lt;++&gt;</td>
</tr>
<tr>
<td>q</td>
<td>quit sed</td>
</tr>
<tr>
<td>r</td>
<td>&lt;++&gt;</td>
</tr>
<tr>
<td>!</td>
<td>&lt;++&gt;</td>
</tr>
<tr>
<td>s</td>
<td>replace string with other string</td>
</tr>
<tr>
<td>&lt;++&gt;</td>
<td>&lt;++&gt;</td>
</tr>
<tr>
<td>&lt;++&gt;</td>
<td>&lt;++&gt;</td>
</tr>
<tr>
<td>&lt;++&gt;</td>
<td>&lt;++&gt;</td>
</tr>
<tr>
<td>&lt;++&gt;</td>
<td>&lt;++&gt;</td>
</tr>
<tr>
<td>&lt;++&gt;</td>
<td>&lt;++&gt;</td>
</tr>
</tbody></table>
<p>replace identifier</p>
<table>
<thead>
<tr>
<th>options</th>
<th>description</th>
</tr>
</thead>
<tbody><tr>
<td>g</td>
<td>global replace in this line</td>
</tr>
<tr>
<td>p</td>
<td>print line</td>
</tr>
<tr>
<td>w</td>
<td>write line into file</td>
</tr>
<tr>
<td>x</td>
<td>&lt;++&gt;</td>
</tr>
<tr>
<td>y</td>
<td>&lt;++&gt;</td>
</tr>
<tr>
<td>&lt;++&gt;</td>
<td>&lt;++&gt;</td>
</tr>
</tbody></table>
<h3 id="Cut"><a href="#Cut" class="headerlink" title="Cut"></a>Cut</h3><table>
<thead>
<tr>
<th>options</th>
<th>description</th>
</tr>
</thead>
<tbody><tr>
<td>&lt;++&gt;</td>
<td>&lt;++&gt;</td>
</tr>
<tr>
<td>&lt;++&gt;</td>
<td>&lt;++&gt;</td>
</tr>
<tr>
<td>&lt;++&gt;</td>
<td>&lt;++&gt;</td>
</tr>
<tr>
<td>&lt;++&gt;</td>
<td>&lt;++&gt;</td>
</tr>
<tr>
<td>&lt;++&gt;</td>
<td>&lt;++&gt;</td>
</tr>
<tr>
<td>&lt;++&gt;</td>
<td>&lt;++&gt;</td>
</tr>
<tr>
<td>&lt;++&gt;</td>
<td>&lt;++&gt;</td>
</tr>
</tbody></table>
<h2 id="Regular-Expressions"><a href="#Regular-Expressions" class="headerlink" title="Regular Expressions"></a>Regular Expressions</h2><h3 id="Literals"><a href="#Literals" class="headerlink" title="Literals"></a>Literals</h3><table>
<thead>
<tr>
<th>pattern</th>
<th>description</th>
</tr>
</thead>
<tbody><tr>
<td>.</td>
<td>match any char</td>
</tr>
<tr>
<td>char</td>
<td>literaly a char</td>
</tr>
</tbody></table>
<h3 id="Metacharacters"><a href="#Metacharacters" class="headerlink" title="Metacharacters"></a>Metacharacters</h3><h4 id="Anchors"><a href="#Anchors" class="headerlink" title="Anchors"></a>Anchors</h4><table>
<thead>
<tr>
<th>pattern</th>
<th>description</th>
</tr>
</thead>
<tbody><tr>
<td>^</td>
<td>found at the begin of line</td>
</tr>
<tr>
<td>$</td>
<td>found at the end of line</td>
</tr>
</tbody></table>
<h4 id="Quantifiers"><a href="#Quantifiers" class="headerlink" title="Quantifiers"></a>Quantifiers</h4><table>
<thead>
<tr>
<th>pattern</th>
<th>description</th>
</tr>
</thead>
<tbody><tr>
<td>?</td>
<td>match <strong>an element</strong> zero or one time</td>
</tr>
<tr>
<td>*</td>
<td>match <strong>an element</strong> zero or more times</td>
</tr>
<tr>
<td>+</td>
<td>match <strong>an element</strong> one or more times</td>
</tr>
<tr>
<td>{}</td>
<td>match <strong>an element</strong> a specific number of times</td>
</tr>
<tr>
<td>{n,}</td>
<td>match <strong>an element</strong> if it occurs n or more times</td>
</tr>
<tr>
<td>{,n}</td>
<td>match <strong>an element</strong> if it occurs no more than n times</td>
</tr>
</tbody></table>
<p>A quantifiers is after <strong>an element</strong>, such as <code>.*</code> means match any char with any lengh equivalent any string.</p>
<p>An element can like this <code>[A_Z]</code>and this<code>[:digit:]</code>. We can see the pattern before a quantifiers as a whole.</p>
<h4 id="Bracket-Expressions-and-Character-Classes"><a href="#Bracket-Expressions-and-Character-Classes" class="headerlink" title="Bracket Expressions and Character Classes"></a>Bracket Expressions and Character Classes</h4><ul>
<li><p>Bracket Expressions</p>
<ul>
<li>specify a set of characters to be match<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ grep -h <span class="string">'[bg]zip'</span> test.txt</span><br><span class="line">bzip2</span><br><span class="line">bzip123</span><br><span class="line">gzip</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>Negation</p>
<ul>
<li>If the first char in a bracket expression is a caret(^), the <strong>remaining char</strong> are taken to be a set of chars that must not be present at the given char position.<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ grep -h <span class="string">'[^bg]zip'</span> test.txt</span><br><span class="line">bunzip</span><br><span class="line">gunzip</span><br><span class="line">funzip</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>Character Classes</p>
<ul>
<li>A set of characters range<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ grep -h <span class="string">'[^ABCDEF]'</span> test.txt</span><br><span class="line">or you can</span><br><span class="line">$ grep -h <span class="string">'[^A-F]'</span> test.txt</span><br><span class="line"></span><br><span class="line">Here are more expressions</span><br><span class="line">$ grep -h <span class="string">'[A-Fa-z0-9]'</span> test.txt</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>POSIX Character Class</p>
</li>
</ul>
<table>
<thead>
<tr>
<th>char</th>
<th>description</th>
</tr>
</thead>
<tbody><tr>
<td>[:alnum:]</td>
<td>alphanumeric characters.equivalent to[A-Za-z0-9]</td>
</tr>
<tr>
<td>[:word:]</td>
<td>same as alnum, with the addition of the underscore char(_)</td>
</tr>
<tr>
<td>[:alpha:]</td>
<td>[A-Za-z]</td>
</tr>
<tr>
<td>[:blank:]</td>
<td>space and tab char</td>
</tr>
<tr>
<td>[:digit:]</td>
<td>number 0 through 9</td>
</tr>
<tr>
<td>[:lower:]</td>
<td>the lowercase letters</td>
</tr>
<tr>
<td>[:upper:]</td>
<td>the uppercase letters</td>
</tr>
<tr>
<td>[:space:]</td>
<td>[\t\r\n\v\f]</td>
</tr>
<tr>
<td>[:xdigit:]</td>
<td>chars used to express hexadecimal numbers.[0-9a-fA-F]</td>
</tr>
</tbody></table>
<h2 id="Flow-control"><a href="#Flow-control" class="headerlink" title="Flow control"></a>Flow control</h2><h3 id="if-statements"><a href="#if-statements" class="headerlink" title="if statements"></a>if statements</h3><h4 id="File-Expressions"><a href="#File-Expressions" class="headerlink" title="File Expressions"></a>File Expressions</h4><table>
<thead>
<tr>
<th>command</th>
<th>description</th>
</tr>
</thead>
<tbody><tr>
<td>f1 -ef f2</td>
<td>f1 and f2 have the same indoe number</td>
</tr>
<tr>
<td>f1 -nt f2</td>
<td>f1 newer than f2</td>
</tr>
<tr>
<td>f1 -ot f2</td>
<td>f1 older than f2</td>
</tr>
<tr>
<td>-d f1</td>
<td>f1 exists an is a directory</td>
</tr>
<tr>
<td>-e f1</td>
<td>f1 exists</td>
</tr>
<tr>
<td>-f f1</td>
<td>f1 is a regular file</td>
</tr>
</tbody></table>
<h4 id="String-Expressions"><a href="#String-Expressions" class="headerlink" title="String Expressions"></a>String Expressions</h4><table>
<thead>
<tr>
<th>command</th>
<th>description</th>
</tr>
</thead>
<tbody><tr>
<td>string</td>
<td>string is not null</td>
</tr>
<tr>
<td>-n string</td>
<td>the lenth of string is greater than zero</td>
</tr>
<tr>
<td>-z string</td>
<td>the lenth of string is zero</td>
</tr>
<tr>
<td>s1 = s2 or s1 == s2</td>
<td>equal</td>
</tr>
<tr>
<td>s1 !=s2</td>
<td>not equal</td>
</tr>
<tr>
<td>s1 &gt; s2</td>
<td>s1 sorts after s2</td>
</tr>
<tr>
<td>s1 &lt; s2</td>
<td>s1 sortf before s2</td>
</tr>
</tbody></table>
<h4 id="Integer-Expressions"><a href="#Integer-Expressions" class="headerlink" title="Integer Expressions"></a>Integer Expressions</h4><table>
<thead>
<tr>
<th>command</th>
<th>description</th>
</tr>
</thead>
<tbody><tr>
<td>int1 -eq int2</td>
<td>equal</td>
</tr>
<tr>
<td>int1 -ne int2</td>
<td>not equal</td>
</tr>
<tr>
<td>-le</td>
<td>less or equal</td>
</tr>
<tr>
<td>-lt</td>
<td>less than</td>
</tr>
<tr>
<td>-ge</td>
<td>greater or equal</td>
</tr>
<tr>
<td>-gt</td>
<td>greater</td>
</tr>
</tbody></table>
<h4 id="A-More-Modern-Version-of-test"><a href="#A-More-Modern-Version-of-test" class="headerlink" title="A More Modern Version of test"></a>A More Modern Version of test</h4><ul>
<li><strong>Designed of string</strong><ul>
<li><code>[[ command ]]</code></li>
</ul>
</li>
</ul>
<p>and here is a new feature:<br><code>string1 =~ regex</code>. This return true if string1 matched by the extended regular expression</p>
<ul>
<li><strong>Designed of Integer</strong><ul>
<li>`(( command ))</li>
<li>integer only</li>
</ul>
</li>
</ul>
<h3 id="case"><a href="#case" class="headerlink" title="case"></a>case</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> word <span class="keyword">in</span></span><br><span class="line">    [pattern [| pattern]...) commands ;;]...</span><br><span class="line"><span class="keyword">esac</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> <span class="variable">$num</span> <span class="keyword">in</span></span><br><span class="line">    0) <span class="built_in">echo</span> <span class="string">"zero"</span></span><br><span class="line">        ;;  <span class="comment"># ;; break and out of case</span></span><br><span class="line">    ...</span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure>

<h4 id="pattern"><a href="#pattern" class="headerlink" title="pattern"></a>pattern</h4><table>
<thead>
<tr>
<th>pattern</th>
<th>description</th>
</tr>
</thead>
<tbody><tr>
<td>a)</td>
<td>matches if word equals a</td>
</tr>
<tr>
<td>[[:alpha:]]</td>
<td>matches if word is a single alphabetic</td>
</tr>
<tr>
<td>???)</td>
<td>matches if word is exactly three characters long</td>
</tr>
<tr>
<td>*.txt</td>
<td>matches if word ends with .txt</td>
</tr>
<tr>
<td>*)</td>
<td>matches any value.</td>
</tr>
</tbody></table>
<h3 id="for-while-until"><a href="#for-while-until" class="headerlink" title="for/while/until"></a>for/while/until</h3><ul>
<li>for <ul>
<li><code>for variable in words; do commands done</code></li>
<li><code>for (( expression1; expression2; expression3 )); do commands done</code></li>
</ul>
</li>
<li>while <ul>
<li><code>while commands; do commands; done</code></li>
<li>while commands is true continue</li>
</ul>
</li>
<li>until <ul>
<li><code>until commands; do commands; done</code></li>
<li>while commands is false continue</li>
</ul>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/01/23/universe/regular_expression/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Travis TuRing">
      <meta itemprop="description" content="Mens et Manus">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ring's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/01/23/universe/regular_expression/" class="post-title-link" itemprop="url">æ­£åˆ™è¡¨è¾¾å¼åŸºç¡€è¯­æ³•</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-01-23 00:00:00" itemprop="dateCreated datePublished" datetime="2020-01-23T00:00:00+08:00">2020-01-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-10-08 12:00:31" itemprop="dateModified" datetime="2020-10-08T12:00:31+08:00">2020-10-08</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Base/Extended Regex</p>
<ul>
<li><code>.</code><ul>
<li>åŒ¹é…ä»»ä½•ä¸€ä¸ªå­—ç¬¦</li>
</ul>
</li>
<li><code>*</code><ul>
<li>(è´ªå©ª)åŒ¹é…ä»»ä½•æ•°é‡(åŒ…æ‹¬0)çš„å‰é¢çš„å†…å®¹ï¼Œè´ªå©ªåŒ¹é…</li>
</ul>
</li>
<li><code>+</code><ul>
<li>åŒ¹é…ä¸€ä¸ªæˆ–å¤šä¸ªçš„å‰é¢çš„å†…å®¹ï¼Œéè´ªå©ªåŒ¹é…</li>
</ul>
</li>
<li><code>-</code><ul>
<li>åŒ¹é…é›¶ä¸ªæˆ–å¤šä¸ªçš„å‰é¢çš„å†…å®¹ï¼Œéè´ªå©ªåŒ¹é…</li>
</ul>
</li>
<li><code>{1}</code><ul>
<li>é‡å¤æ¬¡æ•°1</li>
</ul>
</li>
<li><code>\S</code><ul>
<li>ä»»ä½•éç©ºç™½å­—ç¬¦</li>
</ul>
</li>
<li><code>\s</code><ul>
<li>ä»»ä½•ç©ºç™½å­—ç¬¦</li>
</ul>
</li>
<li><code>?</code><ul>
<li>å‰é¢å†…å®¹æ˜¯å¯é€‰çš„</li>
</ul>
</li>
<li><code>\</code><ul>
<li>æœ‰æ—¶å¯ä»¥èµ·åˆ°è½¬æ„çš„ä½œç”¨ï¼Œ<code>\S</code>ç­‰å°±æ˜¯ä¾‹å¤–</li>
</ul>
</li>
<li><code>[0-9]</code><ul>
<li>ä»»ä½•0åˆ°9çš„æ•°å­—ï¼ŒèŒƒå›´å¯å˜ä½†è¦æŒ‰é¡ºåº</li>
</ul>
</li>
<li><code>[a-z]</code><ul>
<li>ä»»ä½•aåˆ°zçš„å°å†™å­—ç¬¦ï¼ŒèŒƒå›´å¯å˜ä½†è¦æŒ‰é¡ºåº</li>
</ul>
</li>
<li><code>[A-Z]</code><ul>
<li>ä»»ä½•Aåˆ°Zçš„å¤§å†™å­—ç¬¦ï¼ŒèŒƒå›´å¯å˜ä½†è¦æŒ‰é¡ºåº</li>
</ul>
</li>
<li><code>[A-Za-z]</code><ul>
<li>ä»»ä½•Aåˆ°Zçš„å­—ç¬¦ï¼ŒèŒƒå›´å¯å˜ä½†è¦æŒ‰é¡ºåº</li>
</ul>
</li>
<li>é”šå®š<ul>
<li><code>$</code><ul>
<li>ä»¥å‰é¢çš„å†…å®¹ç»“æŸ</li>
</ul>
</li>
<li><code>^</code><ul>
<li>ä»¥å‰é¢çš„å†…å®¹å¼€å¤´</li>
</ul>
</li>
<li><code>\&lt; ,\b</code><ul>
<li>é”šå®šå•è¯é¦–éƒ¨</li>
</ul>
</li>
<li><code>\&gt; ,\b</code><ul>
<li>é”šå®šå•è¯ç»“å°¾</li>
</ul>
</li>
</ul>
</li>
<li><code>|</code><ul>
<li>orï¼Œæ•´ä¸ªå·¦è¾¹æˆ–æ•´ä¸ªå³è¾¹å¦‚<code>C|cat</code>è¡¨ç¤ºCæˆ–cat</li>
<li>ä¹Ÿå¯ä½¿ç”¨åˆ†ç»„æ”¹å˜æ‰§è¡Œé¡ºåº<code>(C|c)at</code>è¡¨ç¤ºCatæˆ–cat</li>
</ul>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/01/20/universe/linux/linux_note/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Travis TuRing">
      <meta itemprop="description" content="Mens et Manus">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ring's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/01/20/universe/linux/linux_note/" class="post-title-link" itemprop="url">Linuxå­¦ä¹ </a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-01-20 00:00:00" itemprop="dateCreated datePublished" datetime="2020-01-20T00:00:00+08:00">2020-01-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-11-01 20:43:32" itemprop="dateModified" datetime="2020-11-01T20:43:32+08:00">2020-11-01</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Linuxå“²å­¦"><a href="#Linuxå“²å­¦" class="headerlink" title="Linuxå“²å­¦"></a>Linuxå“²å­¦</h2><ul>
<li>LinuxåŸºæœ¬åŸåˆ™<ul>
<li><ol>
<li>ç”±ç›®çš„å•ä¸€çš„å°ç¨‹åºç»„æˆï¼Œç»„åˆå°ç¨‹åºå®Œæ•´å¤æ‚ä»»åŠ¡</li>
</ol>
</li>
<li><ol start="2">
<li>ä¸€åˆ‡çš†æ–‡ä»¶</li>
</ol>
</li>
<li><ol start="3">
<li>é¿å…æ•è·ç”¨æˆ·æ¥å£ï¼Œé¿å…ä¸ç”¨æˆ·äº¤äº’</li>
</ol>
</li>
<li><ol start="4">
<li>é…ç½®æ–‡ä»¶ä¿å­˜ä¸ºçº¯æ–‡æœ¬æ ¼å¼</li>
</ol>
</li>
</ul>
</li>
<li>å‘½ä»¤æ ¼å¼<code>å‘½ä»¤ é€‰é¡¹ å‚æ•°</code><ul>
<li>çŸ­é€‰é¡¹ï¼š<code>-</code>åŠ æŸä¸ªå­—æ¯ï¼Œå¦‚<code>-h</code>æŸ¥çœ‹help<ul>
<li>çŸ­é€‰é¡¹å¯ä»¥å¤šä¸ªé€‰é¡¹å†™ä¸€èµ·<code>-a -b = -ab</code></li>
</ul>
</li>
<li>é•¿é€‰é¡¹ï¼š<code>--&lt;option&gt;</code></li>
</ul>
</li>
<li>å‘½ä»¤æ¨¡æ¿<ul>
<li><code>[]</code>ä¸­è¡¨ç¤ºå¯é€‰çš„å†…å®¹</li>
<li><code>&lt;&gt;</code>ä¸­è¡¨ç¤ºå¿…é¡»ç»™å‡ºçš„å†…å®¹</li>
<li><code>...</code>è¡¨ç¤ºå¯ä»¥å‡ºç°å¤šä¸ªï¼Œå¯ä»¥ä½¿ç”¨å¤šæ¬¡</li>
<li>ç”¨<code>|</code>åˆ†å‰²è¡¨ç¤ºå¤šé€‰ä¸€ï¼Œå¦‚<code>[-a|-b]</code></li>
</ul>
</li>
<li>é­”æ•°Magic Numberï¼šæ ‡è®°æ–‡ä»¶çš„æ‰§è¡Œæ ¼å¼ï¼Œå¦‚<code>#!/bin/sh</code>ï¼Œä¹Ÿç§°ä¸ºshebang</li>
</ul>
<h3 id="FHS-æ–‡ä»¶å±‚çº§ç³»ç»Ÿ"><a href="#FHS-æ–‡ä»¶å±‚çº§ç³»ç»Ÿ" class="headerlink" title="FHS(æ–‡ä»¶å±‚çº§ç³»ç»Ÿ)"></a>FHS(æ–‡ä»¶å±‚çº§ç³»ç»Ÿ)</h3><ul>
<li>/boot: ç³»ç»Ÿå¯åŠ¨ç›¸å…³æ–‡ä»¶</li>
<li>/dev: è®¾å¤‡æ–‡ä»¶</li>
<li>/etc: é…ç½®æ–‡ä»¶ï¼Œå­˜æ–‡æœ¬</li>
<li>/home: ç”¨æˆ·å®¶ç›®å½•</li>
<li>/root: ç®¡ç†å‘˜å®¶ç›®å½•</li>
<li>/lib: åº“æ–‡ä»¶<ul>
<li>/lib/modules: å†…æ ¸æ¨¡å—æ–‡ä»¶</li>
<li>é™æ€åº“<ul>
<li>linuxä¸‹è¡¨ç°ä¸º.a</li>
</ul>
</li>
<li>åŠ¨æ€åº“:è½½å…¥åˆ°å†…å­˜ä¸­å¯ä»¥å¤ç”¨<ul>
<li>winä¸‹è¡¨ç°ä¸º.dllæ–‡ä»¶ï¼Œlinuxä¸‹è¡¨ç°ä¸º.so(shared object)</li>
</ul>
</li>
</ul>
</li>
<li>/opt: å¯é€‰ç›®å½•ï¼Œç¬¬ä¸‰æ–¹ç¨‹åºçš„å®‰è£…ç›®å½•</li>
<li>/proc: ä¼ªæ–‡ä»¶ç³»ç»Ÿï¼Œå†…æ ¸æ˜ å°„</li>
<li>/sys: ä¼ªæ–‡ä»¶ç³»ç»Ÿï¼Œè·Ÿç¡¬ä»¶ç›¸å…³çš„å±æ€§æ˜ å°„</li>
<li>/tmp: ä¸´æ—¶æ–‡ä»¶ï¼Œä¼šå®šæ—¶æ¸…ç†</li>
<li>/var: å¯å˜åŒ–æ–‡ä»¶</li>
<li>/bin: å¯æ‰§è¡Œæ–‡ä»¶ï¼Œç”¨æˆ·å‘½ä»¤</li>
<li>/sbin: ç®¡ç†å‘½ä»¤</li>
<li>/usr: universal shared read-only<ul>
<li>usrä¸‹ä¹‹æ‰€ä»¥æœ‰/usr/binå’Œ/usr/sbinæ˜¯å› ä¸º/binè·Ÿå¯åŠ¨ç³»ç»Ÿç›¸å…³ï¼Œè€Œ/usrä¸‹è·Ÿå¯åŠ¨ç³»ç»Ÿåæä¾›æ­£å¸¸åŠŸèƒ½ç›¸å…³</li>
</ul>
</li>
<li>/usr/local: åˆæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„æ–‡ä»¶ç³»ç»Ÿï¼Œä¹Ÿæœ‰binï¼Œsbinã€‚æ˜¯ç¬¬ä¸‰æ–¹è½¯ä»¶çš„å®‰è£…è·¯å¾„</li>
</ul>
<h2 id="å¸¸ç”¨å·¥å…·"><a href="#å¸¸ç”¨å·¥å…·" class="headerlink" title="å¸¸ç”¨å·¥å…·"></a>å¸¸ç”¨å·¥å…·</h2><ul>
<li>manï¼šæŸ¥çœ‹æ‰‹å†Œ<ul>
<li><code>whatis name</code>æŸ¥çœ‹nameçš„ç›®å½•ï¼Œä½¿ç”¨<code>man [n] name</code>æ‰“å¼€nameç¬¬nç« </li>
</ul>
</li>
<li>trï¼šå­—ç¬¦ä¸²è½¬æ¢æˆ–åˆ é™¤<ul>
<li><code>tr &#39;a-z&#39; &#39;A-Z&#39;</code>æŠŠè¾“å…¥ä¸­çš„å­—ç¬¦è½¬æ¢æˆå¤§å†™</li>
<li><code>tr -d &#39;abc&#39;</code>åˆ é™¤å‡ºç°çš„å­—ç¬¦ï¼Œè¿™é‡Œæ˜¯aï¼Œbï¼Œc</li>
</ul>
</li>
<li>shellä¸­å¯ä»¥å¼€å­shellï¼Œä½¿ç”¨<code>pstree</code>å¯ä»¥æŸ¥çœ‹çˆ¶å­å…³ç³»ï¼Œä½¿ç”¨exité€€å‡ºä¸€ä¸ª</li>
<li>ç¯å¢ƒå˜é‡<ul>
<li><code>PATH</code>å‘½ä»¤æœç´¢è·¯å¾„</li>
<li><code>HISTSIZE</code>å‘½ä»¤å†å²ç¼“å†²åŒº<ul>
<li>ä½¿ç”¨<code>history</code>æŸ¥çœ‹å‘½ä»¤å†å²</li>
<li>ä½¿ç”¨<code>!n</code>æ‰§è¡Œå‘½ä»¤å†å²ä¸­ç¬¬næ¡å†å²å‘½ä»¤</li>
<li>ä½¿ç”¨<code>!-n</code>æ‰§è¡Œå‘½ä»¤å†å²ä¸­å€’æ•°ç¬¬næ¡å†å²å‘½ä»¤</li>
<li>ä½¿ç”¨<code>!!</code>æ‰§è¡Œåˆšæ‰æ‰§è¡Œçš„å‘½ä»¤</li>
<li>ä½¿ç”¨<code>!string</code>æ‰§è¡Œå‘½ä»¤å†å²ä¸­æœ€è¿‘çš„ä»¥æŒ‡å®šå­—ç¬¦ä¸²å¼€å¤´çš„å‘½ä»¤</li>
<li>ä½¿ç”¨<code>!$</code>å¼•ç”¨ä¸Šä¸€ä¸ªå‘½ä»¤çš„æœ€åä¸€ä¸ªå‚æ•°</li>
</ul>
</li>
</ul>
</li>
<li>å‘½ä»¤æ›¿æ¢ï¼š<code>$(COMMAND)</code>æˆ–ä½¿ç”¨åå¼•å·`COMMAND`<ul>
<li>æŠŠå‘½ä»¤çš„ç»“æœæ”¾å…¥ä¸€ä¸ªå‘½ä»¤ä¸­</li>
<li><code>echo $(ls)</code></li>
</ul>
</li>
<li><strong>shellä¸­çš„å¼•å·</strong>ï¼š<ul>
<li>åå¼•å·``ï¼šå‘½ä»¤æ›¿æ¢</li>
<li>åŒå¼•å·â€â€ï¼šå¼±å¼•ç”¨ã€‚å¯ä»¥å®ç°å˜é‡æ›¿æ¢</li>
<li>å•å¼•å·â€™â€™ï¼šå¼ºå¼•ç”¨ã€‚ä¸èƒ½å®ç°å˜é‡æ›¿æ¢</li>
</ul>
</li>
<li>æ–‡ä»¶åé€šé…ï¼Œglobbing<ul>
<li><code>*</code>ï¼šä»»æ„é•¿åº¦çš„ä»»æ„å­—ç¬¦</li>
<li><code>?</code>ï¼šä»»æ„å•ä¸ªå­—ç¬¦</li>
<li><code>[]</code>ï¼šæŒ‡å®šèŒƒå›´å†…çš„ä»»æ„å•ä¸ªå­—ç¬¦</li>
<li><code>[^]</code>ï¼šæŒ‡å®šèŒƒå›´å¤–çš„ä»»æ„å•ä¸ªå­—ç¬¦</li>
<li>ç‰¹æ®Šå­—ç¬¦ï¼Œå½¢å¦‚<code>[:punct:]</code>ã€‚<code>[:punct:]</code>æ‰€æœ‰çš„æ ‡ç‚¹ç¬¦å·</li>
</ul>
</li>
<li>ç”Ÿæˆåˆ—è¡¨<ul>
<li><code>seq [OPTION] [FIRST] [INCREMENT] LAST</code></li>
</ul>
</li>
<li><code>xargs</code><ul>
<li>ä»æ ‡å‡†è¾“å…¥æ¥æ”¶å‘½ä»¤å¹¶æ‰§è¡Œ</li>
</ul>
</li>
<li><code>w</code><ul>
<li>æ˜¾ç¤ºå·²ç™»å½•çš„ç”¨æˆ·</li>
</ul>
</li>
<li><code>last</code><ul>
<li>æ˜¾ç¤ºç™»å½•æ—¥å¿—ï¼Œå³æ˜¾ç¤º<code>/var/log/wtmp</code>æ–‡ä»¶</li>
</ul>
</li>
<li><code>lastb</code><ul>
<li>æ˜¾ç¤ºé”™è¯¯çš„ç™»å½•æ—¥å¿—ï¼Œå³æ˜¾ç¤º<code>/var/log/btmp</code>æ–‡ä»¶</li>
</ul>
</li>
<li><code>lastlog</code><ul>
<li>æ˜¾ç¤ºæ¯ä¸€ä¸ªç”¨æˆ·æœ€è¿‘ä¸€æ¬¡çš„æˆåŠŸç™»å½•ä¿¡æ¯</li>
</ul>
</li>
<li><code>basename</code><ul>
<li>æ˜¾ç¤ºæ–‡ä»¶çš„åŸºè·¯å¾„å</li>
</ul>
</li>
</ul>
<h2 id="ç®¡é“åŠIOé‡å®šå‘"><a href="#ç®¡é“åŠIOé‡å®šå‘" class="headerlink" title="ç®¡é“åŠIOé‡å®šå‘"></a>ç®¡é“åŠIOé‡å®šå‘</h2><ul>
<li>ç³»ç»Ÿè®¾å®š<ul>
<li>é»˜è®¤è¾“å…¥è®¾å¤‡ï¼Œæ ‡å‡†è¾“å…¥ï¼Œstdin, 0</li>
<li>é»˜è®¤è¾“å‡ºè®¾å¤‡ï¼Œæ ‡å‡†è¾“å‡ºï¼Œstdout, 1</li>
<li>æ ‡å‡†é”™è¯¯è¾“å‡ºï¼Œstderr, 2</li>
</ul>
</li>
<li>é‡å®šå‘åŠæ–‡ä»¶æè¿°ç¬¦<ul>
<li>è¾“å‡ºé‡å®šå‘<ul>
<li><code>&gt;</code>è¦†ç›–è¾“å‡º<ul>
<li>å¼ºåˆ¶è¦†ç›–ï¼šå½“è®¾ç½®äº†ä¸å…è®¸è¦†ç›–å·²å­˜åœ¨æ–‡ä»¶æ—¶ä½¿ç”¨<code>&gt;|</code></li>
</ul>
</li>
<li><code>&gt;&gt;</code>è¿½åŠ è¾“å‡º</li>
<li><code>2&gt;</code>, <code>2&gt;&gt;</code>é‡å®šå‘é”™è¯¯è¾“å‡º<ul>
<li>å¯ä»¥ä½¿ç”¨<code>ls ./ &gt; a.out 2&gt; b.out</code>è¿™æ ·çš„å½¢å¼</li>
</ul>
</li>
<li><code>&amp;&gt;</code>å°†ä¸¤ç§è¾“å‡º(æ ‡å‡†è¾“å‡ºï¼Œæ ‡å‡†é”™è¯¯)åŒæ—¶è¾“å‡ºåˆ°åŒä¸ªæ–‡ä»¶</li>
<li><code>2&gt;&amp;1</code><strong>é‡å®šå‘ç»‘å®š</strong>ï¼Œ2(æ ‡å‡†é”™è¯¯)é‡å®šå‘åˆ°1å®šå‘çš„æ–‡ä»¶<ul>
<li>shellè„šæœ¬ä»å·¦æ‰€ä»¥æ³¨æ„é¡ºåº<code>&gt;/dev/null 2&gt;&amp;1</code> VS <code>2&gt;&amp;1 &gt;/dev/null</code><ul>
<li>å‰è€…1å®šå‘åˆ°nullï¼Œ2å†å®šå‘åˆ°1å®šå‘çš„æ–‡ä»¶(null)</li>
<li>å‰è€…1å®šå‘åˆ°nullï¼Œ2å†å®šå‘åˆ°1å®šå‘çš„æ–‡ä»¶(stdout)ï¼Œç„¶å1æ‰å®šå‘åˆ°null</li>
</ul>
</li>
<li>ä¸ºä»€ä¹ˆä¸ç”¨<code>&gt;/path/to 2&gt;/path/to</code><ul>
<li>è¿™ç§æ–¹æ³•ï¼Œæ ‡å‡†è¾“å‡ºå’Œé”™è¯¯è¾“å‡ºä¼šæŠ¢å outæ–‡ä»¶çš„ç®¡é“ï¼Œå› æ­¤è¾“å‡ºçš„é¡ºåºæ— æ³•ä¼°è®¡</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>è¾“å…¥é‡å®šå‘<ul>
<li><code>&lt;</code>è¾“å…¥é‡å®šå‘</li>
<li><code>&lt;&lt;</code>Here Document  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">echo &lt;&lt; END_SIGN</span><br><span class="line">&gt; hello</span><br><span class="line">&gt; END_SIGN</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li>å…³é—­/æ‰“å¼€æ–‡ä»¶æè¿°ç¬¦(è¾“å…¥è¾“å‡º)<ul>
<li><code>[n]&gt;&amp;-</code>æˆ–<code>[n]&lt;&amp;-</code>ï¼Œéƒ½æ˜¯æŠŠæ–‡ä»¶æè¿°ç¬¦nå…³é—­</li>
<li><code>[n]&lt;&gt;file</code>ï¼Œæ‰“å¼€fileï¼ŒæŒ‡å®šå…¶æ–‡ä»¶æè¿°ç¬¦ä¸ºnï¼Œä¸æŒ‡å®šé»˜è®¤ä¸º0</li>
<li><code>exec 1&gt;&amp;-</code>åå°è¯•<code>echo mess</code>å°†ä¼šå¤±è´¥</li>
<li><code>exec closed_fd&gt;new_fd</code>æˆ–<code>exec new_fd&lt;close_fd</code>ï¼Œæ‰“å¼€æ–‡ä»¶æè¿°ç¬¦</li>
</ul>
</li>
<li>æ–‡ä»¶æè¿°ç¬¦å¤åˆ¶<ul>
<li><code>[fd1]&gt;&amp;fd2</code>æˆ–<code>[fd1]&lt;&amp;fd2</code>ï¼ŒæŠŠfd2å¤åˆ¶ç»™fd1</li>
<li>åœ¨ä¸ç¼ºçœçš„æƒ…å†µä¸‹ä¸¤è€…çš„ç­‰ä»·çš„ï¼Œéƒ½æ˜¯å°†fd2çš„æè¿°ç¬¦å¤åˆ¶ç»™fd1</li>
<li>å¦‚æœfd1ç¼ºçœï¼Œåˆ™<code>&gt;&amp;fd2</code>é»˜è®¤å¤åˆ¶ç»™æ ‡å‡†è¾“å‡ºï¼›è€Œ<code>&lt;&amp;fd2</code>é»˜è®¤å¤åˆ¶ç»™æ ‡å‡†è¾“å…¥</li>
</ul>
</li>
<li>æ–‡ä»¶æè¿°ç¬¦ç§»åŠ¨<ul>
<li><code>[fd1]&gt;&amp;fd2-</code>ï¼ŒæŠŠæ–‡ä»¶æè¿°ç¬¦fd2ä»£è¡¨çš„è¾“å‡ºæ–‡ä»¶å¤åˆ¶ç»™fd1ï¼Œå¹¶å…³é—­fd2<ul>
<li>å³è¾“å‡ºé‡å®šå‘ï¼Œç„¶åå…³é—­</li>
</ul>
</li>
<li><code>[fd1]&lt;&amp;fd2-</code>ï¼ŒæŠŠæ–‡ä»¶æè¿°ç¬¦fd2ä»£è¡¨çš„è¾“å…¥æ–‡ä»¶å¤åˆ¶ç»™fd1ä½œä¸ºè¾“å…¥æ–‡ä»¶ï¼Œå¹¶å…³é—­fd2</li>
</ul>
</li>
</ul>
</li>
<li>ç®¡é“<ul>
<li><code>cmd1 | cmd2</code>å‰ä¸€ä¸ªå‘½ä»¤çš„è¾“å‡ºä½œä¸ºåä¸€ä¸ªå‘½ä»¤çš„è¾“å…¥</li>
</ul>
</li>
<li>tee<ul>
<li><code>man tee</code>ä¸€ä¸ªè¾“å…¥ä¸¤ä¸ªè¾“å‡º</li>
</ul>
</li>
</ul>
<h2 id="Shellç¼–ç¨‹"><a href="#Shellç¼–ç¨‹" class="headerlink" title="Shellç¼–ç¨‹"></a>Shellç¼–ç¨‹</h2><h3 id="å˜é‡"><a href="#å˜é‡" class="headerlink" title="å˜é‡"></a>å˜é‡</h3><p><code>VARNAME=VALUE</code></p>
<ul>
<li>å¼•ç”¨ï¼š<code>$VAENAME</code> or <code>${VARNAME}</code>ï¼Œæ³¨æ„<code>$()</code>æ˜¯å¼•ç”¨æ‰§è¡Œç»“æœï¼Œè€Œ<code>{}</code>æ‰æ˜¯å¼•ç”¨å†…å®¹</li>
<li>ç¯å¢ƒå˜é‡ï¼šä½œç”¨åŸŸä¸ºå½“å‰shellæˆ–å™¨å­è¿›ç¨‹<ul>
<li>ç”¨<code>export</code>å¯¼å‡ºï¼Œ<code>export var=value</code></li>
</ul>
</li>
<li>ä½ç½®å˜é‡<ul>
<li><code>$0, $1, ...</code>ï¼Œæ‰€æœ‰å‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°â€¦</li>
<li><code>shift [n]</code>ï¼ŒæŠŠç¬¬ä¸€ä¸ªå˜é‡å¼¹å‡ºã€‚å› æ­¤æœ‰å¾ˆå¤šå˜é‡æ—¶å¯ä»¥ä½¿ç”¨shift</li>
</ul>
</li>
<li>ç‰¹æ®Šå˜é‡<ul>
<li><code>$?</code>ï¼Œä¸Šä¸€ä¸ªå‘½ä»¤çš„<strong>æ‰§è¡ŒçŠ¶æ€</strong>è¿”å›å€¼ï¼Œ0æ­£ç¡®ï¼Œ1~255æ‰§è¡Œé”™è¯¯</li>
<li><code>$#</code>ï¼Œå‚æ•°ä¸ªæ•°</li>
<li><code>$*</code>ï¼Œå‚æ•°åˆ—è¡¨</li>
<li><code>$@</code>ï¼Œå‚æ•°åˆ—è¡¨</li>
</ul>
</li>
<li>å£°æ˜<code>declare [OPTION] VAR=VALUE</code><ul>
<li><code>declare -i SUM=0</code>ï¼Œå£°æ˜æ•´å½¢å˜é‡SUM</li>
<li><code>declare -x A=0</code>ï¼Œå£°æ˜exportå˜é‡A</li>
</ul>
</li>
</ul>
<h3 id="æ¡ä»¶åˆ†æ”¯"><a href="#æ¡ä»¶åˆ†æ”¯" class="headerlink" title="æ¡ä»¶åˆ†æ”¯"></a>æ¡ä»¶åˆ†æ”¯</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">if expression; then</span><br><span class="line">    statement</span><br><span class="line">elif</span><br><span class="line">    statement</span><br><span class="line">else</span><br><span class="line">    statement</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<ul>
<li>æ¡ä»¶æµ‹è¯•çš„è¡¨è¾¾å¼<ul>
<li><code>[ expression ]</code>ï¼Œ <strong>æ³¨æ„</strong> ä¸­æ‰©å·ä¸¤ç«¯çš„ç©ºæ ¼æ˜¯å¿…é¡»çš„</li>
<li><code>[[ expression ]]</code>ï¼Œä¸¤ç§æ–¹æ³•ç”¨æ³•ç›¸åŒï¼Œä½†æ˜¯ä¸¤ä¸ªä¸­æ‹¬å·æ˜¯bashçš„å…³é”®å­—</li>
<li><code>test expression</code></li>
<li>å› ä¸ºifè¯­å¥å–çš„æ˜¯è¡¨è¾¾å¼æ‰§è¡ŒçŠ¶æ€çš„ç»“æœï¼Œæ‰€ä»¥å¦‚æœæ¡ä»¶åˆ¤æ–­æ˜¯å‘½ä»¤åˆ™ä¸éœ€è¦ä¸­æ‹¬å·ï¼Œå¦‚<code>if test expression; then</code></li>
</ul>
</li>
<li>shellä¸­è¿›è¡Œç®—æ•°è¿ç®—<ul>
<li><strong>shellæŠŠæ‰€æœ‰çš„å˜é‡éƒ½å½“ä½œå­—ç¬¦</strong>ï¼Œæ‰€ä»¥è¦è¿›è¡Œç®—æ•°è¿ç®—éœ€è¦é¢å¤–æ“ä½œ</li>
<li><ol>
<li><code>let</code>ï¼Œè§<code>help let</code>ã€‚å¦‚<code>let c=$a+$b</code></li>
</ol>
</li>
<li><ol start="2">
<li><code>$[expression]</code>ã€‚å¦‚<code>c=$[$a+$b]</code></li>
</ol>
</li>
<li><ol start="3">
<li><code>$(())</code>ã€‚å¦‚<code>c=$(($a+$b))</code></li>
</ol>
</li>
<li><ol start="4">
<li><code>expr expression</code>ï¼Œè¡¨è¾¾å¼ä¸­ï¼Œå„æ“ä½œæ•°å’Œæ“ä½œç¬¦ç›´æ¥è¦æœ‰ç©ºæ ¼ï¼Œä¸”è¦ä½¿ç”¨å‘½ä»¤å¼•ç”¨ã€‚å› ä¸ºæœ¬è´¨æ˜¯è°ƒç”¨<code>expr</code>ç¨‹åºã€‚å¦‚<code>c=$(expr $a + $b)</code></li>
</ol>
</li>
</ul>
</li>
<li>é€€å‡ºè„šæœ¬ï¼š<code>exit</code><ul>
<li>å¦‚æœæ²¡æœ‰æŒ‡å®šé€€å‡ºçŠ¶æ€ï¼Œåˆ™è¿”å›ä¸Šä¸€æ¡å‘½ä»¤çš„æ‰§è¡ŒçŠ¶æ€</li>
<li>0æ­£ç¡®ï¼Œ1ï½255é”™è¯¯</li>
</ul>
</li>
<li>æ–‡ä»¶æµ‹è¯•<ul>
<li><code>-e FILE</code>ï¼Œæ˜¯å¦å­˜åœ¨</li>
<li><code>-f FILE</code>ï¼Œæ˜¯å¦æ™®é€šæ–‡ä»¶</li>
<li><code>-d FILE</code>ï¼Œæ˜¯å¦ä¸ºç›®å½•</li>
<li><code>-r/w/x</code>ï¼Œæ˜¯å¦å¯è¯»å†™æ‰§è¡Œ</li>
</ul>
</li>
<li>ç»„åˆæµ‹è¯•æ¡ä»¶<ul>
<li><code>-a</code>ï¼Œé€»è¾‘ä¸</li>
<li><code>-o</code>ï¼Œé€»è¾‘æˆ–</li>
<li><code>!</code>ï¼Œé</li>
<li>ä¹Ÿå¯ä»¥ä½¿ç”¨<code>[ expression ] || [ expression ]</code></li>
</ul>
</li>
</ul>
<h4 id="switch-case"><a href="#switch-case" class="headerlink" title="switch case"></a>switch case</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> SWITCH <span class="keyword">in</span></span><br><span class="line">    value1)</span><br><span class="line">        statement</span><br><span class="line">        ...</span><br><span class="line">        ;;</span><br><span class="line">    value2|value3)</span><br><span class="line">        statement</span><br><span class="line">        ...</span><br><span class="line">        ;;</span><br><span class="line">    [0-9])</span><br><span class="line">        statement</span><br><span class="line">        ...</span><br><span class="line">        ;;</span><br><span class="line">    *)</span><br><span class="line">        statement</span><br><span class="line">        ...</span><br><span class="line">        ;;</span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure>


<h3 id="æ–‡æœ¬å¤„ç†"><a href="#æ–‡æœ¬å¤„ç†" class="headerlink" title="æ–‡æœ¬å¤„ç†"></a>æ–‡æœ¬å¤„ç†</h3><h4 id="sed"><a href="#sed" class="headerlink" title="sed"></a>sed</h4><p>æµç¼–è¾‘å™¨(Stream EDitor, sed)ã€‚è¡Œç¼–è¾‘å™¨ã€‚é»˜è®¤å°†è¾“å‡ºåˆ°å±å¹•</p>
<p><code>sed [option] &#39;AddressCommand&#39; file...</code></p>
<ul>
<li>option<ul>
<li><code>-n</code>é™é»˜æ¨¡å¼ï¼Œä¸å†æ˜¾ç¤ºæ¨¡å¼ç©ºé—´ä¸­çš„å†…å®¹</li>
<li><code>-i</code>ä¿®æ”¹åŸæ–‡ä»¶</li>
<li><code>-r</code>ä½¿ç”¨æ‰©å±•æ­£åˆ™è¡¨è¾¾å¼</li>
</ul>
</li>
<li>Address:<ul>
<li><ol>
<li>Startline,Endline<ul>
<li>$ è¡¨ç¤ºæœ€åä¸€è¡Œ</li>
</ul>
</li>
</ol>
</li>
<li><ol start="2">
<li>/RegExp/</li>
</ol>
</li>
<li><ol start="3">
<li>/pattern1/,/pattern2/<ul>
<li>ä»è¢«1åŒ¹é…åˆ°çš„è¡Œå¼€å§‹åˆ°è¢«2åŒ¹é…çš„è¡Œç»“æŸ</li>
</ul>
</li>
</ol>
</li>
<li><ol start="4">
<li>Startline, +N<ul>
<li>ä»èµ·å§‹è¡Œå¼€å§‹å‘åNè¡Œ</li>
</ul>
</li>
</ol>
</li>
</ul>
</li>
<li>Command<ul>
<li><code>d</code>åˆ é™¤<ul>
<li>å¦‚<code>sed 1,2d</code></li>
</ul>
</li>
<li><code>p</code>æ˜¾ç¤ºç¬¦åˆæ¡ä»¶è¡Œ</li>
<li><code>a string</code>åœ¨æŒ‡å®šè¡Œåè¿½åŠ </li>
<li><code>i string</code>åœ¨æŒ‡å®šè¡Œå‰é¢åŠ </li>
<li><code>r FILE</code>å°†æŒ‡å®šæ–‡ä»¶çš„å†…å®¹æ·»åŠ éƒ½ç¬¦å·æ¡ä»¶çš„è¡Œ</li>
<li><code>w FILE</code>å°†åœ°å€æŒ‡å®šçš„èŒƒå›´çš„è¡Œä¿å­˜åˆ°æŒ‡å®šæ–‡ä»¶ä¸­</li>
<li><code>s/pattern/string/[opt]</code>æŸ¥æ‰¾å¹¶æ›¿æ¢<ul>
<li><code>g</code>å…¨å±€æ›¿æ¢</li>
<li><code>i</code>å¿½ç•¥å¤§å°å†™</li>
<li>åˆ†éš”ç¬¦å·ä¸ä¸€å®šæ˜¯<code>/</code>ä¹Ÿå¯æ˜¯<code>@, #, ~...</code>ç­‰</li>
<li><code>%</code>å…¨æ–‡æŸ¥æ‰¾</li>
</ul>
</li>
<li>å¼•ç”¨åŒ¹é…ä¸²<ul>
<li><code>&amp;</code>æ•´ä¸ªä¸²</li>
<li><code>\1</code>ç¬¬1ç»„</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="ç‰¹æ®Šæƒé™"><a href="#ç‰¹æ®Šæƒé™" class="headerlink" title="ç‰¹æ®Šæƒé™"></a>ç‰¹æ®Šæƒé™</h3><ul>
<li><p>SUIDï¼šæ–‡ä»¶è¿è¡Œæ—¶ï¼Œç›¸åº”è¿›ç¨‹çš„å±ä¸»æ˜¯ç¨‹åºæ–‡ä»¶è‡ªèº«çš„å±ä¸»ï¼Œè€Œéå¯åŠ¨è€…</p>
<ul>
<li><code>chmod u+s FILE</code></li>
<li><code>chmod u-s FILE</code></li>
<li>å¦‚æœFILEæœ¬èº«å°±æœ‰æ‰§è¡Œæƒé™ï¼Œåˆ™SUIDæ˜¾ç¤ºä¸ºsï¼Œå¦åˆ™ä¸ºS</li>
</ul>
</li>
<li><p>GUIDï¼šæ–‡ä»¶è¿è¡Œæ—¶ï¼Œç›¸åº”è¿›ç¨‹çš„å±ç»„æ˜¯ç¨‹åºæ–‡ä»¶è‡ªèº«çš„å±ç»„ï¼Œè€Œéå¯åŠ¨è€…æ‰€å±çš„åŸºæœ¬ç»„</p>
<ul>
<li><code>chmod g+s FILE</code></li>
<li><code>chmod g-s FILE</code></li>
</ul>
</li>
<li><p>Stickyï¼šåœ¨ä¸€ä¸ªå…¬å…±ç›®å½•ï¼Œæ¯ä¸ªç”¨æˆ·éƒ½å¯ä»¥åˆ›å»ºæ–‡ä»¶ï¼Œåˆ é™¤è‡ªå·±çš„æ–‡ä»¶ï¼Œä½†ä¸èƒ½åˆ é™¤åˆ«äººçš„æ–‡ä»¶</p>
<ul>
<li><code>chmod o+t DIR</code></li>
<li><code>chmod o-t DIR</code></li>
</ul>
</li>
<li><p>ä¹Ÿå¯ç”¨<code>111</code>ï¼ŒäºŒè¿›åˆ¶è¡¨ç¤º</p>
</li>
<li><p>FACL, Filesystem Access Control List</p>
<ul>
<li><code>setfacl OPTION FILE</code><ul>
<li><code>-m</code>ï¼Œè®¾å®š<ul>
<li><code>u:UID:perm</code></li>
<li><code>g:GID:perm</code></li>
</ul>
</li>
<li><code>-x</code>ï¼Œå–æ¶ˆè®¾å®š</li>
</ul>
</li>
<li><code>getfacl FILE</code></li>
</ul>
</li>
</ul>
<h2 id="æ–‡ä»¶ç³»ç»Ÿ"><a href="#æ–‡ä»¶ç³»ç»Ÿ" class="headerlink" title="æ–‡ä»¶ç³»ç»Ÿ"></a>æ–‡ä»¶ç³»ç»Ÿ</h2><h3 id="åˆ›å»ºè®¾å¤‡èŠ‚ç‚¹"><a href="#åˆ›å»ºè®¾å¤‡èŠ‚ç‚¹" class="headerlink" title="åˆ›å»ºè®¾å¤‡èŠ‚ç‚¹"></a>åˆ›å»ºè®¾å¤‡èŠ‚ç‚¹</h3><p><code>mknod</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">                         ä¸»è®¾å¤‡å·  æ¬¡è®¾å¤‡å·             </span><br><span class="line">crw-rw----+ 1 root video      81,   2   Aug 31 17:04 video2</span><br></pre></td></tr></table></figure>


<h3 id="æ–‡ä»¶ç³»ç»Ÿ-1"><a href="#æ–‡ä»¶ç³»ç»Ÿ-1" class="headerlink" title="æ–‡ä»¶ç³»ç»Ÿ"></a>æ–‡ä»¶ç³»ç»Ÿ</h3><p>æ–‡ä»¶ç³»ç»Ÿç±»å‹ä¼—å¤šï¼Œæ¥å£å¯èƒ½å„å¼‚ï¼Œè½¯ä»¶å¼€å‘ä¸å¯èƒ½è¦ä¸ºæ¯ç§æ–‡ä»¶ç³»ç»Ÿçš„ä¸åŒæ¥å£ç¼–å†™ä»£ç ï¼Œé‚£å°±æœ¬æœ«å€’ç½®äº†ã€‚æ‰€ä»¥ <strong>Linuxä½¿ç”¨VFS(è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ)ä½œä¸ºç¿»è¯‘å®˜</strong> ä»¥æ”¯æŒä¼—å¤šæ–‡ä»¶ç³»ç»Ÿã€‚</p>
<p>linuxå¸¸ç”¨çš„æ–‡ä»¶ç³»ç»Ÿæœ‰ext3ã€ext4ã€xfsâ€¦</p>
<p>åˆ›å»ºæ–‡ä»¶ç³»ç»Ÿï¼š<code>mkfs</code></p>
<ul>
<li>æ ¼å¼åŒ–<ul>
<li>é«˜çº§æ ¼å¼åŒ–ï¼šåˆ›å»ºæ–‡ä»¶ç³»ç»Ÿ<code>mkfs</code></li>
</ul>
</li>
</ul>
<h3 id="å†…å­˜"><a href="#å†…å­˜" class="headerlink" title="å†…å­˜"></a>å†…å­˜</h3><p>linuxä½¿ç”¨çº¿æ€§è™šæ‹Ÿå†…å­˜åšä¸­ä»‹ï¼Œä»è™šæ‹Ÿå†…å­˜æ˜ å°„åˆ°ç‰©ç†å†…å­˜ã€‚å½“ç‰©ç†å†…å­˜æ»¡æ—¶ï¼Œå°†é—²ç½®çš„ç¨‹åºå†…å­˜æ”¾åˆ°äº¤æ¢ç©ºé—´ã€‚</p>
<p>æŸ¥çœ‹å†…å­˜ä»¥åŠäº¤æ¢ç©ºé—´<code>free</code>ï¼Œé»˜è®¤å•ä½æ˜¯å­—èŠ‚ï¼Œ<code>free -m</code>ä»¥å…†ä¸ºå•ä½æ˜¾ç¤ºã€‚</p>
<ul>
<li>äº¤æ¢ç©ºé—´æ‰©å®¹<ul>
<li><ol>
<li>æ–°å»ºåˆ†åŒº</li>
</ol>
</li>
<li><ol start="2">
<li>åˆ›å»ºäº¤æ¢åˆ†åŒºæ–‡ä»¶ç³»ç»Ÿ<code>mkswap /path/dev</code></li>
</ol>
</li>
<li><ol start="3">
<li>å¯ç”¨äº¤æ¢ç©ºé—´<code>swapon /path/dev</code>ï¼Œå…³é—­äº¤æ¢åˆ†åŒº<code>swapoff /path/dev</code></li>
</ol>
</li>
</ul>
</li>
</ul>
<h3 id="ddå‘½ä»¤"><a href="#ddå‘½ä»¤" class="headerlink" title="ddå‘½ä»¤"></a>ddå‘½ä»¤</h3><p><code>man dd</code> conver and copy a fileï¼Œè½¬æ¢å¹¶å¤åˆ¶æ–‡ä»¶ã€‚å–åˆ«äºcpï¼Œcpæ˜¯ä»¥æ–‡ä»¶ä¸ºå•ä½å¤åˆ¶ï¼Œè€Œddå¤åˆ¶çš„æ˜¯åº•å±‚æ˜¯æ•°æ®æµã€‚cpå¤åˆ¶æ–‡ä»¶éœ€è¦å°†æ–‡ä»¶ä»æ–‡ä»¶ç³»ç»Ÿè¯»å–åˆ°å†…å­˜ï¼Œç„¶åå†ä»å†…å­˜å¤åˆ¶åˆ°æ–‡ä»¶ç³»ç»Ÿçš„å…¶ä»–ä½ç½®ã€‚è€Œddå¤åˆ¶ç›¸å½“äºç›´æ¥å¤åˆ¶æ–‡ä»¶çš„äºŒè¿›åˆ¶ä»£ç ã€‚</p>
<p>ddçš„å¥½å¤„æ˜¯å¯ä»¥åªå¤åˆ¶æ–‡ä»¶çš„æŸä¸€éƒ¨åˆ†ã€‚</p>
<ul>
<li><code>dd if=&lt;src&gt; of=&lt;tar&gt;</code><ul>
<li>ddå¤‡ä»½<ul>
<li><code>dd if=/dev/sda of=/mnt/usb/mdr.bak bs=512 count=1</code></li>
<li><code>dd if=/mnt/usb/mdr.bak of=/dev/sda bs=512 count=1</code></li>
<li>æ¯æ¬¡å¤åˆ¶512byteï¼Œå…±å¤åˆ¶1æ¬¡</li>
</ul>
</li>
<li>ç”¨ddåšç£ç›˜é•œåƒ<ul>
<li><code>dd if=/path/dev of=/path/xxx.iso bs=1M count=1024</code></li>
<li>è¿˜å¯ä»¥ç”¨æ¥åšç£ç›˜æ€§èƒ½æµ‹è¯•</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="fstabæ–‡ä»¶"><a href="#fstabæ–‡ä»¶" class="headerlink" title="fstabæ–‡ä»¶"></a>fstabæ–‡ä»¶</h3><p>æ–‡ä»¶ç³»ç»Ÿé…ç½®æ–‡ä»¶<code>/etc/fstab</code>æ–‡ä»¶ç³»ç»Ÿè¡¨ã€‚åˆå§‹åŒ–æ—¶ä¼šè‡ªåŠ¨æŒ‚è½½æ­¤æ–‡ä»¶ä¸­å®šä¹‰çš„æ¯ä¸ªæ–‡ä»¶ç³»ç»Ÿ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">è¦æŒ‚è½½çš„è®¾å¤‡ æŒ‚è½½ç‚¹ æ–‡ä»¶ç³»ç»Ÿç±»å‹ æŒ‚è½½é€‰é¡¹ è½¬å‚¨é¢‘ç‡ æ–‡ä»¶ç³»ç»Ÿæ£€æµ‹æ¬¡åº</span><br><span class="line">    è½¬å‚¨é¢‘ç‡ è¡¨ç¤ºå¤šé•¿æ—¶é—´(å¤©)åšæ¬¡å¤‡ä»½</span><br><span class="line">    æ–‡ä»¶ç³»ç»Ÿæ£€æµ‹æ¬¡åº åªæœ‰æ ¹å¯ä»¥ä¸º1</span><br></pre></td></tr></table></figure>


<h3 id="mountå‘½ä»¤"><a href="#mountå‘½ä»¤" class="headerlink" title="mountå‘½ä»¤"></a>mountå‘½ä»¤</h3><ul>
<li><code>mount DEVICE MOUNT_POINT</code><ul>
<li><code>-o loop</code>æŒ‚è½½æœ¬åœ°å›ç¯è®¾å¤‡ã€‚<strong>å¦‚isoé•œåƒ</strong></li>
<li><code>-a</code>æŒ‚è½½å®šä¹‰åœ¨fstabä¸­çš„æ‰€æœ‰æ–‡ä»¶ç³»ç»Ÿ </li>
</ul>
</li>
</ul>
<p>å½“<code>umount</code>busyæ—¶ï¼Œå¯ä»¥ä½¿ç”¨<code>fuser -v /mount/point</code>æŸ¥çœ‹è°åœ¨è®¿é—®ã€‚ä½¿ç”¨<code>fuser -km /mount/point</code>æ€æ­»æ‰€æœ‰è¿›ç¨‹</p>
<h3 id="æ–‡ä»¶å‹ç¼©ä¸å½’æ¡£"><a href="#æ–‡ä»¶å‹ç¼©ä¸å½’æ¡£" class="headerlink" title="æ–‡ä»¶å‹ç¼©ä¸å½’æ¡£"></a>æ–‡ä»¶å‹ç¼©ä¸å½’æ¡£</h3><p>å¯¹äºæ–‡æœ¬æ–‡ä»¶ï¼Œä¼šå‘ç°å‹ç¼©æ¯”éå¸¸æ‰“ï¼Œè¿™æ˜¯å› ä¸ºå¯¹æ–‡æœ¬æ–‡ä»¶çš„å‹ç¼©ï¼Œæ˜¯å¯¹æ–‡æœ¬è¿›è¡Œæ ‡è®°ï¼Œä»¥åè¯¥æ–‡æœ¬å†æ¬¡å‡ºç°æ—¶ï¼Œä½¿ç”¨æ ‡è®°ä»£æ›¿æ–‡æœ¬ï¼Œä»¥è¾¾åˆ°å‹ç¼©çš„ç›®çš„ã€‚ç®—æ³•ä¸åŒå‹ç¼©æ¯”ä¹Ÿå¯èƒ½ä¸åŒã€‚</p>
<ul>
<li>ç›®æµè¡Œçš„å‹ç¼©æ ¼å¼(å·¥å…·):xz(zx), bz2(bzip2), gz(gzip)ã€‚åªèƒ½å‹ç¼©æ–‡ä»¶ï¼Œä¸èƒ½å‹ç¼©ç›®å½•ã€‚é»˜è®¤è¿˜ä¼šåˆ é™¤åŸæ–‡ä»¶ã€‚<ul>
<li>gzip<ul>
<li>å‹ç¼©<code>gzip &lt;FILE&gt;</code><ul>
<li><code>-[1-9]</code>æŒ‡å®šå‹ç¼©æ¯”</li>
</ul>
</li>
<li>è§£å‹ç¼©<code>gunzip &lt;FILE&gt;</code>æˆ–<code>gzip -d &lt;FILE&gt;</code></li>
<li><code>zcat</code>åœ¨ä¸è§£å‹çš„æƒ…å†µä¸‹æŸ¥çœ‹æ–‡æœ¬æ–‡ä»¶çš„å†…å®¹</li>
</ul>
</li>
<li>bz2<ul>
<li><code>bzip2</code>å‹ç¼©ï¼Œå¯¹äºå¤§æ–‡ä»¶æ¯”gzipæœ‰æ›´å¤§å‹ç¼©æ¯”çš„å·¥å…·ï¼Œæ ¼å¼è¿‘ä¼¼</li>
<li><code>-d</code>è§£å‹ç¼©</li>
<li><code>-k</code>å‹ç¼©ä¿ç•™æºæ–‡ä»¶</li>
<li><code>bunzip2</code>è§£å‹</li>
<li><code>bzcat</code></li>
</ul>
</li>
<li>xz<ul>
<li>æ ¼å¼ç±»ä¼¼<code>man xz</code></li>
</ul>
</li>
<li>zip<ul>
<li><strong>å‹ç¼©æ¯”ä¸å¤§</strong>ï¼Œä½†å¯ä»¥å‹ç¼©ç›®å½•ï¼Œæ ¼å¼ä¹Ÿç‹¬ç‰¹</li>
<li><code>zip OUT_FILE.ZIP IN_FILE1 ...</code></li>
<li>è¿™ç§èƒ½å°†å¤šä¸ªæ–‡ä»¶æ•´åˆåœ¨ä¸€èµ·å°±å«<strong>archive(å½’æ¡£)</strong></li>
</ul>
</li>
</ul>
</li>
<li>å½’æ¡£å·¥å…·ï¼Œåªå½’æ¡£ä¸å‹ç¼©ï¼Œä½“ç§¯è¿˜ä¼šå˜å¤§<ul>
<li>tar<ul>
<li><code>-c</code>åˆ›å»ºå½’æ¡£æ–‡ä»¶</li>
<li><code>-f</code>FILE` <strong>æ“ä½œçš„æ–‡ä»¶</strong></li>
<li><code>-x</code>å±•å¼€å½’æ¡£, ä¸€èˆ¬ç”¨<code>-xf</code></li>
<li><code>--xattrs</code>å½’æ¡£æ—¶ä¿ç•™å…¶æ‰©å±•å±æ€§ä¿¡æ¯</li>
<li><code>-t</code>æŸ¥çœ‹å½’æ¡£é‡Œæœ‰å•¥</li>
</ul>
</li>
</ul>
</li>
<li>å³å½’æ¡£åˆå‹ç¼©<ul>
<li>å½“ç„¶å¯ä»¥å…ˆä½¿ç”¨tarå½’æ¡£ï¼Œå†å‹ç¼©ã€‚ä½†æ˜¯å¯ä»¥ç›´æ¥ä¸€æ­¥åˆ°ä½<ul>
<li><code>-zcf</code>å½’æ¡£ç„¶åè°ƒç”¨gzipå‹ç¼©</li>
<li><code>-zxf</code>è°ƒç”¨gzipè§£å‹ç¼©ç„¶åå±•å¼€å½’æ¡£</li>
<li><code>-jcf</code>, <code>-jxf</code>è°ƒç”¨bz2</li>
<li><code>-Jcf</code>, <code>-Jxf</code>è°ƒç”¨xz</li>
<li>å±•å¼€æ—¶ä½¿ç”¨çš„å·¥å…·å¯ä»¥çœç•¥ï¼Œå¦‚<code>-xf</code></li>
</ul>
</li>
</ul>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/12/10/Major/compuer_organization/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Travis TuRing">
      <meta itemprop="description" content="Mens et Manus">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ring's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/12/10/Major/compuer_organization/" class="post-title-link" itemprop="url">Computer Organization</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-12-10 00:00:00" itemprop="dateCreated datePublished" datetime="2019-12-10T00:00:00+08:00">2019-12-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-10-26 19:04:08" itemprop="dateModified" datetime="2020-10-26T19:04:08+08:00">2020-10-26</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><ul>
<li>ä»çº¯æ–‡æœ¬çš„ç¨‹åºåˆ°å¯æ‰§è¡Œçš„ç¼–ç ï¼Œä»¥<code>hello.c</code>ä¸ºä¾‹<ul>
<li>é¢„å¤„ç†ï¼šæŠŠå¤´æ–‡ä»¶çš„å†…å®¹ç›´æ¥æ’å…¥ç¨‹åºæ–‡æœ¬ã€‚ç»“æœå¾—åˆ°å¦ä¸€ä¸ªcç¨‹åºï¼Œé€šå¸¸ä»¥.iç»“å°¾</li>
<li>ç¼–è¯‘ï¼šç¼–è¯‘å™¨å°†æœ¬æ–‡æ–‡ä»¶hello.iç¿»è¯‘æˆæ–‡æœ¬æ–‡ä»¶hello.sï¼Œå®ƒåŒ…å«ä¸€ä¸ªæ±‡ç¼–è¯­è¨€ç¨‹åº</li>
<li>æ±‡ç¼–ï¼šæ±‡ç¼–å™¨å°†hello.sç¿»è¯‘æˆæœºå™¨æŒ‡ä»¤(ç¼–ç )ï¼ŒæŠŠè¿™äº›æŒ‡ä»¤æ‰“åŒ…æˆä¸€ç§å«åšå¯é‡å®šä½ç›®æ ‡ç¨‹åºçš„æ ¼å¼ï¼Œå¹¶å°†ç»“æœä¿å­˜åœ¨ç›®æ ‡æ–‡ä»¶hello.oä¸­(ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶)ã€‚</li>
<li>é“¾æ¥ï¼šhelloç¨‹åºå¯èƒ½ä¼šç”¨åˆ°è®¸å¤šå‡½æ•°ï¼Œå¦‚printfã€‚printfå‡½æ•°å­˜åœ¨ä¸ä¸€ä¸ªåä¸ºprintf.oçš„å•ç‹¬ç¼–è¯‘çš„ä¸ç¼–è¯‘å¥½äº†çš„ç›®æ ‡æ–‡ä»¶ä¸­ï¼Œè¿™ä¸ªæ–‡ä»¶éœ€è¦ä»¥æŸç§å½¢å¼åˆå¹¶åˆ°æˆ‘ä»¬çš„hello.oç¨‹åºä¸­ã€‚é“¾æ¥å™¨å°±è´Ÿè´£å¤„ç†è¿™ç§åˆå¹¶</li>
</ul>
</li>
</ul>
<ul>
<li>è™šæ‹Ÿå†…å­˜ï¼šè™šæ‹Ÿå†…å­˜æ˜¯ä¸€ä¸ªæŠ½è±¡æ¦‚å¿µï¼Œå®ƒä¸ºæ¯ä¸ªè¿›ç¨‹æä¾›ä¸€ä¸ªå‡è±¡ï¼Œå³æ¯ä¸ªè¿›ç¨‹éƒ½åœ¨å•ç‹¬çš„ä½¿ç”¨ä¸»å­˜ã€‚æ¯ä¸ªè¿›ç¨‹çœ‹åˆ°çš„å†…å­˜éƒ½æ˜¯ä¸€è‡´çš„ï¼Œç§°ä¸ºè™šæ‹Ÿåœ°å€ç©ºé—´</li>
<li>è™šæ‹Ÿåœ°å€ç©ºé—´çš„ç»“æ„ï¼š<ul>
<li>ç¨‹åºä»£ç å’Œæ•°æ®</li>
<li>å †ï¼šä»£ç å’Œæ•°æ®åŒºåœ¨è¿›ç¨‹ä¸€å¼€å§‹è¿è¡Œæ—¶å°±è¢«æŒ‡å®šäº†å¤§å°ï¼Œä¸æ­¤ä¸åŒï¼Œå½“è°ƒç”¨åƒmallocå’Œfreeè¿™æ ·çš„å‡½æ•°æ—¶ï¼Œå †å¯ä»¥åœ¨è¿è¡Œæ—¶åŠ¨æ€ä¼¸ç¼©</li>
<li>å…±äº«åº“ï¼šå¤§çº¦åœ¨åœ°å€ç©ºé—´çš„ä¸­é—´éƒ¨åˆ†æ˜¯ä¸€å—ç”¨æ¥å­˜æ”¾åƒCæ ‡å‡†è¿™æ ·çš„å…±äº«åº“çš„ä»£ç å’Œæ•°æ®çš„åŒºåŸŸ</li>
<li>æ ˆ</li>
<li>å†…æ ¸è™šæ‹Ÿå†…å­˜ï¼šåœ°å€ç©ºé—´çš„é¡¶éƒ¨åŒºåŸŸæ˜¯ä¸ºå†…æ ¸ä¿ç•™çš„ã€‚ä¸å…è®¸ä»»ä½•ç¨‹åºçš„è¯»å†™</li>
</ul>
</li>
</ul>
<h2 id="ç¨‹åºç»“æ„å’Œæ‰§è¡Œ"><a href="#ç¨‹åºç»“æ„å’Œæ‰§è¡Œ" class="headerlink" title="ç¨‹åºç»“æ„å’Œæ‰§è¡Œ"></a>ç¨‹åºç»“æ„å’Œæ‰§è¡Œ</h2><h3 id="æ•´æ•°è¿ç®—"><a href="#æ•´æ•°è¿ç®—" class="headerlink" title="æ•´æ•°è¿ç®—"></a>æ•´æ•°è¿ç®—</h3><h4 id="æ— ç¬¦å·åŠ æ³•"><a href="#æ— ç¬¦å·åŠ æ³•" class="headerlink" title="æ— ç¬¦å·åŠ æ³•"></a>æ— ç¬¦å·åŠ æ³•</h4><p>è€ƒè™‘ä¸¤ä¸ªéè´Ÿæ•´æ•°xå’Œyï¼Œæ»¡è¶³$0 \leq x, y&lt;2^w$ã€‚æ¯ä¸ªæ•°éƒ½èƒ½è¡¨ç¤ºä¸ºwä¸ºæ— ç¬¦å·æ•°å­—ã€‚å¦‚æœè®¡ç®—ä»–ä»¬çš„å’Œï¼Œæˆ‘ä»¬å°±æœ‰ä¸€ä¸ªå¯èƒ½çš„èŒƒå›´$0 \leq x+y \leq 2^{w+1} - 2$ï¼Œè¡¨ç¤ºè¿™ä¸ªå’Œå¯èƒ½éœ€è¦w+1ä½ã€‚å¯¹äºå›ºå®šç²¾åº¦çš„ç¼–ç¨‹è¯­è¨€ä¼šå‘ç”Ÿæº¢å‡ºã€‚</p>
<p>æˆ‘ä»¬ä¸ºxå’Œyå®šä¹‰è¿ç®—$+^u_w, å…¶ä¸­0 \leq x, y &lt; 2^w$ï¼Œè¯¥æ“ä½œæ˜¯æŠŠæ•´æ•°å’Œx+yæˆªæ–­ä¸ºwä½å¾—åˆ°çš„ç»“æœã€‚è¿™ä¹Ÿå¯ä»¥è¢«è§†ä¸ºä¸€ç§å½¢å¼çš„æ¨¡è¿ç®—ï¼Œå¯¹äºx+yçš„ä½çº§è¡¨ç¤ºï¼Œç®€å•çš„ä¸¢å¼ƒä»»ä½•æƒé‡å¤§äº$2^{w-1}$çš„ä½å°±å¯ä»¥è®¡ç®—å‡ºå’Œæ¨¡$2^w$ã€‚å¦‚è€ƒè™‘ä¸€ä¸ª4ä½æ•°å­—è¡¨ç¤º$x=12, y=9,x+y=21([10101])$å¦‚æœä¸¢æ‰æœ€é«˜ä½ï¼Œæˆ‘ä»¬çš„åˆ°[0101]ï¼Œä¹Ÿå°±æ˜¯åè¿›åˆ¶çš„5ã€‚ä¹Ÿå°±å’Œå€¼21 mod 16 = 6ä¸€è‡´ã€‚</p>
<blockquote>
<p>å®šä¹‰$+^u_w$:</p>
<p>å¯¹äºæ»¡è¶³$0 \leq x, y &lt; 2^w$çš„xå’Œyæœ‰</p>
<p>$$<br>x+^u_w y =<br>\begin{cases}<br>x+y&amp; ,{x+y&lt;2^w}&amp; æ­£å¸¸\<br>x+y-2^w&amp; ,{2^w \leq x+y &lt; 2^{w+1}}&amp; æº¢å‡º<br>\end{cases}<br>$$</p>
</blockquote>
<p>å¦‚ä½•åˆ¤æ–­æ˜¯å¦å‘ç”Ÿäº†æº¢å‡ºï¼š</p>
<ul>
<li>åŸç†ï¼šå¯¹åœ¨èŒƒå›´$0 \leq x, y \leq UMax_w$ä¸­çš„xå’Œyï¼Œä»¤$s = x +^u_w y$ã€‚åˆ™å¯¹è®¡ç®—æ˜¯ï¼Œå½“ä¸”ä»…å½“s&lt;x(æˆ–ç­‰ä»·åœ°s&lt;y)æ—¶å‘ç”Ÿæº¢å‡º</li>
<li>æ¨å¯¼ï¼šæ˜¾ç„¶$x+y \geq x$ï¼Œå› æ­¤å¦‚æœsæ²¡æœ‰æº¢å‡º$s \geq x$ã€‚å¦‚æœså‘ç”Ÿæº¢å‡ºï¼Œæœ‰$s = x+y-2^w$ï¼Œå‡è®¾$y &lt; 2^w$ï¼Œæœ‰$y-2^w &lt; 0$ï¼Œå› æ­¤$s = x+(y-2^w) &lt; x$</li>
</ul>
<h4 id="ä¹˜ä»¥å¸¸æ•°"><a href="#ä¹˜ä»¥å¸¸æ•°" class="headerlink" title="ä¹˜ä»¥å¸¸æ•°"></a>ä¹˜ä»¥å¸¸æ•°</h4><p>æ•´æ•°ä¹˜æ³•æŒ‡ä»¤ç›¸å½“æ…¢ï¼Œéœ€è¦å¤šä¸ªæ—¶é’Ÿå‘¨æœŸï¼Œç„¶è€Œå…¶ä»–çš„æ•´æ•°è¿ç®—(å¦‚åŠ æ³•ã€å‡æ³•ã€ä½ç§»)ä¹‹éœ€è¦1ä¸ªæ—¶é’Ÿå‘¨æœŸã€‚å› æ­¤ç¼–è¯‘å™¨ä½¿ç”¨äº†ä¸€é¡¹é‡è¦çš„ä¼˜åŒ–ï¼šè¯•ç€ç”¨ç§»ä½å’ŒåŠ æ³•è¿ç®—çš„ç»„åˆæ¥ä»£æ›¿ä¹˜ä»¥å¸¸æ•°å› å­çš„ä¹˜æ³•ã€‚</p>
<p>å¦‚$x \times 14$ï¼Œ$14=2^3+2^2+2^1$ï¼Œç¼–è¯‘å™¨å°†ä¹˜æ³•é‡å†™ä¸º(x&lt;&lt;3)+(x&lt;&lt;2)+(x&lt;&lt;1)ï¼Œå°†ä¸€ä¸ªä¹˜æ³•ä»£æ›¿ä¸º3ä¸ªç§»ä½å’Œ2ä¸ªåŠ æ³•ã€‚ç”šè‡³è¿˜å¯ä»¥$14=2^4-2^1$ã€‚</p>
<p>åˆ°è¿™é‡Œï¼Œæ— ç¬¦å·æ•°å’Œè¡¥ç çš„ç»“æœè¿˜æ˜¯ç›¸åŒçš„</p>
<h4 id="é™¤ä»¥2çš„å¹‚"><a href="#é™¤ä»¥2çš„å¹‚" class="headerlink" title="é™¤ä»¥2çš„å¹‚"></a>é™¤ä»¥2çš„å¹‚</h4><p>åœ¨å¤§å¤šæ•°æœºå™¨ä¸Šï¼Œæ•´æ•°é™¤æ³•è¦æ¯”æ•´æ•°ä¹˜æ³•æ›´æ…¢ï¼šéœ€è¦30ä¸ªæˆ–è€…æ›´å¤šçš„æ—¶é’Ÿå‘¨æœŸã€‚é™¤ä»¥2çš„å¹‚ä¹Ÿå¯ä»¥é€šè¿‡ç”¨ç§»ä½(å·¦ç§»)è¿ç®—æ¥å®ç°ã€‚</p>
<p>æ— ç¬¦å·å’Œè¡¥ç æ•°åˆ†åˆ«ä½¿ç”¨é€»è¾‘ç§»ä½å’Œç®—æ•°ç§»ä½æ¥è¾¾åˆ°ç›®çš„ï¼š</p>
<ul>
<li>é€»è¾‘ç§»ä½<ul>
<li>ç§»å‡ºçš„ç©ºä½ç”¨0è¡¥ä¸Š</li>
</ul>
</li>
<li>ç®—æœ¯ç§»ä½<ul>
<li>å¯¹äºæ— ç¬¦å·å‹ï¼Œç®—æœ¯ç§»ä½ç­‰åŒäºé€»è¾‘ç§»ä½</li>
<li>å¯¹äºæœ‰ç¬¦å·å‹ï¼Œç®—æ•°å·¦ç§»ç­‰åŒäºé€»è¾‘å·¦ç§»ï¼Œç®—æ•°å³ç§»è¡¥çš„æ˜¯ç¬¦å·ä½</li>
</ul>
</li>
</ul>
<blockquote>
<p>å®šä¹‰$\lfloor a \rfloor$ä¸ºå‘ä¸‹èˆå…¥ï¼Œ$\lceil a \rceil$ä¸ºå‘ä¸Šèˆå…¥ã€‚</p>
</blockquote>
<p>å¯¹äº$x \geq 0$å’Œ$y&gt;0$ï¼Œç»“æœä¼šæ˜¯$\lfloor x/y \rfloor$ï¼Œå¯¹äº$x&lt;0$å’Œ$y&gt;0$ï¼Œç»“æœä¼šæ˜¯$\lceil x/y \rceil$ã€‚ä¹Ÿå°±æ˜¯è¯´è¦å‘ä¸‹èˆå…¥ä¸€ä¸ªæ­£å€¼ï¼Œè€Œå‘ä¸Šèˆå…¥ä¸€ä¸ªè´Ÿå€¼ã€‚</p>
<ul>
<li>é™¤ä»¥2çš„å¹‚çš„æ— ç¬¦å·æ•°é™¤æ³•<ul>
<li>å¾ˆç®€å•ï¼Œå°±ç›´æ¥å³ç§»ï¼Œäº§ç”Ÿ$\lfloor x/2^k \rfloor$</li>
</ul>
</li>
<li>é™¤ä»¥2çš„å¹‚çš„è¡¥ç ï¼Œæ­£å€¼æƒ…å†µï¼Œå‘ä¸‹èˆå…¥<ul>
<li>ä¹Ÿæ˜¯ç›´æ¥å³ç§»ï¼Œç›´æ¥å³ç§»çš„ç»“æœæ˜¯å‘ä¸‹èˆå…¥çš„</li>
</ul>
</li>
<li>é™¤ä»¥2çš„å¹‚çš„è¡¥ç ï¼Œè´Ÿå€¼æƒ…å†µï¼Œå‘ä¸Šèˆå…¥<ul>
<li>ä¸èƒ½ç›´æ¥å³ç§»ï¼Œå› ä¸ºç›´æ¥å³ç§»å¯¼è‡´ç»“æœå‘ä¸‹èˆå…¥ï¼Œè€Œæˆ‘ä»¬éœ€è¦å‘ä¸Šèˆå…¥</li>
<li>æ‰§è¡Œç®—æ•°å³ç§»å‰è¦åŠ ä¸Šä¸€ä¸ªé€‚å½“çš„åæ‰§é‡æ‰èƒ½ä½¿å¾—ç»“æœæ­£ç¡®èˆå…¥</li>
<li>è¡¨è¾¾å¼ï¼š(x+(1&lt;&lt;k)-1)&gt;&gt;käº§ç”Ÿæ•°å€¼$\lceil x/2^k \rceil$</li>
<li>åç½®æŠ€æœ¯åˆ©ç”¨å¦‚ä¸‹å±æ€§ï¼šå¯¹äºæ•´æ•°xå’Œy(y&gt;0)ï¼Œ$\lceil x/y \rceil=\lfloor (x+y-1)/y \rfloor$ã€‚è¿™æ ·å°±å¯ä»¥é€šè¿‡é€»è¾‘ç§»ä½æ¥çš„åˆ°å‘ä¸Šå–æ•´çš„ç»“æœäº†</li>
<li><strong>æ¨å¯¼:</strong> $\lceil x/y \rceil=\lfloor (x+y-1)/y \rfloor$ï¼Œè®¾$x = qy+r$ï¼Œå…¶ä¸­$0 \leq r &lt; y$ï¼Œå¾—åˆ°(x+y-1)/y=q+(r+y-1)ï¼Œå› æ­¤$\lfloor (x+y-1)/y \rfloor = q + \lfloor (r+y-1)/y \rfloor$ã€‚å½“r=0æ—¶ï¼Œåé¢ä¸€é¡¹ç­‰äº0ï¼Œå½“r&gt;0æ—¶ï¼Œç­‰äº1ã€‚çº§é€šè¿‡ç»™xå¢åŠ ä¸€ä¸ªåç§»é‡y-1,ç„¶åå†å°†é™¤æ³•å‘ä¸‹èˆå…¥ï¼Œå½“yæ•´é™¤xæ—¶ï¼Œæˆ‘ä»¬å¾—åˆ°qï¼Œå¦åˆ™ï¼Œå¾—åˆ°q+1ã€‚</li>
</ul>
</li>
</ul>
<h3 id="æµ®ç‚¹æ•°"><a href="#æµ®ç‚¹æ•°" class="headerlink" title="æµ®ç‚¹æ•°"></a>æµ®ç‚¹æ•°</h3><h4 id="IEEEæµ®ç‚¹æ•°è¡¨ç¤º"><a href="#IEEEæµ®ç‚¹æ•°è¡¨ç¤º" class="headerlink" title="IEEEæµ®ç‚¹æ•°è¡¨ç¤º"></a>IEEEæµ®ç‚¹æ•°è¡¨ç¤º</h4><p>å®šç‚¹è¡¨ç¤ºæ³•ä¸èƒ½å¾ˆæœ‰æ•ˆåœ°è¡¨ç¤ºéå¸¸å¤§çš„æ•°å­—ã€‚æˆ‘ä»¬å¸Œæœ›é€šè¿‡ç»™å®šxå’Œyçš„å€¼ï¼Œæ¥è¡¨ç¤ºå½¢å¦‚$x \times 2^y$çš„æ•°ã€‚</p>
<blockquote>
<p>IEEEæµ®ç‚¹æ•°æ ‡å‡†ç”¨$V = (-1)^s \times M \times 2^E$çš„å½¢å¼æ¥è¡¨ç¤ºä¸€ä¸ªæ•°ï¼š</p>
<ul>
<li>ç¬¦å·(sign)<ul>
<li>så†³å®šæ˜¯è´Ÿæ•°(s=1)è¿˜æ˜¯æ­£æ•°</li>
</ul>
</li>
<li>å°¾æ•°(significand) M<ul>
<li>Mæ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶å°æ•°ï¼Œå®ƒçš„å–å€¼èŒƒå›´æ˜¯<code>[1, 2)</code>æˆ–<code>[0, 1)</code></li>
<li>æœ‰nä½å°æ•°å­—æ®µ$frac=f_{n-1}â€¦f_0$ç¼–ç å°¾æ•°Mï¼Œä½†ç¼–ç å‡ºæ¥çš„å€¼ä¹Ÿä¾èµ–äºé˜¶ç å­—æ®µæ˜¯å¦ç­‰äº0(è§„æ ¼åŒ–çš„å’Œéè§„æ ¼åŒ–çš„)</li>
</ul>
</li>
<li>é˜¶ç (exponent) E<ul>
<li>Eçš„ä½œç”¨æ˜¯å¯¹æµ®ç‚¹æ•°åŠ æƒï¼Œè¿™ä¸ªæƒé‡æ˜¯2çš„Eæ¬¡å¹‚</li>
<li>ç”±kä½çš„é˜¶ç å­—æ®µç»„æˆ$exp=e_{k-1}â€¦f_0$æ¥ç¼–ç é˜¶ç E</li>
</ul>
</li>
</ul>
</blockquote>
<ul>
<li>ä»¥ä¸‹æ˜¯ä¸¤ç§å¸¸è§çš„æ ¼å¼ï¼šå•ç²¾åº¦å’ŒåŒç²¾åº¦<ul>
<li>å•ç²¾åº¦:sã€expã€fracå­—æ®µåˆ†åˆ«ä¸º1ä½ã€k=8ä½å’Œn=23ä½ï¼Œå¾—åˆ°ä¸€ä¸ª32ä½çš„è¡¨ç¤º</li>
<li>åŒç²¾åº¦:sã€expã€fracå­—æ®µåˆ†åˆ«ä¸º1ä½ã€k=11ä½å’Œn=52ä½ï¼Œå¾—åˆ°ä¸€ä¸ª64ä½çš„è¡¨ç¤º</li>
</ul>
</li>
<li>ç»™å®šä½çš„è¡¨ç¤ºï¼Œæ ¹æ®expçš„å€¼ï¼Œè¢«ç¼–ç çš„å€¼å¯ä»¥åˆ†æˆä¸‰ç§ä¸åŒçš„æƒ…å†µ(æœ€åä¸€ç§æƒ…å†µæœ‰ä¸¤ç§å˜ç§)<ul>
<li>è§„æ ¼åŒ–çš„<ul>
<li>expå­—æ®µæ—¢ä¸å…¨ä¸º0ä¹Ÿä¸å…¨ä¸º1</li>
<li>é˜¶ç çš„å€¼E=e-Biasï¼Œeæ˜¯æ— ç¬¦å·æ•°ï¼Œè€Œ$Bias=2^{k-1}-1$çš„åç½®å€¼</li>
<li>å°¾æ•°M=1+fï¼Œfæ˜¯fracå­—æ®µæè¿°çš„å°æ•°å€¼$0 \leq f &lt; 1$</li>
</ul>
</li>
<li>éè§„æ ¼åŒ–çš„å€¼<ul>
<li>expå­—æ®µå…¨ä¸º0æ—¶</li>
<li>é˜¶ç E=1-Bias</li>
<li>å°¾æ•°M=f</li>
<li>æ³¨æ„å’Œè§„æ ¼åŒ–çš„åŒºåˆ«</li>
</ul>
</li>
<li>ç‰¹æ®Šå€¼<ul>
<li>å½“expå…¨ä¸º1ï¼Œfracå­—æ®µå…¨ä¸º0æ—¶ï¼Œå¾—åˆ°çš„å€¼è¡¨ç¤ºæ— ç©·</li>
<li>å½“expå…¨ä¸º1ï¼Œfracå­—æ®µä¸å…¨ä¸º0æ—¶ï¼Œå¾—åˆ°çš„å€¼è¡¨ç¤ºNaN(Not a Number)</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>ç¤ºä¾‹ï¼šå‡å®šç”¨6ä½æ ¼å¼è¡¨ç¤ºï¼Œk=3çš„é˜¶ç ä½å’Œn=2çš„å°¾æ•°ä½ï¼Œå¦‚ä¸‹</p>
<table>
<thead>
<tr>
<th>æè¿°</th>
<th>ä½è¡¨ç¤º</th>
<th>e</th>
<th>E</th>
<th>$2^E$</th>
<th>f</th>
<th>M</th>
<th>$2^E \times M$</th>
<th>V</th>
<th>åè¿›åˆ¶</th>
<th>å…¬å¼</th>
</tr>
</thead>
<tbody><tr>
<td>0</td>
<td>0 0000 000</td>
<td>0</td>
<td>-6</td>
<td>$\frac1{64}$</td>
<td>$\frac08$</td>
<td>$\frac08$</td>
<td>$\frac0{512}$</td>
<td>0</td>
<td>0.0</td>
<td>E=1-Bias</td>
</tr>
<tr>
<td>æœ€å°éè§„æ ¼åŒ–æ•°</td>
<td>0 0000 001</td>
<td>0</td>
<td>-6</td>
<td>$\frac1{64}$</td>
<td>$\frac18$</td>
<td>$\frac18$</td>
<td>$\frac1{512}$</td>
<td>$\frac1{512}$</td>
<td>0.001953</td>
<td>M=f</td>
</tr>
<tr>
<td></td>
<td>0 0000 010</td>
<td>0</td>
<td>-6</td>
<td>$\frac1{64}$</td>
<td>$\frac28$</td>
<td>$\frac38$</td>
<td>$\frac2{512}$</td>
<td>$\frac1{256}$</td>
<td>0.003906</td>
<td></td>
</tr>
<tr>
<td>â€¦</td>
<td>â€¦</td>
<td>â€¦</td>
<td>..</td>
<td>â€¦</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>æœ€å¤§éè§„æ ¼åŒ–æ•°</td>
<td>0 0000 111</td>
<td>0</td>
<td>-6</td>
<td>$\frac1{64}$</td>
<td>$\frac78$</td>
<td>$\frac78$</td>
<td>$\frac7{512}$</td>
<td>$\frac7{512}$</td>
<td>0.013672</td>
<td></td>
</tr>
<tr>
<td>â€”â€”â€“</td>
<td>â€”â€”</td>
<td>â€“</td>
<td>â€“</td>
<td>â€”</td>
<td>â€”-</td>
<td>â€”-</td>
<td>â€”â€”</td>
<td>â€”â€“</td>
<td>â€”â€“</td>
<td></td>
</tr>
<tr>
<td>æœ€å°è§„æ ¼åŒ–æ•°</td>
<td>0 0001 000</td>
<td>1</td>
<td>-6</td>
<td>$\frac1{64}$</td>
<td>$\frac08$</td>
<td>$\frac88$</td>
<td>$\frac8{512}$</td>
<td>$\frac1{64}$</td>
<td>0.015625</td>
<td>E=e-Bias</td>
</tr>
<tr>
<td></td>
<td>0 0001 001</td>
<td>1</td>
<td>-6</td>
<td>$\frac1{64}$</td>
<td>$\frac18$</td>
<td>$\frac98$</td>
<td>$\frac9{512}$</td>
<td>$\frac9{256}$</td>
<td>0.017578</td>
<td>M=1+f</td>
</tr>
<tr>
<td>â€¦</td>
<td>â€¦</td>
<td>â€¦</td>
<td>..</td>
<td>â€¦</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td>0 1110 110</td>
<td>14</td>
<td>7</td>
<td>128</td>
<td>$\frac68$</td>
<td>$\frac{14}8$</td>
<td>$\frac{1792}8$</td>
<td>224</td>
<td>224</td>
<td></td>
</tr>
<tr>
<td>æœ€å¤§è§„æ ¼åŒ–æ•°</td>
<td>0 1110 111</td>
<td>14</td>
<td>7</td>
<td>128</td>
<td>$\frac78$</td>
<td>$\frac{15}8$</td>
<td>$\frac{1920}8$</td>
<td>240</td>
<td>240</td>
<td></td>
</tr>
<tr>
<td>â€”â€”â€“</td>
<td>â€”â€”</td>
<td>â€“</td>
<td>â€“</td>
<td>â€”</td>
<td>â€”-</td>
<td>â€”-</td>
<td>â€”â€”</td>
<td>â€”â€“</td>
<td>â€”â€“</td>
<td></td>
</tr>
<tr>
<td>æ— ç©·å¤§</td>
<td>0 1111 000</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>æ— ç©·</td>
<td>-</td>
<td></td>
</tr>
</tbody></table>
<h2 id="ç¨‹åºçš„æœºå™¨çº§è¡¨ç¤º"><a href="#ç¨‹åºçš„æœºå™¨çº§è¡¨ç¤º" class="headerlink" title="ç¨‹åºçš„æœºå™¨çº§è¡¨ç¤º"></a>ç¨‹åºçš„æœºå™¨çº§è¡¨ç¤º</h2><h3 id="æ•°æ®æ ¼å¼"><a href="#æ•°æ®æ ¼å¼" class="headerlink" title="æ•°æ®æ ¼å¼"></a>æ•°æ®æ ¼å¼</h3><table>
<thead>
<tr>
<th>Cå£°æ˜</th>
<th>Intelæ•°æ®ç±»å‹</th>
<th>æ±‡ç¼–ä»£ç åç¼€</th>
<th>å¤§å°(å­—èŠ‚)</th>
</tr>
</thead>
<tbody><tr>
<td>char</td>
<td>å­—èŠ‚</td>
<td>b</td>
<td>1</td>
</tr>
<tr>
<td>short</td>
<td>å­—</td>
<td>w</td>
<td>2</td>
</tr>
<tr>
<td>int</td>
<td>åŒå­—</td>
<td>l</td>
<td>4</td>
</tr>
<tr>
<td>long</td>
<td>å››å­—</td>
<td>q</td>
<td>8</td>
</tr>
<tr>
<td>char*</td>
<td>å››å­—</td>
<td>q</td>
<td>8</td>
</tr>
<tr>
<td>float</td>
<td>å•ç²¾åº¦</td>
<td>s</td>
<td>4</td>
</tr>
<tr>
<td>double</td>
<td>åŒç²¾åº¦</td>
<td>l</td>
<td>8</td>
</tr>
</tbody></table>
<h3 id="è®¿é—®ä¿¡æ¯"><a href="#è®¿é—®ä¿¡æ¯" class="headerlink" title="è®¿é—®ä¿¡æ¯"></a>è®¿é—®ä¿¡æ¯</h3><p>ä¸€ä¸ªx86-64çš„CPUåŒ…å«ä¸€ç»„16ä¸ªå‚¨å­˜64ä½å€¼çš„é€šç”¨ç›®çš„å¯„å­˜å™¨ã€‚æ¯ä¸ªå¯„å­˜å™¨éƒ½æœ‰ç‰¹æ®Šçš„ç”¨é€”ï¼Œå®ƒä»¬çš„åå­—å°±åæ˜ äº†è¿™äº›ç”¨é€”ã€‚</p>
<table>
<thead>
<tr>
<th>64å¯„å­˜å™¨</th>
<th>32ä½å¯„å­˜å™¨</th>
<th>16ä½å¯„å­˜å™¨</th>
<th>8ä½å¯„å­˜å™¨</th>
<th>ç”¨é€”</th>
</tr>
</thead>
<tbody><tr>
<td>%rax</td>
<td>%eax</td>
<td>%ax</td>
<td>%ax</td>
<td>è¿”å›å€¼</td>
</tr>
<tr>
<td>%rbx</td>
<td>%ebx</td>
<td>%bx</td>
<td>%bl</td>
<td>è¢«è°ƒç”¨è€…ä¿å­˜</td>
</tr>
<tr>
<td>%rcx</td>
<td>%ecx</td>
<td>%cx</td>
<td>%cl</td>
<td>ç¬¬4ä¸ªå‚æ•°</td>
</tr>
<tr>
<td>%rdx</td>
<td>%edx</td>
<td>%dx</td>
<td>%dl</td>
<td>ç¬¬3ä¸ªå‚æ•°</td>
</tr>
<tr>
<td>%rsi</td>
<td>%esi</td>
<td>%si</td>
<td>%sil</td>
<td>ç¬¬2ä¸ªå‚æ•°</td>
</tr>
<tr>
<td>%rdi</td>
<td>%edi</td>
<td>%di</td>
<td>%dil</td>
<td>ç¬¬1ä¸ªå‚æ•°</td>
</tr>
<tr>
<td>%rbp</td>
<td>%ebp</td>
<td>%bp</td>
<td>%bpl</td>
<td>è¢«è°ƒç”¨è€…ä¿å­˜</td>
</tr>
<tr>
<td>%rsp</td>
<td>%esp</td>
<td>%sp</td>
<td>%spl</td>
<td>æ ˆæŒ‡é’ˆ</td>
</tr>
<tr>
<td>%r8</td>
<td>%r8d</td>
<td>%r8w</td>
<td>%r8b</td>
<td>ç¬¬5ä¸ªå‚æ•°</td>
</tr>
<tr>
<td>%r9</td>
<td>%r9d</td>
<td>%r9w</td>
<td>%r9b</td>
<td>ç¬¬6ä¸ªå‚æ•°</td>
</tr>
<tr>
<td>%r10</td>
<td>%r10d</td>
<td>%r10w</td>
<td>%r10b</td>
<td>è°ƒç”¨è€…ä¿å­˜</td>
</tr>
<tr>
<td>%r11</td>
<td>%r11d</td>
<td>%r11w</td>
<td>%r11b</td>
<td>è°ƒç”¨è€…ä¿å­˜</td>
</tr>
<tr>
<td>%r12</td>
<td>%r12d</td>
<td>%r12w</td>
<td>%r12b</td>
<td>è¢«è°ƒç”¨è€…ä¿å­˜</td>
</tr>
<tr>
<td>%r13</td>
<td>%r13d</td>
<td>%r13w</td>
<td>%r13b</td>
<td>è¢«è°ƒç”¨è€…ä¿å­˜</td>
</tr>
<tr>
<td>%r14</td>
<td>%r14d</td>
<td>%r14w</td>
<td>%r14b</td>
<td>è¢«è°ƒç”¨è€…ä¿å­˜</td>
</tr>
<tr>
<td>%r15</td>
<td>%r15d</td>
<td>%r15w</td>
<td>%r15b</td>
<td>è¢«è°ƒç”¨è€…ä¿å­˜</td>
</tr>
</tbody></table>
<p>æŒ‡ä»¤å¯ä»¥å¯¹è¿™16ä¸ªå¯„å­˜å™¨çš„ä½ä½å­—èŠ‚ä¸­å­˜æ”¾çš„ä¸åŒå¤§å°çš„æ•°æ®è¿›è¡Œæ“ä½œã€‚</p>
<table>
<thead>
<tr>
<th>æŒ‡ä»¤</th>
<th>åŠŸèƒ½</th>
</tr>
</thead>
<tbody><tr>
<td>*AX</td>
<td>ç´¯åŠ å™¨Accumulator</td>
</tr>
<tr>
<td>*BX</td>
<td>åŸºåœ°å€å¯„å­˜å™¨Base Register</td>
</tr>
<tr>
<td>*CX</td>
<td>è®¡æ•°å¯„å­˜å™¨Count Register</td>
</tr>
<tr>
<td>*DX</td>
<td>æ•°æ®å¯„å­˜å™¨Data Register</td>
</tr>
<tr>
<td>*BP</td>
<td>å †æ ˆåŸºæŒ‡é’ˆBase Pointer</td>
</tr>
<tr>
<td>*SI/*DI</td>
<td>å˜å€å¯„å­˜å™¨Index Register</td>
</tr>
<tr>
<td>*SP</td>
<td>å †æ ˆé¡¶æŒ‡é’ˆStack Pointer</td>
</tr>
<tr>
<td>*S</td>
<td>æ®µå¯„å­˜å™¨Segement Register</td>
</tr>
</tbody></table>
<h2 id="MIPSä½“ç³»ç»“æ„"><a href="#MIPSä½“ç³»ç»“æ„" class="headerlink" title="MIPSä½“ç³»ç»“æ„"></a>MIPSä½“ç³»ç»“æ„</h2><p>Microprocessor without Interlocked Piped Stageï¼Œæµæ°´çº¿ä¸ä¼šäº’é”çš„å¤„ç†å™¨ã€‚é¿å…ä¸åŒæŒ‡ä»¤é—´çš„ç›¸äº’å½±å“ã€‚å¦‚x86æŒ‡ä»¤çš„æ ‡å¿—å¯„å­˜å™¨ï¼Œå‰ä¸€æ¡æŒ‡ä»¤ä½œå‡ºçš„æ”¹åŠ¨ä¼šå¯¹åé¢çš„äº§ç”Ÿå½±å“ï¼Œè¿™MIPSæ‰€è¦é¿å…çš„ã€‚</p>
<ul>
<li>å®ƒçš„ä¸»è¦å…³æ³¨ç‚¹<ul>
<li>å‡å°‘æŒ‡ä»¤ç±»å‹</li>
<li>é™ä½æŒ‡ä»¤å¤æ‚åº¦</li>
</ul>
</li>
<li>åŸºæœ¬åŸåˆ™æ˜¯ç”¨éå¸¸ç®€å•çš„CPUè§£å†³éå¸¸å¤æ‚çš„ç³»ç»Ÿ<ul>
<li>è¶Šç®€å•çš„CPUè¶Šå¿«</li>
</ul>
</li>
<li>MIPSç‰¹ç‚¹<ul>
<li>å›ºå®šæŒ‡ä»¤é•¿åº¦(32bit)<ul>
<li>ç®€åŒ–äº†ä»å­˜å‚¨å™¨å–æŒ‡ä»¤</li>
</ul>
</li>
<li>ç®€å•çš„å¯»å€æ¨¡å¼<ul>
<li>ç®€åŒ–äº†ä»å­˜å‚¨å™¨å–æ“ä½œæ•°</li>
</ul>
</li>
<li>æŒ‡ä»¤æ•°é‡å°‘ï¼ŒåŠŸèƒ½ç®€å•<ul>
<li>ä¸€æ¡æŒ‡ä»¤ä¹‹å®Œæˆä¸€ä¸ªæ“ä½œ</li>
<li>ç®€åŒ–æŒ‡ä»¤çš„æ‰§è¡Œè¿‡ç¨‹</li>
</ul>
</li>
<li>åªå…è®¸Loadå’ŒStoreæŒ‡ä»¤è®¿é—®å­˜å‚¨å™¨</li>
<li>MIPSè¿™äº›ç‰¹ç‚¹è®©ä½¿ç”¨MIPSè¿›è¡Œç¼–ç¨‹å˜å¾—å›°éš¾</li>
</ul>
</li>
</ul>
<h3 id="åŸºæœ¬æŒ‡ä»¤"><a href="#åŸºæœ¬æŒ‡ä»¤" class="headerlink" title="åŸºæœ¬æŒ‡ä»¤"></a>åŸºæœ¬æŒ‡ä»¤</h3><ul>
<li>æ ¼å¼ï¼š<code>OPT a, b, c</code><ul>
<li>å¦‚<code>add a, b, c</code>å°†bå’Œcæ±‚å’Œï¼Œç»“æœå­˜å¦‚aä¸­</li>
<li>å¦‚æ­¤è¿˜æœ‰<ul>
<li><code>sub a, b, c</code></li>
<li><code>mul a, b, c</code></li>
<li><code>div a, b, c</code></li>
<li><code>and a, b, c</code></li>
<li><code>or a, b, c</code></li>
<li><code>sll a, b, c</code>ï¼Œå·¦ç§»</li>
<li><code>srl a, b, c</code>ï¼Œå³ç§»</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>æŒ‡ä»¤é«˜åº¦ç»Ÿä¸€ï¼Œè€Œä¸”æ“ä½œæ•°éƒ½ä¸å¯æ˜¯å­˜å‚¨å™¨æ“ä½œæ•°ï¼Œè¦ä½¿ç”¨å­˜å‚¨å™¨å°±å¿…é¡»ä½¿ç”¨ä¸“é—¨çš„è®¿å­˜æŒ‡ä»¤ã€‚</p>
<ul>
<li><code>lw $a, $b</code>, load wordï¼Œè¯»å–å¯„å­˜å™¨bçš„å­—(32bit)ï¼Œæ”¾å…¥aä¸­<ul>
<li>MIPSçš„å¯„å­˜å™¨ç¼–å·ç”¨<code>$</code>ç¬¦è¿›è¡Œæ ‡è®°</li>
</ul>
</li>
<li><code>sw $a, $b</code>, store wordï¼Œå°†å¯„å­˜å™¨açš„å­—(32bit)ï¼Œå­˜åˆ°bä¸­</li>
</ul>
<p>MIPSæœ‰32ä¸ªé€šç”¨å¯„å­˜å™¨ï¼Œç¼–å·ä»0åˆ°31ï¼Œå¯ä»¥å®ç”¨<code>$</code>åŠ ç¼–å·è¿›è¡ŒæŒ‡ç¤ºï¼Œä¹Ÿå¯ä½¿ç”¨ä»–ä»¬çš„åç§°(æ¯ä¸ªå¯„å­˜å™¨éƒ½å¦æœ‰ä¸€ä¸ªåç§°ï¼Œå¹¶çº¦å®šäº†ç‰¹å®šçš„ç”¨é€”)</p>
<h3 id="æŒ‡ä»¤çš„åŸºæœ¬æ ¼å¼"><a href="#æŒ‡ä»¤çš„åŸºæœ¬æ ¼å¼" class="headerlink" title="æŒ‡ä»¤çš„åŸºæœ¬æ ¼å¼"></a>æŒ‡ä»¤çš„åŸºæœ¬æ ¼å¼</h3><p>MIPSçš„æŒ‡ä»¤éå¸¸çš„ç²¾ç®€</p>
<ul>
<li>æŒ‰ç…§åŠŸèƒ½åˆ’åˆ†<ul>
<li>è¿ç®—æŒ‡ä»¤</li>
<li>è®¿å­˜æŒ‡ä»¤</li>
<li>åˆ†æ”¯æŒ‡ä»¤</li>
</ul>
</li>
<li>ä»æŒ‡ä»¤çš„æ ¼å¼åˆ’åˆ†<ul>
<li>Rï¼šRegisterï¼Œå¯„å­˜å™¨</li>
<li>Iï¼šImmediateï¼Œç«‹å³æ•°</li>
<li>Jï¼šJumpï¼Œè½¬ç§»</li>
</ul>
</li>
</ul>
<h4 id="Rå‹"><a href="#Rå‹" class="headerlink" title="Rå‹"></a>Rå‹</h4><table>
<thead>
<tr>
<th>R</th>
<th>opcode</th>
<th>rs</th>
<th>rt</th>
<th>rd</th>
<th>shamt</th>
<th>funct</th>
</tr>
</thead>
<tbody><tr>
<td>å¤§å°(bit)</td>
<td>6</td>
<td>5</td>
<td>5</td>
<td>5</td>
<td>5</td>
<td>6</td>
</tr>
<tr>
<td>ä½ç½®</td>
<td>31~26</td>
<td>25~21</td>
<td>20~16</td>
<td>15~11</td>
<td>10~6</td>
<td>5~0</td>
</tr>
</tbody></table>
<ul>
<li><p>Rå‹æŒ‡ä»¤çš„æ ¼å¼</p>
<ul>
<li>opcodeåŸŸæŒ‡å®šæŒ‡ä»¤çš„ç±»å‹ï¼Œå¯¹äºRå‹æŒ‡ä»¤å‡ä¸º0</li>
<li>functæ¥ç²¾ç¡®æŒ‡å®šæŒ‡ä»¤çš„ç±»å‹</li>
<li>rsï¼šSource Registerï¼Œé€šå¸¸æŒ‡å®šç¬¬ä¸€ä¸ªæºæ“ä½œæ•°æ‰€åœ¨å¯„å­˜å™¨ç¼–å·</li>
<li>rtï¼šTarget Registerï¼Œé€šå¸¸æŒ‡å®šç¬¬äºŒä¸ªæºæ“ä½œæ•°æ‰€åœ¨å¯„å­˜å™¨ç¼–å·</li>
<li>rdï¼šDestination Registerï¼Œé€šå¸¸æŒ‡å®šç›®çš„æ“ä½œæ•°æ‰€åœ¨å¯„å­˜å™¨ç¼–å·</li>
<li>shamtç”¨äºæŒ‡å®šç§»ä½æŒ‡ä»¤è¿›è¡Œæ“ä½œæ•°çš„ä½æ•°ï¼Œå¯¹äºéç§»ä½æŒ‡ä»¤ä¸º0</li>
</ul>
</li>
<li><p>é€šè¿‡æŒ‡ä»¤å¾—åˆ°ç¼–ç ï¼Œå¦‚<code>add $8, $9, $10</code></p>
<ul>
<li>æŸ¥MIPSçš„æŒ‡ä»¤ç¼–ç è¡¨ï¼šå¯¹äºaddï¼Œopcode=0, funct=32, shamt=0</li>
<li>åˆ†ææŒ‡ä»¤æ“ä½œæ•°ï¼šrd=8, rs=9, rt=10</li>
<li>æŠŠå¯¹åº”çš„å€¼è½¬åŒ–ä¸ºäºŒè¿›åˆ¶æ•°å³å¯å¾—åˆ°ç¼–ç </li>
</ul>
</li>
</ul>
<h4 id="Iå‹"><a href="#Iå‹" class="headerlink" title="Iå‹"></a>Iå‹</h4><p>å¦‚æœåªç”¨5bitæ¥è¡¨ç¤ºç«‹å³æ•°ï¼Œæ˜¾ç„¶ä¸å¤Ÿç”¨ï¼Œæ‰€ä»¥å¯¹äºIå‹æŒ‡ä»¤éœ€è¦æ–°çš„æ ¼å¼</p>
<table>
<thead>
<tr>
<th>I</th>
<th>opcode</th>
<th>rs</th>
<th>rt</th>
<th>immediate</th>
</tr>
</thead>
<tbody><tr>
<td>å¤§å°(bit)</td>
<td>6</td>
<td>5</td>
<td>5</td>
<td>16</td>
</tr>
<tr>
<td>ä½ç½®</td>
<td>31~26</td>
<td>25~21</td>
<td>20~16</td>
<td>15~0</td>
</tr>
</tbody></table>
<ul>
<li><p>Iå‹æŒ‡ä»¤çš„æ ¼å¼</p>
<ul>
<li>opcodeåŸŸæŒ‡å®šæŒ‡ä»¤çš„ç±»å‹ï¼Œæ²¡æœ‰funct</li>
<li>functæ¥ç²¾ç¡®æŒ‡å®šæŒ‡ä»¤çš„ç±»å‹</li>
<li>rsï¼šSource Registerï¼Œé€šå¸¸æŒ‡å®šç¬¬ä¸€ä¸ªæºæ“ä½œæ•°æ‰€åœ¨å¯„å­˜å™¨ç¼–å·</li>
<li>rtï¼šTarget Registerï¼Œé€šå¸¸æŒ‡å®šç¬¬äºŒä¸ªæºæ“ä½œæ•°æ‰€åœ¨å¯„å­˜å™¨ç¼–å·</li>
<li>immediateå¯ä»¥å­˜æ”¾16ä½çš„ç«‹å³æ•°</li>
</ul>
</li>
<li><p>é€šè¿‡æŒ‡ä»¤å¾—åˆ°ç¼–ç ï¼Œå¦‚<code>add $21, $22, -50</code></p>
<ul>
<li>opcode=8</li>
<li>rs=22, rt=21, immedaite=-50</li>
</ul>
</li>
</ul>
<h4 id="åˆ†æ”¯æŒ‡ä»¤-æ¡ä»¶æŒ‡ä»¤"><a href="#åˆ†æ”¯æŒ‡ä»¤-æ¡ä»¶æŒ‡ä»¤" class="headerlink" title="åˆ†æ”¯æŒ‡ä»¤(æ¡ä»¶æŒ‡ä»¤)"></a>åˆ†æ”¯æŒ‡ä»¤(æ¡ä»¶æŒ‡ä»¤)</h4><ul>
<li>æ¡ä»¶åˆ†æ”¯<ul>
<li>æ ¹æ®æ¯”è¾ƒç»“æœæ”¹å˜æ§åˆ¶æµ</li>
<li><code>beq</code>(branch if equal)<ul>
<li>opcode=4</li>
</ul>
</li>
<li><code>bne</code>(branch if not equal)<ul>
<li>opcode=5</li>
</ul>
</li>
</ul>
</li>
<li>éæ¡ä»¶åˆ†æ”¯<ul>
<li>æ— æ¡ä»¶åœ°æ”¹å˜æ§åˆ¶æµ</li>
<li><code>j</code>(jump)</li>
</ul>
</li>
</ul>
<p>æ ¼å¼ï¼š<code>bep reg1, reg2, L1</code><br>    - å‰ä¸¤ä¸ªæ˜¯å¯„å­˜å™¨æ“ä½œæ•°ï¼Œç¬¬ä¸‰ä¸ªæ˜¯å­˜å‚¨å™¨åœ°å€(ä¸€ä¸ªç«‹å³æ•°ï¼Œåç§»é‡)<br>    - ä¸åŒäºx86æŒ‡ä»¤ï¼Œæ²¡æœ‰æ ‡å¿—å¯„å­˜å™¨ï¼Œåœ¨ä¸€æ¡è¯­å¥ä¸­å®Œæˆäº†æ¯”è¾ƒå’Œè½¬ç§»</p>
<table>
<thead>
<tr>
<th>I</th>
<th>opcode</th>
<th>rs</th>
<th>rt</th>
<th>immediate</th>
</tr>
</thead>
<tbody><tr>
<td>å¤§å°(bit)</td>
<td>6</td>
<td>5</td>
<td>5</td>
<td>16</td>
</tr>
<tr>
<td>ä½ç½®</td>
<td>31~26</td>
<td>25~21</td>
<td>20~16</td>
<td>15~0</td>
</tr>
</tbody></table>
<ul>
<li>å¦‚ä½•å‘æŒ¥16bitçš„ä½œç”¨ï¼Ÿ<ul>
<li>ä»¥å½“å‰çš„PCä¸ºåŸºå‡†ï¼Œ16bitåç§»é‡å¯ä»¥è¡¨ç¤º$\pm 2^{15}$bytes</li>
<li>ç”±äºMIPSæŒ‡ä»¤é•¿åº¦å›ºå®šä¸º32bitï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ç”¨16bitçš„ç«‹å³æ•°æ¥è¡¨ç¤ºæ¯4ä¸ªå­—èŠ‚ä¸ºä¸€ä¸ªå•ä½çš„åœ°å€ï¼Œè¿™æ ·ç›®æ ‡åœ°å€èŒƒå›´å¯ä»¥æ‰©å¤§4å€ã€‚</li>
<li>16bitåç§»é‡å¯ä»¥è¡¨ç¤º$\pm 2^{17}$bytes</li>
</ul>
</li>
<li>ç›®æ ‡åœ°å€è®¡ç®—æ–¹æ³•<ul>
<li>åˆ†æ”¯æ¡ä»¶ä¸æˆç«‹æ—¶ï¼ŒPC = PC + 4 = ä¸‹ä¸€æ¡è¯­å¥</li>
<li>åˆ†æ”¯æ¡ä»¶æˆç«‹æ—¶ï¼ŒPC = PC + 4  + immediate*4</li>
</ul>
</li>
</ul>
<p>å¯¹äºéæ¡ä»¶åˆ†æ”¯æŒ‡ä»¤</p>
<table>
<thead>
<tr>
<th>J</th>
<th>opcode</th>
<th>immediate</th>
</tr>
</thead>
<tbody><tr>
<td>å¤§å°(bit)</td>
<td>6</td>
<td>26</td>
</tr>
<tr>
<td>ä½ç½®</td>
<td>31~26</td>
<td>25~0</td>
</tr>
</tbody></table>
<ul>
<li>ä¸åŒäºæ¡ä»¶åˆ†æ”¯ï¼Œéœ€è¦ä¸¤ä¸ªå¯„å­˜å™¨æ¯”è¾ƒï¼Œæ‰€ä»¥å¯ä»¥è¡¨ç¤ºæ›´å¤§çš„èŒƒå›´</li>
<li>ç›®æ ‡åœ°å€è®¡ç®—æ–¹æ³•ï¼šNew PC = {(PC+4)åå–æœ€é«˜4ä½, address, 00}</li>
<li>Jå‹æŒ‡ä»¤çš„ç›®æ ‡åœ°å€èŒƒå›´ï¼š<code>\pm 2^{28}</code>bytes<ul>
<li>å¦‚ä½•åˆ°è¾¾æ›´è¿œçš„ç›®æ ‡åœ°å€ï¼Ÿ<ul>
<li>ä¸¤æ¬¡è°ƒç”¨jæŒ‡ä»¤</li>
<li>ä½¿ç”¨jræŒ‡ä»¤ï¼š<code>jr rs</code>ï¼Œå¯æŠŠè¦è½¬ç§»çš„ç›®æ ‡åœ°å€æ”¾åœ¨å¯„å­˜å™¨ä¸­ï¼Œè¿™æ ·å°±å¯ä»¥ä½¿ç”¨32ä½çš„ç›®æ ‡åœ°å€</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="ç®—æ•°é€»è¾‘å•å…ƒ"><a href="#ç®—æ•°é€»è¾‘å•å…ƒ" class="headerlink" title="ç®—æ•°é€»è¾‘å•å…ƒ"></a>ç®—æ•°é€»è¾‘å•å…ƒ</h2><p>é€šè¿‡MIPSæŒ‡ä»¤æ¥åšç¤ºä¾‹</p>
<h3 id="ç®—æ•°è¿ç®—å’Œé€»è¾‘è¿ç®—"><a href="#ç®—æ•°è¿ç®—å’Œé€»è¾‘è¿ç®—" class="headerlink" title="ç®—æ•°è¿ç®—å’Œé€»è¾‘è¿ç®—"></a>ç®—æ•°è¿ç®—å’Œé€»è¾‘è¿ç®—</h3><p>æŠŠç¼–ç å¥½çš„æŒ‡ä»¤ï¼Œå¦‚<code>add r1, r2, r3</code>æ”¾å…¥IRå¯„å­˜å™¨ä¸­ï¼Œæ ¹æ®å„ä¸ªåŸŸçš„æ•°å€¼æ§åˆ¶ç”µè·¯å‘ALUå‘å‡ºä¿¡å·ï¼šè¾“å…¥ã€è¾“å‡ºã€è¿ç®—æ–¹æ³•ç­‰ã€‚</p>
<p>åœ¨å¦‚å¯¹äºç«‹å³æ•°åŠ æ³•ï¼š<code>addi</code>ï¼ŒALUæ¥å—åˆ°ä¿¡å·ï¼Œé€šè¿‡opcodeçŸ¥é“è¦è¿›è¡Œç«‹å³æ•°åŠ æ³•ï¼ŒæŠŠæŠŠæºå¯„å­˜å™¨ä½œä¸ºè¾“å…¥ï¼ŒæŠŠè¾“å‡ºæ”¾å…¥ç›®æ ‡å¯„å­˜å™¨ã€‚</p>
<ul>
<li>ç«‹å³æ•°æ˜¯16bitçš„ï¼Œä½†å¯„å­˜å™¨æ˜¯32bitçš„ï¼Œè¦èƒ½æˆåŠŸç›¸åŠ ï¼Œéœ€è¦æ‰©å±•16bit<ul>
<li>MIPSä½¿ç”¨è¡¥ç ï¼Œæ‰€ä»¥è¿™ä¸ªç«‹å³æ•°é‡‡ç”¨ç¬¦å·æ‰©å±•ï¼Œä¸ä¼šæ”¹å˜è¡¥ç çš„å€¼</li>
</ul>
</li>
</ul>
<p>å¯¹äºé€»è¾‘è¿ç®—ï¼Œä¸ç®—æ•°è¿ç®—ç±»ä¼¼ï¼Œåªæ˜¯ç«‹å³æ•°é‡‡ç”¨0æ‰©å±•ã€‚</p>
<h3 id="é—¨ç”µè·¯çš„åŸºæœ¬åŸç†"><a href="#é—¨ç”µè·¯çš„åŸºæœ¬åŸç†" class="headerlink" title="é—¨ç”µè·¯çš„åŸºæœ¬åŸç†"></a>é—¨ç”µè·¯çš„åŸºæœ¬åŸç†</h3><p>ç°ä»£é›†æˆç”µè·¯é€šå¸¸ä½¿ç”¨MOSæ™¶ä½“ç®¡</p>
<ul>
<li>Nå‹MOSç®¡<ul>
<li>Sourceæºï¼šç”µæµæµå…¥</li>
<li>Drainæ¼ï¼šç”µæµæµå‡º</li>
<li>Gateé—¨ï¼šæ§åˆ¶ï¼Œé«˜ç”µé¢‘å¯¼é€š</li>
</ul>
</li>
<li>På‹MOSç®¡<ul>
<li>Sourceæºï¼šç”µæµæµå…¥</li>
<li>Drainæ¼ï¼šç”µæµæµå‡º</li>
<li>Gateé—¨ï¼šæ§åˆ¶ï¼Œä½ç”µé¢‘å¯¼é€š</li>
</ul>
</li>
<li>ç”¨è¿™ä¸¤ç§æ™¶ä½“ç®¡å°±æ„æˆäº†äº’è¡¥å‹çš„MOSå…³ï¼šCMOS</li>
</ul>
<p>é€»è¾‘é—¨ç”±æ™¶ä½“ç®¡æ„æˆï¼Œå„ç§é€»è¾‘é—¨çš„ç»“æ„è¿™é‡Œå°±ä¸è¯´äº†</p>
<h3 id="å¯„å­˜å™¨çš„åŸç†"><a href="#å¯„å­˜å™¨çš„åŸç†" class="headerlink" title="å¯„å­˜å™¨çš„åŸç†"></a>å¯„å­˜å™¨çš„åŸç†</h3><p>åœ¨MIPSç»“æ„ä¸­ï¼Œå¯„å­˜å™¨æ˜¯ç”±32ä¸ªä½ç»„æˆï¼Œä»ç”µè·¯ä¸Šæ¥è¯´æ¯ä¸ªbitéƒ½æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯ä¸€ä¸ª <strong>Dè§¦å‘å™¨</strong>ã€‚</p>
<ul>
<li>Dè§¦å‘å™¨<ul>
<li>å…·æœ‰å­˜å‚¨ä¿¡æ¯èƒ½åŠ›çš„åŸºæœ¬å•å…ƒ</li>
<li>ç”±è‹¥å¹²é€»è¾‘é—¨æ„æˆï¼Œæœ‰å¤šç§å®ç°æ–¹å¼</li>
<li>ä¸»è¦æœ‰1ä¸ªæ•°æ®è¾“å…¥ã€1ä¸ªæ•°æ®è¾“å‡ºå’Œ1ä¸ªæ—¶é’Ÿè¾“å…¥</li>
<li>åœ¨ä¸Šå‡æ²¿ï¼Œé‡‡æ ·è¾“å…¥Dçš„å€¼ï¼Œä¼ é€åˆ°è¾“å‡ºQï¼Œå…¶ä½™æ—¶é—´è¾“å‡ºQçš„å€¼ä¸å˜</li>
<li>è¦æ±‚é‡‡æ ·ä¿¡å·å‰åæœ‰ä¸€æ®µå¾ˆçŸ­çš„ç¨³å®šæ—¶é—´</li>
</ul>
</li>
</ul>
<p>ç”¨32ä¸ªDè§¦å‘å™¨æ„æˆMIPSçš„å¯„å­˜å™¨ï¼Œåœ¨å°†å¯„å­˜å™¨ç”¨é€»è¾‘é—¨ç›¸è¿ï¼Œå°±æ„æˆäº†CPUã€‚</p>
<h3 id="é€»è¾‘è¿ç®—çš„å®ç°"><a href="#é€»è¾‘è¿ç®—çš„å®ç°" class="headerlink" title="é€»è¾‘è¿ç®—çš„å®ç°"></a>é€»è¾‘è¿ç®—çš„å®ç°</h3><p>ALUä¸­åŒ…å«å¾ˆå¤šä¸­è¿ç®—å•å…ƒï¼Œä»¥ä¸å…ƒç®—å•å…ƒä¸ºä¾‹ï¼š32ä½çš„è¾“å…¥éœ€è¦32ä¸ªä¸é€»è¾‘é—¨å¤„ç†ï¼Œå¾—åˆ°å¯¹åº”çš„32ä½è¾“å‡ºã€‚ALUåŒ…å«å¤šä¸ªå•å…ƒï¼Œä¸€ç»„è¾“å…¥é€šè¿‡ä¸åŒçš„å•å…ƒï¼Œçš„åˆ°å¤šç»„è¾“å‡ºï¼Œè¿™æ—¶éœ€è¦ä¸€ä¸ªå¤šé€‰å™¨æ ¹æ®é€‰æ‹©ä¿¡å·(opcode)å¯¹è¿™äº›è¾“å‡ºè¿›è¡Œé€‰æ‹©ï¼Œå¾—åˆ°ä¸€ä¸ª32ä½çš„è¾“å‡ºã€‚</p>
<h3 id="åŠ å‡æ³•çš„å®ç°"><a href="#åŠ å‡æ³•çš„å®ç°" class="headerlink" title="åŠ å‡æ³•çš„å®ç°"></a>åŠ å‡æ³•çš„å®ç°</h3><ul>
<li><p>åŠåŠ å™¨</p>
<ul>
<li>å°†ä¸¤ä¸ªä¸€ä½äºŒè¿›åˆ¶æ•°ç›¸åŠ </li>
<li>ä¸èƒ½å°†è¿›ä½ä½ç”¨ä¸åŠ æ³•</li>
</ul>
</li>
<li><p>å…¨åŠ å™¨</p>
<ul>
<li>ç”±ä¸¤ä¸ªåŠåŠ å™¨ç»„æˆ</li>
<li>èƒ½å°†è¿›ä½ä½ç”¨ä¸åŠ æ³•</li>
</ul>
</li>
<li><p>MIPSå¯¹æº¢å‡ºçš„å¤„ç†æ–¹å¼</p>
<ul>
<li>å°†æ“ä½œæ•°çœ‹åšæœ‰ç¬¦å·æ•°<code>add</code>å’Œ<code>addi</code><ul>
<li>å‘ç”Ÿæº¢å‡ºæ—¶ä¼šäº§ç”Ÿå¼‚å¸¸</li>
</ul>
</li>
<li>å°†æ“ä½œæ•°çœ‹åšæ— ç¬¦å·æ•°<code>addu</code>å’Œ<code>addiu</code><ul>
<li>ä¸å¤„ç†æº¢å‡º</li>
</ul>
</li>
</ul>
</li>
<li><p>x86å¯¹æº¢å‡ºçš„å¤„ç†æ–¹å¼</p>
<ul>
<li>é‡‡ç”¨æº¢å‡ºæ ‡å¿—OFï¼Œæ ¹æ®æ ‡å¿—å¯„å­˜å™¨OFæ¥è¿›è¡Œç›¸åº”çš„æ“ä½œ</li>
</ul>
</li>
</ul>
<p>å¯¹äºå‡æ³•è¿ç®—ï¼Œå‡æ³•å¯ä»¥è½¬æ¢æˆåŠ æ³•ï¼Œé‚£ä¹ˆå°±è¦å¯¹ä¸€ä¸ªæ•°è¿›è¡Œå–åæ“ä½œ</p>
<ul>
<li>è¡¥ç è¡¨ç¤ºçš„äºŒè¿›åˆ¶æ•°å–å<ul>
<li>è§„åˆ™ï¼šæŒ‰ä½å–åï¼Œæœ«ä½åŠ ä¸€</li>
<li>æ¨å¯¼ <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">x :010101</span><br><span class="line">~x:101010</span><br><span class="line">----------</span><br><span class="line">-1:111111</span><br><span class="line"></span><br><span class="line">x + (~x) &#x3D; -1</span><br><span class="line"></span><br><span class="line">(~x) + 1 &#x3D; -x</span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ul>
<h3 id="åŠ æ³•å™¨çš„ä¼˜åŒ–"><a href="#åŠ æ³•å™¨çš„ä¼˜åŒ–" class="headerlink" title="åŠ æ³•å™¨çš„ä¼˜åŒ–"></a>åŠ æ³•å™¨çš„ä¼˜åŒ–</h3><p>å‰é¢å°†çš„åŠ æ³•æœ‰ä¸€ä¸ªä¸ªçš„å…¨åŠ å™¨ä¸²è”è€Œæˆï¼Œéœ€è¦ç­‰å¾…è¿›ä½è¾“å…¥ï¼Œå»¶è¿Ÿé•¿ã€‚è¿›ä½åƒæ³¢ä¸€æ ·ä¼ é€’ï¼Œè¿™æ ·çš„åŠ æ³•å™¨ä¹Ÿç§°ä¸º <strong>è¡Œæ³¢è¿›ä½åŠ æ³•å™¨(RCA)</strong> ã€‚</p>
<ul>
<li>è¶…å‰è¿›ä½åŠ æ³•å™¨(CLA)<ul>
<li>ä¼˜ç‚¹ï¼š <ul>
<li>è®¡ç®—å»¶è¿Ÿæ—¶é—´å›ºå®šä¸ºä¸‰çº§é—¨å»¶è¿Ÿ</li>
</ul>
</li>
<li>ç¼ºç‚¹ï¼š<ul>
<li>è¿›ä¸€æ­¥æ‰©å®½åŠ æ³•å™¨çš„ä½æ•°ï¼Œåˆ™ç”µè·¯å˜å¾—éå¸¸å¤æ‚</li>
</ul>
</li>
<li>å› æ­¤é€šå¸¸ä½¿ç”¨å°è§„æ¨¡çš„CLAæ‹¼æ¥å½¢æˆåŠ æ³•å™¨</li>
</ul>
</li>
</ul>
<h2 id="ä¹˜æ³•å™¨å’Œé™¤æ³•å™¨"><a href="#ä¹˜æ³•å™¨å’Œé™¤æ³•å™¨" class="headerlink" title="ä¹˜æ³•å™¨å’Œé™¤æ³•å™¨"></a>ä¹˜æ³•å™¨å’Œé™¤æ³•å™¨</h2><p>æ•´æ•°ä¹˜æ³•æŒ‡ä»¤ç›¸å½“æ…¢ï¼Œéœ€è¦å¤šä¸ªæ—¶é’Ÿå‘¨æœŸï¼Œç„¶è€Œå…¶ä»–çš„æ•´æ•°è¿ç®—(å¦‚åŠ æ³•ã€å‡æ³•ã€ä½ç§»)ä¹‹éœ€è¦1ä¸ªæ—¶é’Ÿå‘¨æœŸã€‚å› æ­¤ç¼–è¯‘å™¨ä½¿ç”¨äº†ä¸€é¡¹é‡è¦çš„ä¼˜åŒ–ï¼šè¯•ç€ç”¨ç§»ä½å’ŒåŠ æ³•è¿ç®—çš„ç»„åˆæ¥ä»£æ›¿ä¹˜ä»¥å¸¸æ•°å› å­çš„ä¹˜æ³•ã€‚</p>
<p>å¦‚$x \times 14$ï¼Œ$14=2^3+2^2+2^1$ï¼Œç¼–è¯‘å™¨å°†ä¹˜æ³•é‡å†™ä¸º(x&lt;&lt;3)+(x&lt;&lt;2)+(x&lt;&lt;1)ï¼Œå°†ä¸€ä¸ªä¹˜æ³•ä»£æ›¿ä¸º3ä¸ªç§»ä½å’Œ2ä¸ªåŠ æ³•ã€‚ç”šè‡³è¿˜å¯ä»¥$14=2^4-2^1$ã€‚</p>
<h3 id="ä¹˜æ³•å™¨çš„å®ç°"><a href="#ä¹˜æ³•å™¨çš„å®ç°" class="headerlink" title="ä¹˜æ³•å™¨çš„å®ç°"></a>ä¹˜æ³•å™¨çš„å®ç°</h3><p>è§‚å¯Ÿä¸‹åˆ—ä¹˜æ³•è¿‡ç¨‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">   1000</span><br><span class="line">   1001</span><br><span class="line">   ------</span><br><span class="line">   1000</span><br><span class="line">  0000_   å¥½ä¼¼ä¹˜æ•°å·¦ç§»ä¹˜</span><br><span class="line"> 0000__</span><br><span class="line">1000___</span><br></pre></td></tr></table></figure>

<p>ä¸€ä¸ªNä½ä¹˜æ³•å™¨éœ€è¦3ä¸ªå¯„å­˜å™¨ï¼Œåˆ†åˆ«è®¾ä¸ºè¢«ä¹˜æ•°mdï¼Œä¹˜mrï¼Œç»“æœresã€‚ç”±ä¸Šåˆ—è¿‡ç¨‹å¾—åˆ°å¯å‘ï¼Œè¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<ul>
<li><p>å¦‚æœè¢«ä¹˜æ•°ç¬¬ä¸€ä½ä¸ä¸º0åˆ™ä¹˜ä»¥ä¹˜æ•°</p>
</li>
<li><p>æŠŠç»“æœåŠ åˆ°resä¸­</p>
</li>
<li><p>ä¹˜æ•°å³ç§»ï¼Œè¢«ä¹˜æ•°å·¦ç§»</p>
</li>
<li><p>å¦‚æœæ‰§è¡Œäº†Næ¬¡åˆ™ä¹˜æ³•ç»“æŸï¼Œå¦åˆ™å›åˆ°ç¬¬ä¸€æ­¥</p>
</li>
<li><p>å¯¹Nä½ä¹˜æ³•å™¨è¿›è¡Œä¼˜åŒ–</p>
<ul>
<li><ol>
<li>åŠ æ³•ç§»ä½å¹¶è¡Œ<ul>
<li>é€šè¿‡æ§åˆ¶å™¨ï¼Œæ§åˆ¶ç§»ä½ï¼Œåœ¨ä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸå®Œæˆç§»ä½æ“ä½œ</li>
</ul>
</li>
</ol>
</li>
<li><ol start="2">
<li>å‡å°‘ä¸å¿…è¦çš„ç¡¬ä»¶èµ„æº<ul>
<li>mdç”±äºå·¦ç§»ï¼Œå‚¨å­˜éœ€è¦çš„ä½æ•°æ˜¯å®ƒåŸå§‹ä½å®½çš„ä¸¤å€<ul>
<li>å–æ¶ˆå·¦ç§»</li>
</ul>
</li>
<li>mrå³ç§»æœ‰æ•ˆæ•°å­—æ¯ä¸ªå‘¨æœŸå‡å°‘1ä½<ul>
<li>ç”¨resçš„ä½4ä¸ºå­˜æ”¾ï¼Œå› æ­¤å¯ä»¥å–æ¶ˆmr</li>
</ul>
</li>
<li>resæ¯ä¸ªå‘¨æœŸå¢åŠ 1ä½<ul>
<li>å¢åŠ å³ç§»ï¼Œæ¥ä»£æ›¿mdçš„å·¦ç§»ï¼Œä¹˜ç§¯å§‹ç»ˆæ”¾åœ¨é«˜4ä½</li>
</ul>
</li>
<li>åŠ æ³•å™¨å‚åŠ è¿è¾“ï¼Œä½†å®é™…æœ‰æ•ˆæ•°å­—è‡ªç”±å…¶ä½å®½çš„ä¸€åŠ<ul>
<li>mdå’Œresçš„é«˜4ä½è¿›è¡Œè¿ç®—</li>
</ul>
</li>
</ul>
</li>
</ol>
</li>
</ul>
</li>
</ul>
<h3 id="é™¤æ³•çš„è¿ç®—è¿‡ç¨‹"><a href="#é™¤æ³•çš„è¿ç®—è¿‡ç¨‹" class="headerlink" title="é™¤æ³•çš„è¿ç®—è¿‡ç¨‹"></a>é™¤æ³•çš„è¿ç®—è¿‡ç¨‹</h3><p>è§‚å¯Ÿé™¤æ³•çš„è¿ç®—è¿‡ç¨‹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">         0001        ç»“æœç´¯åŠ ï¼Œç›¸å½“äºå·¦ç§»</span><br><span class="line">        0001</span><br><span class="line">       0000</span><br><span class="line">      0000</span><br><span class="line">     0000            0010&lt;0000æ‰€ä»¥å•†ä¸º0</span><br><span class="line">0010&#x2F;00000111</span><br><span class="line">     0010____        ç›¸å½“äºå³ç§»</span><br><span class="line">      0010</span><br><span class="line">       0010</span><br><span class="line">        0010</span><br><span class="line">        ----</span><br><span class="line">         0011</span><br><span class="line">         0010</span><br><span class="line">         ----</span><br><span class="line">            1        è®°å½•ä½™æ•°</span><br></pre></td></tr></table></figure>

<p>è¿‡ç¨‹å¦‚ä¸‹</p>
<ul>
<li>ä½™æ•°å¯„å­˜å™¨å‡å»é™¤æ•°ï¼Œæ£€æµ‹æœ€é«˜ä½åˆ¤æ–­å¤§å°</li>
<li>é™¤æ•°å³ç§»</li>
<li>å•†å·¦ç§»ï¼Œç´¯åŠ </li>
</ul>
<p>é™¤æ³•å™¨çš„ä¼˜åŒ–:</p>
<ul>
<li><ol>
<li>ç¡¬ä»¶èµ„æºä¼˜åŒ–<ul>
<li>é™¤æ•°å¯„å­˜å™¨å®é™…åªç”¨äº†ä¸€åŠ</li>
<li>å•†å¯„å­˜å™¨åˆå§‹çš„ç©ºçš„ï¼Œä»å³åˆ°å·¦é€ä½å¡«æ»¡</li>
<li>ä½™æ•°åˆå§‹æ˜¯æ»¡çš„ï¼Œæœ‰æ„ä¹‰çš„ä½ä»å·¦åˆ°å³é€ä½å‡å°‘</li>
</ul>
</li>
</ol>
</li>
<li><ol start="2">
<li>æ€§èƒ½èµ„æºä¼˜åŒ–</li>
</ol>
</li>
</ul>
<h2 id="å•å‘¨æœŸå¤„ç†å™¨"><a href="#å•å‘¨æœŸå¤„ç†å™¨" class="headerlink" title="å•å‘¨æœŸå¤„ç†å™¨"></a>å•å‘¨æœŸå¤„ç†å™¨</h2><h3 id="å¤„ç†å™¨è®¾è®¡çš„ä¸»è¦æ­¥éª¤"><a href="#å¤„ç†å™¨è®¾è®¡çš„ä¸»è¦æ­¥éª¤" class="headerlink" title="å¤„ç†å™¨è®¾è®¡çš„ä¸»è¦æ­¥éª¤"></a>å¤„ç†å™¨è®¾è®¡çš„ä¸»è¦æ­¥éª¤</h3><ul>
<li><ol>
<li>åˆ†ææŒ‡ä»¤ç³»ç»Ÿï¼Œå¾—å‡ºå¯¹æ•°æ®é€šè·¯çš„éœ€æ±‚</li>
</ol>
</li>
<li><ol start="2">
<li>ä¸ºæ•°æ®é€šè·¯é€‰æ‹©åˆé€‚çš„ç»„ä»¶</li>
</ol>
</li>
<li><ol start="3">
<li>è¿æ¥ç»„ä»¶å»ºç«‹æ•°æ®é€šè·¯</li>
</ol>
</li>
<li><ol start="4">
<li>åˆ†ææ¯æ¡æŒ‡ä»¤çš„å®ç°ï¼Œä»¥ç¡®å®šæ§åˆ¶ä¿¡å·</li>
</ol>
</li>
<li><ol start="5">
<li>é›†æˆæ§åˆ¶ä¿¡å·ï¼Œå½¢æˆå®Œæ•´çš„æ§åˆ¶é€»è¾‘ï¼Œæ§åˆ¶å™¨</li>
</ol>
</li>
</ul>
<p>ä¸‹é¢ä»¥ä¸€ä¸ªç®€åŒ–çš„MIPSæŒ‡ä»¤ç³»ç»Ÿä½œä¸ºå®ä¾‹ï¼Œæ”¹ç³»ç»Ÿçš„æŒ‡ä»¤æœ‰ï¼š</p>
<ul>
<li>æ— ç¬¦å·åŠ æ³•å’Œå’Œå‡æ³•<ul>
<li><code>addu rd, rs, rt</code></li>
<li><code>subu rd, rs, rt</code></li>
</ul>
</li>
<li>ç«‹å³æ•°çš„é€»è¾‘æˆ–<ul>
<li><code>ori rt, rs, imm16</code></li>
</ul>
</li>
<li>è£…è½½å’Œå‚¨å­˜ä¸€ä¸ªå­—<ul>
<li><code>lw rt, imm16(rs)</code></li>
<li><code>sw rt, imm16(rs)</code></li>
</ul>
</li>
<li>æ¡ä»¶åˆ†æ”¯<ul>
<li><code>bep rs, rt, imm16</code></li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th>R</th>
<th>opcode</th>
<th>rs</th>
<th>rt</th>
<th>rd</th>
<th>shamt</th>
<th>funct</th>
</tr>
</thead>
<tbody><tr>
<td>å¤§å°(bit)</td>
<td>6</td>
<td>5</td>
<td>5</td>
<td>5</td>
<td>5</td>
<td>6</td>
</tr>
<tr>
<td>ä½ç½®</td>
<td>31~26</td>
<td>25~21</td>
<td>20~16</td>
<td>15~11</td>
<td>10~6</td>
<td>5~0</td>
</tr>
</tbody></table>
<ul>
<li><p>æŒ‡ä»¤ä½åŸŸåˆ†è§£</p>
<ul>
<li>Rå‹æŒ‡ä»¤ï¼š{op, rs, rt, rd, shamt, funct}</li>
<li>Iå‹æŒ‡ä»¤ï¼š{op, rs, rt, imm16}</li>
<li>éœ€æ±‚ï¼š<ul>
<li>å­˜æ”¾æŒ‡ä»¤çš„å­˜å‚¨å™¨</li>
<li>PC:å­˜æ”¾åœ°å€çš„32ä½å¯„å­˜å™¨</li>
</ul>
</li>
</ul>
</li>
<li><p>é€šè¿‡æŒ‡ä»¤æ“ä½œåˆ†æéœ€æ±‚</p>
<ul>
<li>è¿ç®—æŒ‡ä»¤éœ€æ±‚ï¼š<ul>
<li>ä¸€ç»„å­˜æ”¾æ•°æ®çš„é€šç”¨å¯„å­˜å™¨ï¼Œè¿™äº›å¯„å­˜å™¨ç§°ä¸ºå¯„å­˜å™¨å †</li>
<li>åŒæ—¶è¯»å–ä¸¤ä¸ªå¯„å­˜å™¨çš„å†…å®¹</li>
<li>å†™å…¥ä¸€ä¸ªå¯„å­˜å™¨çš„å†…å®¹ï¼Œä¿å­˜ç»“æœ</li>
<li>å°†16ä½çš„ç«‹å³æ•°æ‰©å±•åˆ°32ä½ï¼Œä¾›Iå‹æŒ‡ä»¤éœ€è¦</li>
<li>æä¾›åŠ ã€å‡ã€é€»è¾‘æˆ–åŠŸèƒ½çš„è¿ç®—å™¨</li>
<li>è¿ç®—å™¨çš„æ“ä½œæ•°å¯ä»¥æ—¶å¯„å­˜å™¨æˆ–ç«‹å³æ•°</li>
</ul>
</li>
<li>è®¿å­˜æŒ‡ä»¤<ul>
<li>å­˜æ”¾æ•°æ®çš„å‚¨å­˜å™¨ï¼Œå¯è¯»å¯å†™</li>
<li>å°†16ä½çš„ç«‹å³æ•°æ‰©å±•åˆ°32ä½ï¼Œä¾›Iå‹æŒ‡ä»¤éœ€è¦</li>
</ul>
</li>
<li>åˆ†æ”¯æŒ‡ä»¤<ul>
<li>æ¯”è¾ƒå†…å®¹ï¼Œåˆ¤æ–­æ˜¯å¦ç›¸ç­‰</li>
<li>PCå¯„å­˜å™¨æ”¯æŒä¸¤ç§è‡ªå¢æ–¹å¼ï¼ŒåŠ 4æˆ–åŠ ä¸€ä¸ªç«‹å³æ•°</li>
</ul>
</li>
</ul>
</li>
<li><p>æ•´ç†ï¼š</p>
<ul>
<li>ç®—æ•°é€»è¾‘å•å…ƒ(ALU)<ul>
<li>æ”¯æŒè¿ç®—ç±»å‹</li>
<li>æ“ä½œæ•°</li>
</ul>
</li>
<li>ç«‹å³æ•°æ‰©å±•éƒ¨ä»¶<ul>
<li>æ”¯æŒ0æ‰©å±•ã€ç¬¦å·æ‰©å±•</li>
</ul>
</li>
<li>ç¨‹åºè®¡æ•°å™¨(PC)<ul>
<li>æ”¯æŒä¸¤ç§è‡ªå¢æ–¹å¼ï¼ŒåŠ 4æˆ–åŠ ä¸€ä¸ªç«‹å³æ•°</li>
</ul>
</li>
<li>å¯„å­˜å™¨å †<ul>
<li>æ”¯æŒè¯»æ“ä½œï¼šrså’Œrt</li>
<li>æ”¯æŒå†™æ“ä½œï¼šrtå’Œrd</li>
</ul>
</li>
<li>å­˜å‚¨å™¨<ul>
<li>ä¸€ä¸ªåªè¯»æŒ‡ä»¤å­˜å‚¨å™¨</li>
<li>ä¸€ä¸ªå¯è¯»å†™çš„æ•°æ®å­˜å‚¨å™¨</li>
</ul>
</li>
</ul>
</li>
<li><p>å¯„å­˜å™¨å †</p>
<ul>
<li>å†…éƒ¨æ„æˆ<ul>
<li>32ä¸ª32ä½çš„å¯„å­˜å™¨</li>
</ul>
</li>
<li>æ•°æ®æ¥å£ä¿¡å·<ul>
<li>busAã€busBï¼šä¸¤ç»„32ä½çš„æ•°æ®è¾“å‡º</li>
<li>busWï¼šä¸€ç»„32ä½çš„æ•°æ®è¾“å…¥</li>
</ul>
</li>
<li>è¯»å†™æ§åˆ¶<ul>
<li>Ra(5bit)ï¼šé€‰ä¸­å¯¹åº”ç¼–å·çš„å¯„å­˜å™¨ï¼Œå°†å…¶å†…å®¹æ”¾åˆ°busA</li>
<li>Rb(5bit)ï¼šé€‰ä¸­å¯¹åº”ç¼–å·çš„å¯„å­˜å™¨ï¼Œå°†å…¶å†…å®¹æ”¾åˆ°busB</li>
<li>Rw(5bit)ï¼šé€‰ä¸­å¯¹åº”ç¼–å·çš„å¯„å­˜å™¨ï¼Œåœ¨æ—¶é’Ÿä¿¡å·çš„ä¸Šå‡æ²¿ï¼Œå¦‚æœå†™ä½¿èƒ½ä¿¡å·æœ‰æ•ˆï¼Œå°†busWçš„å†…å®¹å†™å…¥æ”¹å¯„å­˜å™¨</li>
<li>è¯»æ“ä½œä¸å—æ—¶é’Ÿä¿¡å·æ§åˆ¶</li>
</ul>
</li>
</ul>
</li>
<li><p>å­˜å‚¨å™¨</p>
<ul>
<li>æ•°æ®æ¥å£ä¿¡å·<ul>
<li>Date Inï¼š32ä½çš„æ•°æ®è¾“å…¥ä¿¡å·</li>
<li>Data Outï¼š32ä½çš„æ•°æ®è¾“å‡ºä¿¡å·</li>
</ul>
</li>
<li>è¯»å†™æ“ä½œ<ul>
<li>Addressï¼š32ä½çš„åœ°å€ä¿¡å·ã€‚è¯¥ä¿¡å·æŒ‡å®šä¸€ä¸ªå­˜å‚¨å•å…ƒï¼Œå°†å…¶å†…å®¹é€åˆ°æ•°æ®è¾“å…¥ä¿¡å·</li>
<li>Write Enableï¼šå†™ä½¿èƒ½ä¿¡å·ï¼Œåœ¨æ—¶é’Ÿä¸Šå‡æ²¿ï¼Œå¦‚æœå†™ä½¿èƒ½ä¿¡å·æœ‰æ•ˆï¼Œå°†æ•°æ®è¾“å…¥ä¿¡å·çš„å†…å®¹å­˜å…¥åœ°å€ä¿¡å·æŒ‡å®šçš„å­˜å‚¨å•å…ƒ</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="æ•°æ®é€šè·¯çš„å»ºç«‹"><a href="#æ•°æ®é€šè·¯çš„å»ºç«‹" class="headerlink" title="æ•°æ®é€šè·¯çš„å»ºç«‹"></a>æ•°æ®é€šè·¯çš„å»ºç«‹</h3><ul>
<li>åŸºæœ¬åŸåˆ™<ul>
<li>æ ¹æ®æŒ‡ä»¤éœ€æ±‚ï¼Œè¿æ¥ç»„ä»¶ï¼Œå»ºç«‹æ•°æ®é€šè·¯</li>
</ul>
</li>
<li>æŒ‡ä»¤çš„éœ€æ±‚<ul>
<li>æ‰€æœ‰æŒ‡ä»¤çš„å…±åŒéœ€æ±‚<ul>
<li>å–æŒ‡ä»¤ï¼Œç”±IFU(Instruction Fetch Unit)å®Œæˆ<ul>
<li>ç¨‹åºè®¡æ•°å™¨(PC)çš„å†…å®¹æ˜¯æŒ‡ä»¤çš„åœ°å€</li>
<li>ç”¨PCçš„å†…å®¹ä½œä¸ºåœ°å€ï¼Œè®¿é—®æŒ‡ä»¤å­˜å‚¨å™¨è·å¾—æŒ‡ä»¤ç¼–ç </li>
</ul>
</li>
<li>æ›´æ–°ç¨‹åºè®¡æ•°å™¨PC<ul>
<li>é¡ºåºæ—¶PC+=4</li>
<li>åˆ†æ”¯æ—¶PC=ç›®æ ‡åœ°å€</li>
</ul>
</li>
</ul>
</li>
<li>ä¸åŒæŒ‡ä»¤çš„å„è‡ªéœ€æ±‚<ul>
<li>åŠ å‡æ³•æŒ‡ä»¤çš„éœ€æ±‚</li>
<li>é€»è¾‘è¿ç®—æŒ‡ä»¤çš„éœ€æ±‚</li>
<li>è®¿å­˜æŒ‡ä»¤éœ€æ±‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="è¿ç®—æŒ‡ä»¤çš„æ§åˆ¶ä¿¡å·"><a href="#è¿ç®—æŒ‡ä»¤çš„æ§åˆ¶ä¿¡å·" class="headerlink" title="è¿ç®—æŒ‡ä»¤çš„æ§åˆ¶ä¿¡å·"></a>è¿ç®—æŒ‡ä»¤çš„æ§åˆ¶ä¿¡å·</h3><p>ä»¥åŠ æ³•è¿ç®—æŒ‡ä»¤ä¸ºä¾‹ï¼š</p>
<ul>
<li><ol>
<li>é€šè¿‡IFUå–æŒ‡ä»¤</li>
</ol>
</li>
<li><ol start="2">
<li>æ‰§è¡ŒåŠ æ³•<ul>
<li>è§£æIFUçš„è¾“å‡ºï¼Œæ”¾å…¥å¯„å­˜å™¨å †å¯¹åº”çš„è¾“å…¥ä¸­</li>
<li>busBå¦‚æœæ˜¯ç«‹å³æ•°éœ€è¦æ‰©å±•<ul>
<li>æ‰©å±•åˆæœ‰0æ‰©å±•å’Œç¬¦å·æ‰©å±•</li>
</ul>
</li>
<li>å¯¹ALUï¼šç»™ALUä¿¡å·ä½¿å…¶æ‰§è¡ŒåŠ æ³•è®¡ç®—</li>
<li>å¯¹æ•°æ®å­˜å‚¨å™¨ï¼šå¦‚æœä¸éœ€è¦æ•°æ®å­˜å‚¨å™¨ï¼Œå†™ä½¿èƒ½ä¿¡å·å…³é—­ï¼Œé˜²æ­¢å¯¹ç»“æœä¿®æ”¹</li>
<li>è¦å†™å…¥å¯„å­˜å™¨ï¼Œæ‰€æœ‰è¦æŠŠå¯„å­˜å™¨çš„å†™ä½¿èƒ½ä¿¡å·è®¾ä¸ºæœ‰æ•ˆ</li>
</ul>
</li>
</ol>
</li>
<li><ol start="3">
<li>æ›´æ–°PCå¯„å­˜å™¨çš„å†…å®¹</li>
</ol>
</li>
</ul>
<p>è®¿å­˜æŒ‡ä»¤ã€åˆ†æ”¯æŒ‡ä»¤åŒç†</p>
<h3 id="æ§åˆ¶ä¿¡å·çš„é›†æˆ"><a href="#æ§åˆ¶ä¿¡å·çš„é›†æˆ" class="headerlink" title="æ§åˆ¶ä¿¡å·çš„é›†æˆ"></a>æ§åˆ¶ä¿¡å·çš„é›†æˆ</h3><p>æŠŠä¹‹å‰çš„æ§åˆ¶ä¿¡å·é›†æˆèµ·æ¥ï¼Œå½¢æˆå®Œæ•´çš„æ§åˆ¶é€»è¾‘ã€‚</p>
<h2 id="æµæ°´çº¿å¤„ç†å™¨"><a href="#æµæ°´çº¿å¤„ç†å™¨" class="headerlink" title="æµæ°´çº¿å¤„ç†å™¨"></a>æµæ°´çº¿å¤„ç†å™¨</h2><h3 id="æµæ°´çº¿çš„åŸºæœ¬åŸç†"><a href="#æµæ°´çº¿çš„åŸºæœ¬åŸç†" class="headerlink" title="æµæ°´çº¿çš„åŸºæœ¬åŸç†"></a>æµæ°´çº¿çš„åŸºæœ¬åŸç†</h3><p>æ‰§è¡ŒMIPSæŒ‡ä»¤çš„ä¸»è¦æ­¥éª¤ï¼š</p>
<ul>
<li>å–å€¼</li>
<li>è¯‘ç </li>
<li>æ‰§è¡Œ</li>
<li>è®¿å­˜</li>
<li>å›å†™</li>
</ul>
<p>åˆ†å·¥æ˜ç¡®å¥½ä¼¼éå¸¸é€‚åˆä½¿ç”¨æµæ°´çº¿ï¼Œæ¯ä¸ªäººä¸“æ³¨äºè‡ªå·±çš„å·¥ä½œï¼Œæ¯ä¸ªç¡¬ä»¶éƒ½æœ‰ä½¿ç”¨ã€‚</p>
<p>æˆ‘ä»¬éœ€è¦å°†æ¯ä¸ªéƒ¨åˆ†çš„è¾“å‡ºæ”¾å…¥ä¸€ä¸ªæµæ°´çº¿å¯„å­˜å™¨ï¼Œè¿™æ ·å½“è¾“å‡ºä¿å­˜åœ¨æµæ°´çº¿å¯„å­˜å™¨åï¼Œå‰é¢çš„å¯„å­˜å™¨å°±å¯ä»¥å¼€å§‹æ–°çš„å·¥ä½œè€Œä¸å½±å“åé¢çš„å·¥ä½œã€‚ä¸‹ä¸€ä¸ªç¡¬ä»¶åˆä»æµæ°´çº¿å¯„å­˜å™¨ä¸­å–ä¸Šä¸€ä¸ªç¡¬ä»¶çš„è¾“å…¥ã€‚</p>
<p>è™½ç„¶æ¯æ¡æŒ‡ä»¤è¦ç»å†çš„æ—¶é—´ä¸å˜ï¼Œä½†æ˜¯å½“æµæ°´çº¿å¡«æ»¡æ˜¯ï¼Œæ¯ä¸ªæ—¶é’Ÿå‘¨æœŸéƒ½èƒ½äº§ç”Ÿä¸€æ¡æŒ‡ä»¤ï¼Œæ€§èƒ½æå‡ä¸å°‘ã€‚</p>
<h3 id="æµæ°´çº¿çš„ä¼˜åŒ–"><a href="#æµæ°´çº¿çš„ä¼˜åŒ–" class="headerlink" title="æµæ°´çº¿çš„ä¼˜åŒ–"></a>æµæ°´çº¿çš„ä¼˜åŒ–</h3><p>å¦‚æœåªæ˜¯ç®€å•çš„æŒ‰ç…§æŒ‡ä»¤æ‰§è¡Œçš„æ­¥éª¤å–åˆ‡åˆ†æµæ°´çº¿çš„è¯ä¸èƒ½å……åˆ†å‘æŒ¥æµæ°´çº¿çš„ä¼˜åŠ¿ã€‚</p>
<p>æ—¶é’Ÿå‘¨æœŸçš„å¤§å°å–å†³äºè€—æ—¶æœ€é•¿çš„é‚£ä¸ªæ­¥éª¤ï¼Œå¦‚æœæµæ°´çº¿å¹³è¡¡æ€§è¾ƒå·®ï¼Œæ€§èƒ½æå‡å¹…åº¦ä¸‹é™ã€‚</p>
<p>æµæ°´çº¿çš„æ·±åº¦å¹¶éè¶Šæ·±è¶Šå¥½ï¼Œåº”ç”¨æµæ°´çº¿å¯„å­˜å™¨ä¹Ÿä¼šäº§ç”Ÿæ—¶å»¶ã€‚è¶Šæ·±çš„æµæ°´çº¿è¯´æ˜éœ€è¦çš„æµæ°´çº¿å¯„å­˜å™¨è¶Šå¤šã€‚å•æ¡æŒ‡ä»¤çš„æ‰§è¡Œæ—¶é—´è¶Šé•¿ã€‚</p>
<h3 id="è¶…æ ‡é‡æµæ°´çº¿"><a href="#è¶…æ ‡é‡æµæ°´çº¿" class="headerlink" title="è¶…æ ‡é‡æµæ°´çº¿"></a>è¶…æ ‡é‡æµæ°´çº¿</h3><p>é™¤äº†å¢åŠ æµæ°´çº¿æ·±åº¦æ¥æä¾›é€Ÿåº¦ï¼Œè¿˜æœ‰ä¸€ç§æ–¹å¼å°±æ˜¯æ‹“å®½æµæ°´çº¿ï¼Œè¿™æ ·çš„æµæ°´çº¿å°±ç§°ä¸ºè¶…æ ‡é‡æµæ°´çº¿ã€‚é€šå¸¸å…·æœ‰ä¸¤æ¡æˆ–ä»¥ä¸Šå¹¶è¡Œå·¥ä½œçš„æµæ°´çº¿ç§°ä¸ºè¶…æ ‡é‡ç»“æ„ã€‚ä¹Ÿå¯ç§°ä¸ºè¶…é‡ã€‚</p>
<h3 id="æµæ°´çº¿çš„â€å†’é™©â€"><a href="#æµæ°´çº¿çš„â€å†’é™©â€" class="headerlink" title="æµæ°´çº¿çš„â€å†’é™©â€"></a>æµæ°´çº¿çš„â€å†’é™©â€</h3><ul>
<li>â€œå†’é™©â€(Hazard)ï¼šé˜»æ­¢ä¸‹ä¸€æ¡æŒ‡ä»¤åœ¨ä¸‹ä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸå¼€å§‹æ‰§è¡Œçš„æƒ…å†µ<ul>
<li>ç»“æ„å†’é™©<ul>
<li>æ‰€æœ‰çš„ç¡¬ä»¶éƒ¨ä»¶æ­£åœ¨ä½ä¹‹å‰çš„æŒ‡ä»¤å·¥ä½œ</li>
<li>å¯¹äºåªè¯»å­˜å‚¨å™¨ï¼Œä¸€æ¬¡åªèƒ½æœ‰ä¸€ä¸ªç¡¬ä»¶è¿›è¡Œè¯»å–<ul>
<li>è§£å†³æ–¹æ¡ˆ1ï¼šæµæ°´çº¿åœé¡¿(ä¸åŒæ—¶ä½¿ç”¨è¿™ä¸ªç¡¬ä»¶)ï¼Œäº§ç”Ÿç©ºæ³¡(ä¸ä¼šå½±å“çŠ¶æ€çš„å€¼)<ul>
<li>ä½†å¦‚æœç­‰å¾…åæœ‰ä¸å¦ä¸€ä¸ªç¡¬ä»¶å†²çªåˆ™åˆè¦åœé¡¿ï¼Œè¿™æ ·æ•ˆç‡å¾ˆä½</li>
</ul>
</li>
<li>è§£å†³æ–¹æ¡ˆ2ï¼šæŒ‡ä»¤å’Œæ•°æ®æ”¾åœ¨ä¸åŒçš„å­˜å‚¨å™¨ä¸­</li>
</ul>
</li>
<li>å¯¹äºå¯è¯»å†™çš„å¯„å­˜å™¨ï¼Œè¯»å†™åŒæ—¶å‘ç”Ÿæ˜¾ç„¶ä¸æ˜¯ä¸€ä¸ªæ˜æ™ºçš„é€‰æ‹©<ul>
<li>è§£å†³æ–¹æ¡ˆï¼šå‰åŠä¸ªæ—¶é’Ÿå‘¨æœŸå†™ï¼ŒååŠä¸ªè¯»ï¼Œå¹¶è®¾ç½®ç‹¬ç«‹çš„è¯»å†™å£</li>
<li>æ”¯æŒè¿™ä¹ˆåšçš„åŸå› æ˜¯å¯„å­˜å™¨çš„è¯»å†™é€Ÿåº¦è¾ƒå¿«</li>
</ul>
</li>
</ul>
</li>
<li>æ•°æ®å†’é™©<ul>
<li>éœ€è¦ç­‰å¾…ä¹‹å‰çš„æŒ‡ä»¤å®Œæˆæ•°æ®çš„è¯»å†™</li>
<li>å¦‚æœä¸‹ä¸€æ¡æŒ‡ä»¤éœ€è¦ä¸Šä¸€æ¡æŒ‡ä»¤çš„æ•°æ®ï¼Œä½†æ˜¯ä¸Šä¸€æ¡æŒ‡ä»¤å¯èƒ½è¿˜æ²¡å†™å›<ul>
<li>è§£å†³æ–¹æ¡ˆ1ï¼šåœé¡¿</li>
</ul>
</li>
</ul>
</li>
<li>æ§åˆ¶å†’é™©<ul>
<li>éœ€è¦æ ¹æ®ä¹‹å‰æŒ‡ä»¤çš„ç»“æœå†³å®šä¸‹ä¸€æ­¥çš„è¡Œä¸º</li>
<li>ç±»ä¼¼æ•°æ®å†’é™©ï¼ŒæŒ‡ä»¤ä¸èƒ½ç¡®å®šæ˜¯å¦å‘ç”Ÿåˆ†æ”¯ï¼Œéœ€è¦å‡ ä¸ªå‘¨æœŸåæ‰çŸ¥é“<ul>
<li>è§£å†³æ–¹æ¡ˆ1ï¼šåœé¡¿</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="æ•°æ®å†’é™©çš„å¤„ç†"><a href="#æ•°æ®å†’é™©çš„å¤„ç†" class="headerlink" title="æ•°æ®å†’é™©çš„å¤„ç†"></a>æ•°æ®å†’é™©çš„å¤„ç†</h3><ul>
<li>è½¯ä»¶è§£å†³æ–¹æ¡ˆ(åœé¡¿)ï¼šæ’å…¥nopæŒ‡ä»¤ï¼Œä»€ä¹ˆéƒ½ä¸å¹²<ul>
<li>æ’å…¥å‡ æ¡nopæŒ‡ä»¤å­˜åœ¨é—®é¢˜ï¼Œä¸åŒçš„å¤„ç†å™¨çš„æµæ°´çº¿æ·±åº¦å¯èƒ½ä¸åŒï¼Œå¯¼è‡´å…¼å®¹ã€‚å› æ­¤ä¸€èˆ¬ä¸é€šè¿‡è½¯ä»¶å±‚é¢è§£å†³ç¡¬ä»¶é—®é¢˜</li>
</ul>
</li>
<li>æµæ°´çº¿åœé¡¿ï¼Œäº§ç”Ÿç©ºæ³¡<ul>
<li>è¿™æ ·çš„ç©ºæ³¡ç”±ç¡¬ä»¶äº§ç”Ÿ</li>
<li>æ£€æŸ¥æ•°æ®å†’é™©ï¼Œå¦‚æœæœ‰åˆ™æ’å…¥ç©ºæ³¡</li>
</ul>
</li>
<li>æ•°æ®å‰é€’(æˆ–ç§°ä¸ºæ—è·¯)<ul>
<li>å¦‚åŠ æ³•è¿ç®—ï¼Œå³ä½¿æ²¡æœ‰å†™å›ï¼Œå®ƒçš„è¿ç®—ç»“æœå…¶å®å·²ç»åœ¨æµæ°´çº¿å¯„å­˜å™¨ä¸­äº†ï¼Œæˆ‘ä»¬åªéœ€å¼•ç”¨æµæ°´çº¿å¯„å­˜å™¨ä¸Šçš„å€¼</li>
<li>ä½†å¯¹äºloadæŒ‡ä»¤æ•°æ®å‰é€’ä¸é€‚ç”¨ï¼Œå› ä¸ºloadæŒ‡ä»¤çš„å€¼è¾ƒè¿Ÿäº§ç”Ÿ</li>
</ul>
</li>
</ul>
<h3 id="æ§åˆ¶å†’é™©çš„å¤„ç†"><a href="#æ§åˆ¶å†’é™©çš„å¤„ç†" class="headerlink" title="æ§åˆ¶å†’é™©çš„å¤„ç†"></a>æ§åˆ¶å†’é™©çš„å¤„ç†</h3><ul>
<li>å½“æ‰§è¡Œäº†è½¬ç§»æŒ‡ä»¤ï¼Œå¹¶ç¡®å®å‘ç”Ÿè½¬ç§»æ—¶ï¼Œäº§ç”Ÿå¦‚ä¸‹çš„å¼€é”€ï¼Œç§°ä¸ºâ€è½¬ç§»å¼€é”€â€<ul>
<li><ol>
<li>å°†æŒ‰é¡ºåºé¢„å–çš„æŒ‡ä»¤åºŸé™¤(æ’ç©ºæµæ°´çº¿)</li>
</ol>
</li>
<li><ol start="2">
<li>ä»è½¬ç§»ç›®æ ‡åœ°å€é‡æ–°å–æŒ‡å®š</li>
</ol>
</li>
</ul>
</li>
<li>è½¬ç§»å¼€é”€çš„æ„æˆ<ul>
<li>è¦ä¸è¦è½¬ç§»ï¼Œåˆ¤æ–­æ¡ä»¶å¼•èµ·çš„å¼€é”€</li>
<li>è½¬ç§»åˆ°å“ªï¼Œç”Ÿæˆç›®æ ‡åœ°å€å¼•èµ·çš„å¼€é”€</li>
</ul>
</li>
</ul>
<h2 id="å­˜å‚¨å±‚æ¬¡ç»“æ„"><a href="#å­˜å‚¨å±‚æ¬¡ç»“æ„" class="headerlink" title="å­˜å‚¨å±‚æ¬¡ç»“æ„"></a>å­˜å‚¨å±‚æ¬¡ç»“æ„</h2><h3 id="æ¦‚å†µ"><a href="#æ¦‚å†µ" class="headerlink" title="æ¦‚å†µ"></a>æ¦‚å†µ</h3><ul>
<li>å†¯è¯ºä¾æ›¼è®¡ç®—æœºç»“æ„ï¼š<ul>
<li>è¿ç®—å™¨CA</li>
<li>æ§åˆ¶å™¨CC</li>
<li>å­˜å‚¨å™¨M<ul>
<li>å±‚æ¬¡ç»“æ„ï¼š<ul>
<li>é€šç”¨å¯„å­˜å™¨ï¼šCPU</li>
<li>é«˜é€Ÿç¼“å­˜ï¼šSRAM</li>
<li>ä¸»å­˜ï¼šDRAM</li>
<li>æœ¬åœ°äºŒçº§å­˜å‚¨ï¼šDisk</li>
<li>è¶Šå¾€ä¸Šè¶Šå¿«ã€å®¹é‡è¶Šå°ä»·æ ¼è¶Šé«˜</li>
</ul>
</li>
</ul>
</li>
<li>è¾“å…¥I</li>
<li>è¾“å‡ºO</li>
</ul>
</li>
</ul>
<h3 id="DRAMå’ŒSRAM"><a href="#DRAMå’ŒSRAM" class="headerlink" title="DRAMå’ŒSRAM"></a>DRAMå’ŒSRAM</h3><table>
<thead>
<tr>
<th></th>
<th>DRAM</th>
<th>SRAM</th>
</tr>
</thead>
<tbody><tr>
<td>å‚¨å­˜å•å…ƒ</td>
<td>ç”µå®¹</td>
<td>åŒç¨³æ€è§¦å‘å™¨</td>
</tr>
<tr>
<td>é›†æˆåº¦</td>
<td>é«˜</td>
<td>ä½</td>
</tr>
<tr>
<td>åŠŸè€—</td>
<td>ä½</td>
<td>é«˜</td>
</tr>
<tr>
<td>ä»·æ ¼</td>
<td>ä½</td>
<td>é«˜</td>
</tr>
<tr>
<td>é€Ÿåº¦</td>
<td>æ…¢</td>
<td>å—</td>
</tr>
<tr>
<td>åˆ·æ–°</td>
<td>æœ‰</td>
<td>æ— </td>
</tr>
</tbody></table>
<h3 id="ä¸»å­˜-å†…å­˜-çš„å·¥ä½œåŸç†"><a href="#ä¸»å­˜-å†…å­˜-çš„å·¥ä½œåŸç†" class="headerlink" title="ä¸»å­˜(å†…å­˜)çš„å·¥ä½œåŸç†"></a>ä¸»å­˜(å†…å­˜)çš„å·¥ä½œåŸç†</h3><p>DRAMèŠ¯ç‰‡ä»¥ä¸€ä¸ªå­˜å‚¨é˜µåˆ—ä½æ ¸å¿ƒï¼Œé€šè¿‡æŒ‡å®šè¡Œåˆ—åœ°å€å–å‡ºå¯¹åº”çš„å­˜å‚¨å•å…ƒ(4æ¯”ç‰¹æˆ–8æ¯”ç‰¹)ã€‚ä¸€ä¸ªå†…å­˜æ¡å¾€å¾€æœ‰å¤šä¸ªDRAMèŠ¯ç‰‡(4çš„å€æ•°)ï¼Œæ„æˆä¸€ä¸ªå†…å­˜æ¨¡ç»„ã€‚ä»å¤–éƒ¨ç»™å…¥è¡Œåˆ—åœ°å€ååœ°å€ä¼šåŒæ—¶é€åˆ°æ¯ä¸ªDRAMèŠ¯ç‰‡ï¼Œæ¯ä¸ªDRAMèŠ¯ç‰‡åŒæ—¶é€‰æ‹©å‚¨å­˜å™¨å•å…ƒï¼Œå­˜å‚¨å•å…ƒåŒæ—¶è¾“å‡ºï¼Œç»„æˆä¸€ä¸ª64/32ä½çš„æ•°ã€‚</p>
<p>ç¼“å­˜é€Ÿåº¦å¾ˆå¿«ï¼Œä¸€èˆ¬æ”¾åœ¨CPUä¸­ã€‚CPUè®¿é—®å†…å­˜çš„è¿‡ç¨‹ï¼šSDRAM(åŒæ­¥DRAM)çš„è®¿å­˜è¿‡ç¨‹ä¸ºä¾‹ï¼š</p>
<ul>
<li>CPUé€šè¿‡ç³»ç»Ÿæ€»çº¿è¿æ¥åˆ°å†…å­˜æ§åˆ¶å™¨ï¼Œå†…å­˜æ§åˆ¶å™¨å†é€šè¿‡å­˜å‚¨æ€»çº¿è¿æ¥åˆ°å†…å­˜æ¡<ul>
<li>CPUéœ€è¦è®¿é—®æ§åˆ¶å™¨æ—¶ï¼š<ul>
<li>ç”³è¯·ç³»ç»Ÿæ€»çº¿ï¼Œè·å¾—æ€»çº¿æ§åˆ¶æƒåæŠŠåœ°å€å‘åˆ°æ§åˆ¶å™¨ä¸­</li>
</ul>
</li>
<li>æ§åˆ¶å™¨å¯¹åœ°å€åˆ†è§£å½¢æˆè¡Œåœ°å€å’Œåˆ—åœ°å€ï¼Œç„¶åå‘DRAMå‘èµ·è®¿å­˜æ“ä½œ<ul>
<li><ol>
<li>é¢„å……ç”µ</li>
</ol>
</li>
<li><ol start="2">
<li>è¡Œè®¿é—®:DRAMä¸­çš„è¡Œè¯‘ç èŠ¯ç‰‡ï¼Œé€‰å‡ºå¯¹åº”è¡Œï¼Œæ‰€æœ‰å•å…ƒçš„ä¿¡å·æ”¾å¤§åæ”¾åœ¨ä¸€ä¸ªç¼“å†²åŒº</li>
</ol>
</li>
<li><ol start="3">
<li>ç¼“å†²åŒºä¿¡å·ç¨³å®šåï¼Œæ‰èƒ½å‘å‡ºåˆ—åœ°å€ï¼Œå…¶ä¸­tRCDæ˜¯å†²è¡Œé€‰åˆ°åˆ—é€‰çš„å»¶è¿Ÿ</li>
</ol>
</li>
<li><ol start="4">
<li>åˆ—è¯‘ç å™¨æ¥å—åˆ°åˆ—åœ°å€åï¼Œä»ç¼“å†²åŒºè¯»å‡ºå¯¹åº”çš„åˆ—ï¼Œæ”¾åˆ°æ•°æ®æ¥å—æ¥å£ã€‚å…¶ä¸­ä»å‘å‡ºåˆ—åœ°å€åˆ°é€‰å‡ºå¯¹åº”å­˜å‚¨å•å…ƒçš„æ•°çš„è¿‡ç¨‹ç§°ä¸ºåˆ—è®¿é—®ï¼Œè¿™æ®µæ—¶é—´ç§°ä¸ºCL</li>
</ol>
</li>
</ul>
</li>
<li>å†…å­˜é€å‡ºæ•°æ®åï¼Œæ§åˆ¶å™¨é‡‡æ ·å¹¶é€åˆ°CPU<ul>
<li>å¦‚æœCPUçš„ä¸‹æ¬¡è¯·æ±‚æ˜¯åŒä¸€è¡Œï¼Œåˆ™æ§åˆ¶å™¨ä¸å†å‘é€è¡Œåœ°å€ï¼Œè€Œæ˜¯ç›´æ¥å‘é€åˆ—åœ°å€</li>
<li>å¦‚æœä¸‹æ¬¡è®¿é—®ä¸æ˜¯åŒä¸€è¡Œåˆ™éœ€æŠŠç¼“å†²åŒºçš„è¡Œå…³é—­ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±å«åš <strong>é¢„å……ç”µ</strong> </li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="ä¸»å­˜æŠ€æœ¯çš„å‘å±•"><a href="#ä¸»å­˜æŠ€æœ¯çš„å‘å±•" class="headerlink" title="ä¸»å­˜æŠ€æœ¯çš„å‘å±•"></a>ä¸»å­˜æŠ€æœ¯çš„å‘å±•</h3><ul>
<li>DDR:Double Data Rate<ul>
<li>æ—¶é’Ÿçš„ä¸Šå‡æ²¿å’Œä¸‹é™æ²¿éƒ½ä¼ è¾“</li>
</ul>
</li>
<li>SDR:Single Data Rate<ul>
<li>åªåœ¨æ—¶é’Ÿçš„ä¸Šå‡æ²¿ä¼ è¾“</li>
</ul>
</li>
</ul>
<p>building</p>
<h3 id="é«˜é€Ÿç¼“å­˜çš„å·¥ä½œåŸç†"><a href="#é«˜é€Ÿç¼“å­˜çš„å·¥ä½œåŸç†" class="headerlink" title="é«˜é€Ÿç¼“å­˜çš„å·¥ä½œåŸç†"></a>é«˜é€Ÿç¼“å­˜çš„å·¥ä½œåŸç†</h3><p>$$Cpu \leftrightarrow Cache \leftrightarrow Main Memory$$</p>
<ul>
<li>ç¨‹åºçš„å±€éƒ¨æ€§åŸç†:è®¡ç®—æœºç¨‹åºä»ç©ºé—´å’Œæ—¶é—´éƒ½è¡¨ç°å‡ºå±€éƒ¨æ€§<ul>
<li>æ—¶é—´å±€éƒ¨æ€§<ul>
<li>æœ€è¿‘è¢«è®¿é—®çš„å­˜å‚¨å™¨å•å…ƒ(æŒ‡ä»¤æˆ–æ•°æ®)å¾ˆå¿«ä¼šè¢«è®¿é—®</li>
</ul>
</li>
<li>ç©ºé—´å±€éƒ¨æ€§<ul>
<li>æ­£åœ¨è¢«è®¿é—®çš„å­˜å‚¨å™¨å•å…ƒé™„è¿‘çš„å•å…ƒå¾ˆå¿«ä¼šè¢«è®¿é—®åˆ°</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;<span class="number">10</span>; i++)&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>; j&lt;<span class="number">10</span>; i++)&#123;</span><br><span class="line">        sum+=a[i][j];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// iå¾ˆå¿«ä¼š(é¢‘ç¹)è¢«è®¿é—®</span></span><br><span class="line"><span class="comment">// aæ•°ç»„é™„ä»¶çš„å•å…ƒå¾ˆå¿«ä¼šè¢«è®¿é—®</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>cacheçš„åŸºæœ¬åŸç†</p>
<ul>
<li>cacheå¯¹ç©ºé—´å±€éƒ¨æ€§çš„åˆ©ç”¨<ul>
<li>ä»ä¸»å­˜ä¸­å–å›å¾…è®¿é—®æ•°æ®æ—¶ï¼Œä¼šåŒæ—¶å–å›ä¸ä½ç½®ç›¸é‚»çš„ä¸»å­˜å•å…ƒçš„æ•°æ®</li>
<li>ä»¥æ•°æ®å—(Block)ä¸ºå•ä½å’Œä¸»å­˜è¿›è¡Œæ•°æ®äº¤æ¢</li>
</ul>
</li>
<li>cacheå¯¹æ—¶é—´å±€éƒ¨æ€§çš„åˆ©ç”¨<ul>
<li>ä¿å­˜è¿‘æœŸé¢‘ç¹è¢«è®¿é—®çš„ä¸»å­˜å•å…ƒçš„æ•°æ®</li>
</ul>
</li>
<li>è¿™æ ·å¦‚æœcacheä¸­æœ‰æ•°æ®(cacheå‘½ä¸­)åˆ™ä»cacheä¸­è·å–</li>
</ul>
</li>
<li><p>cacheçš„å†™ç­–ç•¥</p>
<ul>
<li>cacheå‘½ä¸­æ—¶çš„å†™ç­–ç•¥<ul>
<li>å†™ç©¿é€ï¼šæ•°æ®åŒæ—¶å†™å…¥cacheå’Œä¸»å­˜</li>
<li>å†™è¿”å›ï¼šæ•°æ®åªå†™å…¥cacheï¼Œä»…å½“æ”¹æ•°æ®å—è¢«æ›¿æ¢æ—¶æ‰å†™å…¥ä¸»å­˜</li>
</ul>
</li>
<li>cacheå¤±æ•ˆæ—¶çš„å†™ç­–ç•¥<ul>
<li>å†™ä¸åˆ†é…ï¼šç›´æ¥å†™å…¥ä¸»å­˜</li>
<li>å†™åˆ†é…ï¼šå°†è¯¥æ•°æ®æ‰€åœ¨çš„å—è¯»å…¥cacheåï¼Œåœ¨å°†æ•°æ®å†™å…¥cacheï¼Œåˆ©ç”¨å±€éƒ¨æ€§åŸç†</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="é«˜é€Ÿç¼“å­˜çš„è®¾è®¡è¦ç‚¹"><a href="#é«˜é€Ÿç¼“å­˜çš„è®¾è®¡è¦ç‚¹" class="headerlink" title="é«˜é€Ÿç¼“å­˜çš„è®¾è®¡è¦ç‚¹"></a>é«˜é€Ÿç¼“å­˜çš„è®¾è®¡è¦ç‚¹</h3><ul>
<li>å¹³å‡è®¿å­˜æ—¶é—´(Average Memory Access Time)=Hit Time + Miss Penalty x Miss Rate<ul>
<li>Hit Timeï¼šå‘½ä¸­æ—¶é—´ï¼Œä»cacheå°†å‘½ä¸­æ•°æ®è¿”å›çš„æ—¶é—´</li>
<li>Miss Penaltyï¼šå¤±æ•ˆä»£ä»·ï¼Œä»ä¸»å­˜è¯»å–æ•°æ®å¹¶è¿”å›çš„æ—¶é—´</li>
<li>Miss Rateï¼šå¤±æ•ˆç‡ï¼Œæœªå‘½ä¸­çš„æ¦‚ç‡</li>
<li>é™ä½è®¿å­˜æ—¶é—´ä¸»è¦å°±æ˜¯é™ä½è¿™3ä¸ªå‚æ•°</li>
</ul>
</li>
<li>cacheå¤±æ•ˆçš„åŸå› <ul>
<li>ä¹‰åŠ¡å¤±æ•ˆï¼šç¬¬ä¸€æ¬¡è®¿é—®<ul>
<li>æ— æ³•é¿å…</li>
</ul>
</li>
<li>å®¹é‡å¤±æ•ˆï¼šæ— æ³•ä¿å­˜ç¨‹åºæ‰€éœ€çš„æ‰€æœ‰æ•°æ®å—<ul>
<li>å¯å¢åŠ cacheå®¹é‡ç¼“è§£ï¼Œä½†ä¼šå¢åŠ å‘½ä¸­æ—¶é—´</li>
</ul>
</li>
<li>å†²çªå¤±æ•ˆï¼šå¤šä¸ªå­˜å‚¨å™¨ä½ç½®æ˜ å°„åˆ°åŒä¸€ä¸ªcacheä½ç½®<ul>
<li>éœ€è¦ç²¾å¿ƒè®¾è®¡æ˜ å°„ç­–ç•¥</li>
</ul>
</li>
</ul>
</li>
<li>æ˜ å°„ç­–ç•¥<ul>
<li>ç›´æ¥æ˜ å°„</li>
<li>å¤šè·¯ç»„ç›¸è”(ç›¸å½“äºç”¨å‡ ä¸ªè¡¨æ¥ä¿å­˜ï¼Œä½†æ˜¯è¡¨è¶Šå¤šå°±è¦ç”¨è¶Šå¤æ‚çš„ç”µè·¯åˆ¤æ–­æ˜¯å¦åœ¨å…¶ä¸­ä¸€ä¸ªè¡¨ä¸­)</li>
<li>å¸¸è§çš„cacheæ›¿æ¢ç®—æ³•<ul>
<li>éšæœº</li>
<li>è½®æ¢</li>
<li>æœ€è¿‘æœ€å°‘ä½¿ç”¨(LRU)ï¼šæ•ˆæœæœ€å¥½ä½†è®¾è®¡å¤æ‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="å­˜å‚¨å™¨å®¹é‡çš„è®¡ç®—"><a href="#å­˜å‚¨å™¨å®¹é‡çš„è®¡ç®—" class="headerlink" title="å­˜å‚¨å™¨å®¹é‡çš„è®¡ç®—"></a>å­˜å‚¨å™¨å®¹é‡çš„è®¡ç®—</h3><table>
<thead>
<tr>
<th>&lt;++&gt;</th>
<th>&lt;++&gt;</th>
</tr>
</thead>
<tbody><tr>
<td>Ki:kibi</td>
<td>$1024^1$</td>
</tr>
<tr>
<td>Mi:mebi</td>
<td>$1024^2$</td>
</tr>
<tr>
<td>..</td>
<td>..</td>
</tr>
</tbody></table>
<h2 id="ä¸­æ–­å’Œå¼‚å¸¸"><a href="#ä¸­æ–­å’Œå¼‚å¸¸" class="headerlink" title="ä¸­æ–­å’Œå¼‚å¸¸"></a>ä¸­æ–­å’Œå¼‚å¸¸</h2><h3 id="ä¸­æ–­å‘é‡è¡¨çš„ç»“æ„"><a href="#ä¸­æ–­å‘é‡è¡¨çš„ç»“æ„" class="headerlink" title="ä¸­æ–­å‘é‡è¡¨çš„ç»“æ„"></a>ä¸­æ–­å‘é‡è¡¨çš„ç»“æ„</h3><p>ä¸åŒçš„ä¸­æ–­äº§ç”Ÿä¸åŒçš„ä¸­æ–­ç ï¼Œæ ¹æ®ä¸­æ–­å‘é‡è¡¨æŸ¥è¯¢å¾—åˆ°å¯¹åº”çš„å¤„ç†æ–¹æ³•ã€‚</p>
<ul>
<li>ä¸­æ–­å‘é‡ï¼šä¸­æ–­æœåŠ¡ç¨‹åºçš„å…¥å£åœ°å€</li>
<li>ä¸­æ–­å‘é‡è¡¨å­˜æ”¾åœ¨å›ºå®šçš„åœ°å€</li>
<li>å¤„ç†æ–¹æ³•ä¼šäº‹å…ˆå­˜æ”¾åœ¨ä¸­æ–­å‘é‡å¯¹åº”çš„åœ°å€å¤„</li>
</ul>
<h3 id="ä¸­æ–­çš„å¤„ç†è¿‡ç¨‹"><a href="#ä¸­æ–­çš„å¤„ç†è¿‡ç¨‹" class="headerlink" title="ä¸­æ–­çš„å¤„ç†è¿‡ç¨‹"></a>ä¸­æ–­çš„å¤„ç†è¿‡ç¨‹</h3><ul>
<li><ol>
<li>å…³ä¸­æ–­<ul>
<li>CPUå…³é—­ä¸­æ–­å“åº”ï¼Œä¸å†æ¥å—å…¶ä»–å¤–éƒ¨ä¸­æ–­è¯·æ±‚</li>
</ul>
</li>
</ol>
</li>
<li><ol start="2">
<li>ä¿å­˜æ–­ç‚¹<ul>
<li>å°†å‘é€ä¸­æ–­å¤„ç†çš„æŒ‡ä»¤å‹å…¥å †æ ˆï¼Œå¤„ç†å®Œåæ­£ç¡®è¿”å›</li>
</ul>
</li>
</ol>
</li>
<li><ol start="3">
<li>è¯†åˆ«ä¸­æ–­æº<ul>
<li>ç¡®å®šä¸­æ–­ç±»å‹å·ï¼Œä»è€Œæ‰¾åˆ°ç›¸åº”çš„ä¸­æ–­å¤„ç†ç¨‹åºçš„å…¥å£åœ°å€</li>
</ul>
</li>
</ol>
</li>
<li><ol start="4">
<li>ä¿å­˜ç°åœº<ul>
<li>ä¿å­˜æ­£åœ¨å¤„ç†çš„ç¨‹åº</li>
</ul>
</li>
</ol>
</li>
<li><ol start="5">
<li>æ‰§è¡Œä¸­æ–­æœåŠ¡ç¨‹åº<ul>
<li>è½¬åˆ°ä¸­æ–­æœåŠ¡ç¨‹åºå…¥å£å¼€å§‹æ‰§è¡Œï¼Œå¯åœ¨é€‚å½“çš„æ—¶åˆ»é‡æ–°å¼€æ”¾ä¸­æ–­ï¼Œä»¥ä¾¿å…è®¸ç›¸åº”è¾ƒé«˜ä¼˜å…ˆçº§çš„å¤–éƒ¨ä¸­æ–­</li>
<li>é‡æ–°å¼€æ”¾ç”±æ ‡è¯†å¯„å­˜å™¨æ§åˆ¶</li>
</ul>
</li>
</ol>
</li>
<li><ol start="6">
<li>æ¢å¤ç°åœº(8086ä¸ºä¾‹)<ul>
<li>IRETæŒ‡ä»¤(ä¸­æ–­è¿”å›)ï¼Œä»æ ˆé¡¶å¼¹å‡º3ä¸ªå­—åˆ†åˆ«é€å…¥IPã€CSå’ŒFLAGSå¯„å­˜å™¨</li>
<li>æ”¾åœ¨ä¸­æ–­æœåŠ¡ç¨‹åºçš„æœ«å°¾</li>
</ul>
</li>
</ol>
</li>
</ul>
<h3 id="åŸºäºä¸­æ–­çš„åŠŸèƒ½è°ƒç”¨"><a href="#åŸºäºä¸­æ–­çš„åŠŸèƒ½è°ƒç”¨" class="headerlink" title="åŸºäºä¸­æ–­çš„åŠŸèƒ½è°ƒç”¨"></a>åŸºäºä¸­æ–­çš„åŠŸèƒ½è°ƒç”¨</h3><ul>
<li>æŒ‡ä»¤<code>int N</code><ul>
<li>è°ƒç”¨nå·ä¸­æ–­,ç”±è¿è¡ŒæŒ‡ä»¤ä¸»åŠ¨è§¦å‘</li>
</ul>
</li>
</ul>
<h2 id="è¾“å…¥è¾“å‡ºè®¾å¤‡"><a href="#è¾“å…¥è¾“å‡ºè®¾å¤‡" class="headerlink" title="è¾“å…¥è¾“å‡ºè®¾å¤‡"></a>è¾“å…¥è¾“å‡ºè®¾å¤‡</h2><h3 id="è¾“å…¥è¾“å‡ºæ¥å£çš„åŸºæœ¬åŠŸèƒ½"><a href="#è¾“å…¥è¾“å‡ºæ¥å£çš„åŸºæœ¬åŠŸèƒ½" class="headerlink" title="è¾“å…¥è¾“å‡ºæ¥å£çš„åŸºæœ¬åŠŸèƒ½"></a>è¾“å…¥è¾“å‡ºæ¥å£çš„åŸºæœ¬åŠŸèƒ½</h3><ul>
<li>I/Oæ¥å£æ”¹çš„åŸºæœ¬åŠŸèƒ½<ul>
<li>æ•°æ®ç¼“å†²<ul>
<li>è§£å†³CPUå’Œå¤–è®¾ä¹‹é—´çš„é€Ÿåº¦å·®è·</li>
</ul>
</li>
<li>æä¾›è”ç»œä¿¡æ¯<ul>
<li>åè°ƒä¸åŒæ­¥æ•°æ®äº¤æ¢è¿‡ç¨‹</li>
</ul>
</li>
<li>ä¿¡å·ä¸ä¿¡æ¯æ ¼å¼çš„è½¬æ¢<ul>
<li>æ¨¡/æ•°ã€æ•°/æ¨¡äº¤æ¢ï¼Œä¸²/å¹¶ã€å¹¶/ä¸²äº¤æ¢ï¼Œç”µå¹³è½¬æ¢</li>
</ul>
</li>
<li>è®¾å¤‡é€‰æ‹©</li>
<li>ä¸­æ–­ç®¡ç†</li>
<li>å¯ç¼–ç¨‹åŠŸèƒ½</li>
</ul>
</li>
</ul>
<h3 id="è¾“å…¥è¾“å‡ºæ¥å£çš„ç¼–å€æ–¹å¼"><a href="#è¾“å…¥è¾“å‡ºæ¥å£çš„ç¼–å€æ–¹å¼" class="headerlink" title="è¾“å…¥è¾“å‡ºæ¥å£çš„ç¼–å€æ–¹å¼"></a>è¾“å…¥è¾“å‡ºæ¥å£çš„ç¼–å€æ–¹å¼</h3><ul>
<li>I/Oç«¯å£å’Œå­˜å‚¨å™¨åˆ†å¼€ç¼–å€<ul>
<li>I/Oæ˜ åƒçš„I/Oæ–¹å¼ï¼ŒI/O Mapped I/O</li>
<li>x86å°±æ˜¯è¿™ç§æ–¹å¼</li>
<li>I/OæŒ‡ä»¤<ul>
<li>INæŒ‡ä»¤<ul>
<li><code>IN AC, PORT</code></li>
<li>æŠŠå¤–è®¾ç«¯å£å†…å®¹è¾“å…¥åˆ°ALæˆ–AX</li>
</ul>
</li>
<li>OUTæŒ‡ä»¤<ul>
<li><code>OUT PORT, AC</code></li>
<li>æŠŠALæˆ–AXçš„å†…å®¹è¾“å‡ºåˆ°å¤–è®¾ç«¯å£</li>
</ul>
</li>
<li>ç«¯å£åœ°å€å°äº255æ—¶å¯ä»¥ç”¨ç«‹å³æ•°ï¼Œå¦åˆ™éœ€è¦å¯„å­˜å™¨</li>
</ul>
</li>
</ul>
</li>
<li>I/Oç«¯å£å’Œå­˜å‚¨å™¨ç»Ÿä¸€ç¼–å€<ul>
<li>å­˜å‚¨å™¨æ˜ åƒçš„I/Oæ–¹å¼ï¼ŒMemory Mapped I/O</li>
<li>MIPSå°±æ˜¯è¿™ç§æ–¹å¼</li>
<li>ä¼˜ç‚¹<ul>
<li>å¯ä»¥ç”¨è®¿é—®å­˜å‚¨å™¨çš„æŒ‡ä»¤è®¿é—®I/Oç«¯å£ï¼Œå¯ä»¥å®ç°ç›´æ¥å¯¹I/Oç«¯å£å†…çš„æ•°æ®è¿›è¡Œå¤„ç†</li>
<li>CPUä¸­çš„I/Oæ“ä½œä¸è®¿é—®å­˜å‚¨å™¨çš„æ“ä½œç»Ÿä¸€ä¸ºä¸€å¥—æ§åˆ¶é€»è¾‘ï¼Œç®€åŒ–å†…éƒ¨ç»“æ„ï¼Œå‡å°‘PCUå¼•è„šçš„æ•°ç›®</li>
</ul>
</li>
<li>ç¼ºç‚¹<ul>
<li>I/Oç«¯å£å ç”¨ä¸€éƒ¨åˆ†å­˜å‚¨å™¨åœ°å€ç©ºé—´ï¼Œä½¿å¾—å­˜å‚¨å™¨åœ°å€ç©ºé—´å‡å°</li>
<li>ç”±äºåˆ©ç”¨è®¿é—®å­˜å‚¨å™¨çš„æŒ‡ä»¤æ¥è¿›è¡ŒIOæ“ä½œï¼ŒæŒ‡ä»¤çš„é•¿åº¦é€šå¸¸æ¯”å•ç‹¬IOæŒ‡ä»¤è¦é•¿ï¼Œæ‰§è¡Œæ—¶é—´ä¹Ÿè¾ƒé•¿</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="è¾“å…¥è¾“å‡ºçš„æ§åˆ¶æ–¹å¼"><a href="#è¾“å…¥è¾“å‡ºçš„æ§åˆ¶æ–¹å¼" class="headerlink" title="è¾“å…¥è¾“å‡ºçš„æ§åˆ¶æ–¹å¼"></a>è¾“å…¥è¾“å‡ºçš„æ§åˆ¶æ–¹å¼</h3><ul>
<li>IOæ§åˆ¶æ–¹å¼çš„åˆ†ç±»<ul>
<li>ç¨‹åºæ§åˆ¶æ–¹å¼<ul>
<li>æ— æ¡ä»¶ä¼ é€æ–¹å¼<ul>
<li>å‡è®¾å¤–è®¾å·²ç»å‡†å¤‡å·</li>
<li>CPUç›´æ¥ä½¿ç”¨æŒ‡ä»¤ä¸å¤–è®¾ä¼ é€æ•°æ®</li>
<li>ä¸æŸ¥è¯¢å¤–è®¾çš„å·¥ä½œçŠ¶æ€</li>
</ul>
</li>
<li>ç¨‹åºæŸ¥è¯¢ä¼ é€æ–¹å¼<ul>
<li>CPUé€šè¿‡æŒ‡ä»¤ä¸€æ®µç¨‹åºï¼Œä¸æ–­æŸ¥è¯¢å¤–è®¾çš„å·¥ä½œçŠ¶æ€<ul>
<li>æ¡æ‰‹ä¿¡å·ï¼Œæ£€æŸ¥è¾“å…¥è¾“å‡ºç¼“å†²</li>
</ul>
</li>
<li>åœ¨å¤–è®¾å‡†å¤‡å°±ç»ªåè‰è¿›è¡Œæ•°æ®ä¼ é€</li>
<li>CPUçš„ä¸æ–­æŸ¥è¯¢æµªè´¹äº†å¾ˆå¤šèµ„æº</li>
</ul>
</li>
</ul>
</li>
<li>ä¸­æ–­æ§åˆ¶æ–¹å¼<ul>
<li>é€šè¿‡ä¸­æ–­çš„æ–¹å¼ï¼Œå°†æ•°æ®â€ä¸€å—ä¸€å—â€åœ°ä¼ é€ï¼Œå½“è¾“å…¥è¾“å‡ºç¼“å†²è¾¾åˆ°ä¸€å®šæ¡ä»¶æ—¶ï¼Œå¼•å‘ä¸­æ–­ï¼Œæé†’CPUçš„ç»§ç»­è¾“å…¥æˆ–è¯»å–ç­‰</li>
<li>ä¼˜ç‚¹<ul>
<li>CPUå¯å’Œå¤–è®¾å¹¶è¡Œå·¥ä½œ</li>
<li>å¤–å›´è®¾å¤‡å…·æœ‰ç”³è¯·çˆ¶äº²çš„ä¸»åŠ¨æƒ</li>
<li>ä¸€å®šç¨‹åº¦ä¸Šæ»¡è¶³äº†IOå¤„ç†çš„å®æ—¶æ€§è¦æ±‚</li>
</ul>
</li>
<li>ç¼ºç‚¹<ul>
<li>è¾“å…¥è¾“å‡ºçš„æ•°æ®ä»ç”±CPUæ‰¿æ‹…</li>
<li>è¿›å…¥å’Œé€€å‡ºä¸­æ–­å¢åŠ æ¶ˆè€—</li>
</ul>
</li>
</ul>
</li>
<li>ç›´æ¥å­˜å‚¨å™¨è®¿é—®(DMA)æ–¹å¼<ul>
<li>å‰é¢çš„æ–¹å¼çš„å…±åŒç¡®å®šæ˜¯æ•°æ®ä¼ è¾“ä»ç”±CPUæ‰¿æ‹…ï¼Œä½†æ˜¯å¦‚æœæ˜¯æ˜¾ç¤ºå™¨ï¼Œç½‘ç»œç­‰éœ€è¦å¤§é‡æ•°æ®ä¼ è¾“çš„è®¾å¤‡å°±éš¾ä»¥åº”å¯¹äº†</li>
<li>Direct Memory Access(DMA)<ul>
<li>æ•°æ®ä¼ é€è¿‡ç¨‹ä¸éœ€è¦CPUå¹²é¢„(ä¸éœ€è¦æŒ‡ä»¤ç¨‹åºæŒ‡ä»¤)</li>
<li>ç”±ä¸“é—¨çš„ç¡¬ä»¶æ§åˆ¶ç”µè·¯æ§åˆ¶ï¼Œè¿›è¡Œå¤–è®¾ä¸å­˜å‚¨å™¨é—´ç›´æ¥æ•°æ®ä¼ é€</li>
<li>è¯¥ä¸“é—¨ç¡¬ä»¶æ§åˆ¶ç”µè·¯ç§°ä¸ºDMAæ§åˆ¶å™¨ï¼Œç®€ç§°DMAC</li>
</ul>
</li>
<li>DMACçš„åŸºæœ¬å·¥ä½œæ­¥éª¤(ä»¥ä½¿ç”¨ç‹¬ç«‹DMACè¿›è¡Œå¤–è®¾åˆ°å†…å­˜ä¼ é€ä¸ºä¾‹)<ul>
<li><ol>
<li>CPUè®¾ç½®DMACå†…éƒ¨é…ç½®å¯„å­˜å™¨<ul>
<li>æºåœ°å€çš„åˆå§‹å€¼ä»¥åŠä¼ é€æ˜¯çš„åœ°å€å¢å‡æ–¹å¼</li>
<li>ç›®çš„åœ°å€çš„åˆå§‹å€¼ä»¥åŠä¼ é€æ˜¯çš„åœ°å€å¢å‡æ–¹å¼</li>
<li>å¾…ä¼ é€æ•°æ®çš„é•¿åº¦</li>
</ul>
</li>
</ol>
</li>
<li><ol start="2">
<li>DMACå¤„äºç©ºé—²ç­‰å¾…çŠ¶æ€</li>
</ol>
</li>
<li><ol start="3">
<li>IOæ¥å£å‘DMACä¼ é€ç”³è¯·</li>
</ol>
</li>
<li><ol start="4">
<li>DMACå“åº”IOæ¥å£çš„ç”³è¯·</li>
</ol>
</li>
<li><ol start="5">
<li>DMACå‘IOæ¥å£å‘èµ·æ€»çº¿è¯»ä¼ è¾“</li>
</ol>
</li>
<li><ol start="6">
<li>DMACå‘å­˜å‚¨å™¨å‘èµ·æ€»çº¿å†™ä¼ è¾“</li>
</ol>
</li>
<li><ol start="7">
<li>é‡å¤5ï½6ç›´åˆ°æœ¬æ¬¡DMAä¼ é€å®Œæˆ</li>
</ol>
</li>
<li><ol start="8">
<li>è¿”å›2ï¼Œç­‰å¾…ä¸‹ä¸€æ¬¡DMAä¼ é€ç”³è¯·</li>
</ol>
</li>
</ul>
</li>
<li>é€šå¸¸ï¼ŒDMAä¼ é€å®ŒæˆåDMACä¼šé€šè¿‡ä¸­æ–­ä¿¡å·é€šçŸ¥CPU</li>
</ul>
</li>
</ul>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/11/26/Major/algorithm/arithmetic/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Travis TuRing">
      <meta itemprop="description" content="Mens et Manus">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ring's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/11/26/Major/algorithm/arithmetic/" class="post-title-link" itemprop="url">ç®—æ³•å­¦ä¹ </a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-11-26 00:00:00" itemprop="dateCreated datePublished" datetime="2019-11-26T00:00:00+08:00">2019-11-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-10-29 22:29:31" itemprop="dateModified" datetime="2020-10-29T22:29:31+08:00">2020-10-29</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="æ’åº"><a href="#æ’åº" class="headerlink" title="æ’åº"></a>æ’åº</h1><h3 id="å†’æ³¡æ’åº"><a href="#å†’æ³¡æ’åº" class="headerlink" title="å†’æ³¡æ’åº"></a>å†’æ³¡æ’åº</h3><ul>
<li>æ¯”è¾ƒå¤§å°,å¦‚æœç¬¦åˆæ¡ä»¶(å‡åº)å°±äº¤æ¢ä¸¤ä¸ªå…ƒç´ çš„ä½ç½®  <ul>
<li>æ¯æ¬¡æ‰§è¡ŒN-1æ¬¡</li>
<li>ä¸¥æ ¼å¤§/å°,ä¿è¯äº†åŸåº(ç¨³å®šæ€§)</li>
<li>æ²¡æ¬¡èƒ½ä¿è¯æœ€å¤§/æœ€å°çš„å…ƒç´ ä¼šåœ¨æœ€å</li>
</ul>
</li>
<li>å¦‚æœå…¨ç¨‹æ— äº¤æ¢,åˆ™è¯´æ˜æœ‰åºäº†,è·³å‡ºå³å¯</li>
<li>$T=O(x),x\in(N,N^2)$</li>
</ul>
<h3 id="æ’å…¥æ’åº"><a href="#æ’å…¥æ’åº" class="headerlink" title="æ’å…¥æ’åº"></a>æ’å…¥æ’åº</h3><ul>
<li>æ¯æ¬¡æŠ½å–ä¸€ä¸ªå…ƒç´ ,ç„¶åä»åºåˆ—æœ«å°¾å¼€å§‹è¿›è¡Œæ¯”è¾ƒ</li>
<li>è‹¥ç¬¦åˆæ¡ä»¶,å¾€åç§»ä½,ç›´åˆ°ä¸ç¬¦åˆæ¡ä»¶è·³å‡º</li>
<li>ç„¶åæ’å…¥å…ƒç´ </li>
</ul>
<h4 id="å¸Œå°”æ’åº"><a href="#å¸Œå°”æ’åº" class="headerlink" title="å¸Œå°”æ’åº"></a>å¸Œå°”æ’åº</h4><p>å¯¹æ’å…¥æ’åºçš„æ”¹è¿›,æ¯æ¬¡æ¶ˆé™¤å¤šä¸ªé€†åºå¯¹ä»¥è¾¾åˆ°åŠ é€Ÿçš„æ•ˆæœ  </p>
<ul>
<li>æŒ‰ç…§ä¸€å®šå¢é‡åºåˆ—,æ¯æ¬¡è¿›è¡ŒDæ’åº $D_N &gt; D_{N-1}â€¦&gt;D_1$ ,è¿™æ ·ä¸€æ¥ä¸€è¶Ÿå°±æœ‰å¯èƒ½æ¶ˆé™¤å¤šä¸ªé€†åºå¯¹<ul>
<li>æŒ‰ç…§$D_N &gt; D_{N-1}â€¦&gt;D_1$è¿›è¡Œæ’åº,åä¸€æ¬¡ä¼šä¿æŒå‰ä¸€æ¬¡çš„é¡ºåº,æ•…å¯ç”¨</li>
<li>ä½†æœ€ç»ˆéƒ½è¦è¿›è¡Œ1æ’åº</li>
</ul>
</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(D=N/<span class="number">2</span>;D&gt;<span class="number">0</span>;D/=<span class="number">2</span>)&#123;  <span class="comment">// å¸Œå°”å¢é‡åºåˆ—ã€‚Hibbardå¢é‡åºåˆ—:Dk=2^k-1...ç­‰ç­‰</span></span><br><span class="line">    <span class="keyword">for</span>(p=D;p&lt;N;p++)&#123;  <span class="comment">// æ’å…¥æ’åº</span></span><br><span class="line">        Tmp = A[p];</span><br><span class="line">        <span class="keyword">for</span>(i=p;i&gt;=D&amp;&amp;A[i-D]&gt;Tmp;i-=D)&#123;</span><br><span class="line">            A[i] = A[i-D];</span><br><span class="line">        &#125;</span><br><span class="line">        A[i] = Tmp;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="å †æ’åº"><a href="#å †æ’åº" class="headerlink" title="å †æ’åº"></a>å †æ’åº</h3><h4 id="å°-å¤§é¡¶å †"><a href="#å°-å¤§é¡¶å †" class="headerlink" title="å°/å¤§é¡¶å †"></a>å°/å¤§é¡¶å †</h4><p>å­èŠ‚ç‚¹æ¯”çˆ¶èŠ‚ç‚¹å°/å¤§çš„äºŒå‰æ ‘  </p>
<p><strong>æ„å»ºæ–¹æ³•</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ³•ä¸€ï¼šä¸Šæµ®ä¸‹æ²‰æ³•(å°é¡¶å †ä¸ºä¾‹)</span></span><br><span class="line"><span class="comment">// ä»ç¬¬ä¸€ä¸ªéå¶å­èŠ‚ç‚¹å¼€å§‹ï¼Œä»¥å®ƒä¸ºå­æ ‘ï¼Œå…ˆè‡ªä¸‹è€Œä¸ŠæŠŠå°çš„èŠ‚ç‚¹ä¸Šæµ®ï¼Œåˆ°è¾¾å­æ ‘æ ¹èŠ‚ç‚¹åè‡ªä¸Šè€Œä¸‹æŠŠå¤§çš„èŠ‚ç‚¹ä¸‹æ²‰</span></span><br><span class="line"><span class="comment">// çŸ¥é“æ ¹èŠ‚ç‚¹ç»“æŸ</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">createHeap</span><span class="params">(<span class="keyword">int</span> *heap,<span class="keyword">int</span> len)</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=len/<span class="number">2</span><span class="number">-1</span>;j&gt;=<span class="number">0</span>;j--)&#123;</span><br><span class="line">        <span class="keyword">int</span> t = j;</span><br><span class="line">        <span class="keyword">while</span>((t+<span class="number">1</span>)*<span class="number">2</span>&lt;=len)&#123;</span><br><span class="line">            <span class="keyword">int</span> <span class="built_in">min</span> = (t+<span class="number">1</span>)*<span class="number">2</span><span class="number">-1</span>;</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">min</span>+<span class="number">1</span>&lt;len)&#123;</span><br><span class="line">                <span class="keyword">if</span>(heap[<span class="built_in">min</span>+<span class="number">1</span>]&lt;heap[<span class="built_in">min</span>])&#123;</span><br><span class="line">                    <span class="built_in">min</span>++; </span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(heap[<span class="built_in">min</span>]&lt;heap[t])&#123;</span><br><span class="line">                swop(<span class="built_in">min</span>,t,heap);</span><br><span class="line">                t = <span class="built_in">min</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ³•äºŒï¼šæ’å…¥æ³•</span></span><br><span class="line"><span class="comment">// ä»æ ¹èŠ‚ç‚¹å‡ºå‘ï¼Œè‹¥çˆ¶èŠ‚ç‚¹æ¯”æ’å…¥å…ƒç´ å¤§ï¼Œåˆ™è°ƒæ•´ä½ç½®ï¼Œå¦‚æ­¤å¾ªç¯ï¼Œä¿è¯çˆ¶èŠ‚ç‚¹å°äºå­èŠ‚ç‚¹</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">createHeap</span><span class="params">(<span class="keyword">int</span> *heap,<span class="keyword">int</span> len)</span></span>&#123;</span><br><span class="line">    heap[<span class="number">0</span>] = <span class="number">-1000</span>;</span><br><span class="line">    <span class="keyword">int</span> temp;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=len;i++)&#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;temp);</span><br><span class="line">        <span class="keyword">int</span> j;</span><br><span class="line">        <span class="keyword">for</span>(j=i;heap[j/<span class="number">2</span>]&gt;temp;j/=<span class="number">2</span>)&#123;</span><br><span class="line">            heap[j] = heap[j/<span class="number">2</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        heap[j] = temp;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h4 id="åˆ©ç”¨å°-å¤§é¡¶å †æ’åº"><a href="#åˆ©ç”¨å°-å¤§é¡¶å †æ’åº" class="headerlink" title="åˆ©ç”¨å°/å¤§é¡¶å †æ’åº"></a>åˆ©ç”¨å°/å¤§é¡¶å †æ’åº</h4><ul>
<li>æ ¹æ®å°/å¤§é¡¶å †çš„æ€§è´¨ï¼Œå¯ä»¥ç¡®å®šé¡¶éƒ¨ä¸€å®šæ˜¯æœ€å¤§æˆ–æœ€å°çš„å…ƒç´ </li>
<li>äº¤æ¢æ ¹èŠ‚ç‚¹å’Œæœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼Œé‚£ä¹ˆæœ€åä¸€ä¸ªèŠ‚ç‚¹ä¸€å®šæ˜¯æœ€å¤§/æœ€å°</li>
<li>æŠŠæœ€åçš„èŠ‚ç‚¹æ’é™¤ï¼Œå‰©ä¸‹èŠ‚ç‚¹æ„æˆçš„å­æ ‘å†è°ƒæ•´æˆå°/å¤§é¡¶å †ï¼Œé‡å¤ä»¥ä¸Šæ­¥éª¤</li>
</ul>
<h3 id="å¿«é€Ÿæ’åºç®—æ³•"><a href="#å¿«é€Ÿæ’åºç®—æ³•" class="headerlink" title="å¿«é€Ÿæ’åºç®—æ³•"></a>å¿«é€Ÿæ’åºç®—æ³•</h3><p>é€šè¿‡ä¸€è¶Ÿæ’åºå°†è¦æ’åºçš„æ•°æ®åˆ†å‰²æˆç‹¬ç«‹çš„ä¸¤éƒ¨åˆ†ï¼Œå…¶ä¸­ä¸€éƒ¨åˆ†çš„æ‰€æœ‰æ•°æ®éƒ½æ¯”å¦å¤–ä¸€éƒ¨åˆ†çš„æ‰€æœ‰æ•°æ®éƒ½è¦å°ï¼Œç„¶åå†æŒ‰æ­¤æ–¹æ³•å¯¹è¿™ä¸¤éƒ¨åˆ†æ•°æ®åˆ†åˆ«è¿›è¡Œå¿«é€Ÿæ’åºï¼Œæ•´ä¸ªæ’åºè¿‡ç¨‹å¯ä»¥é€’å½’è¿›è¡Œï¼Œä»¥æ­¤è¾¾åˆ°æ•´ä¸ªæ•°æ®å˜æˆæœ‰åºåºåˆ—    </p>
<ul>
<li>å…ˆä»æ•°åˆ—ä¸­å–å‡ºä¸€ä¸ªæ•°ä½œä¸ºä¸»å…ƒ<ul>
<li>ä¸»å…ƒé€‰ä¸å¥½ä¼šå½±å“é€Ÿåº¦</li>
<li>æ³•1.é€‰å¤´,ä¸­,å°¾ä¸‰ä¸ªæ•°çš„ä¸­ä½æ•°åšä¸»å…ƒ</li>
</ul>
</li>
<li>åˆ†åŒºè¿‡ç¨‹ï¼Œäº¤æ›¿ç§»åŠ¨ï¼Œå°†æ¯”è¿™ä¸ªæ•°å¤§çš„æ•°å…¨æ”¾åˆ°å®ƒçš„å³è¾¹ï¼Œå°äºæˆ–ç­‰äºå®ƒçš„æ•°å…¨æ”¾åˆ°å®ƒçš„å·¦è¾¹</li>
<li>å†å¯¹å·¦å³åŒºé—´é‡å¤ç¬¬äºŒæ­¥ï¼Œç›´åˆ°å„åŒºé—´åªæœ‰ä¸€ä¸ªæ•°</li>
</ul>
<h3 id="æ“‚å°æ³•"><a href="#æ“‚å°æ³•" class="headerlink" title="æ“‚å°æ³•"></a>æ“‚å°æ³•</h3><ul>
<li>é€‚ç”¨äºæ‰¾æœ€å€¼</li>
</ul>
<h3 id="å½’å¹¶æ³•"><a href="#å½’å¹¶æ³•" class="headerlink" title="å½’å¹¶æ³•"></a>å½’å¹¶æ³•</h3><ul>
<li>æŠŠä¸¤ä¸ªæœ‰åºçš„åºåˆ—åˆå¹¶</li>
<li>æ³•1.é€’å½’çš„è¿›è¡Œä¸‹å»(æœ‰ç‚¹ç±»ä¼¼å¿«é€Ÿæ’åº)</li>
<li>æ³•2.æ¯ä¸ªå…ƒç´ çœ‹æˆä¸€æ®µåºåˆ—,åˆå¹¶åˆå¹¶â€¦</li>
<li>$T=N\log{N}$</li>
<li>ç¼ºç‚¹:éœ€è¦å¼€é¢å¤–ä¸€ä»½ç©ºé—´</li>
</ul>
<h2 id="æ‹“æ‰‘æ’åº"><a href="#æ‹“æ‰‘æ’åº" class="headerlink" title="æ‹“æ‰‘æ’åº"></a>æ‹“æ‰‘æ’åº</h2><h3 id="AOV-activity-on-vertex"><a href="#AOV-activity-on-vertex" class="headerlink" title="AOV(activity on vertex)"></a>AOV(activity on vertex)</h3><p>èŠ‚ç‚¹ä»£è¡¨äº‹ä»¶<br>è‹¥våˆ°wè¿é€š,åˆ™vä¸€å®šåœ¨wçš„å‰é¢  </p>
<ul>
<li>æœ‰å‘å›¾</li>
<li>æœ‰ä¼˜å…ˆçº§é™åˆ¶<br>æŒ‰ç…§æ­¤æ³•è¾“å‡ºå°±æ˜¯æ‹“æ‰‘æ’åº  </li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Queuezero Q;   <span class="comment">// å‚¨å­˜å…¥åº¦ä¸ºé›¶çš„,å³å‰å¤´æ²¡æœ‰é™åˆ¶äº†çš„</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;|V|;i++)&#123;    <span class="comment">// è®°å½•æœ€å…ˆçš„å…¥åº¦ä¸º0çš„èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">if</span>(indegree[V]==<span class="number">0</span>)&#123;</span><br><span class="line">        Enqueue(V,Q);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">while</span>(!isEmpty(Q))&#123;</span><br><span class="line">    V = Dequeue(Q);  <span class="comment">//cnt++,è®°å½•æˆ–è€…è¾“å‡ºä»€ä¹ˆçš„(æ‹“æ‰‘æ’åº)</span></span><br><span class="line">    <span class="keyword">for</span>(Vçš„æ¯ä¸ªé‚»æ¥ç‚¹W)&#123;</span><br><span class="line">        indegree(W)--;</span><br><span class="line">        <span class="keyword">if</span>(degree(w)==<span class="number">0</span>)&#123;</span><br><span class="line">            Enqueue(W,Q);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(cnt!=|V|)</span><br><span class="line">    å›¾æœ‰å›è·¯,æ— æ³•æ‹“æ‰‘æ’åº</span><br></pre></td></tr></table></figure>


<h3 id="AOE-activity-on-edge"><a href="#AOE-activity-on-edge" class="headerlink" title="AOE(activity on edge)"></a>AOE(activity on edge)</h3><p>ä¾‹:å…³é”®è·¯å¾„é—®é¢˜  </p>
<h3 id="è¡¨æ’åº"><a href="#è¡¨æ’åº" class="headerlink" title="è¡¨æ’åº"></a>è¡¨æ’åº</h3><p>å½“ç§»åŠ¨çš„æˆæœ¬å¾ˆé«˜æ—¶(å¦‚ç§»åŠ¨ä¸€éƒ¨ç”µå½±)å°±ç”¨è¡¨æ¥å‚¨å­˜ä»–çš„é¡ºåº</p>
<ul>
<li>table[N]æŒ‡å‘N,æ•…ç”¨table[N]è¿›è¡Œè®¿é—®\æ’åº</li>
</ul>
<h3 id="æ¡¶æ’åº"><a href="#æ¡¶æ’åº" class="headerlink" title="æ¡¶æ’åº"></a>æ¡¶æ’åº</h3><p>åŸºæœ¬åŸç†:å‡å¦‚æœ‰10ä¸ªæ•°åˆ†åˆ«æ˜¯0<del>9è®©ä½ æ’åº,é‚£å»ºç«‹10ä¸ªæ¡¶ar[10],æ ¹æ®æƒ…å†µ0</del>9æ”¾åˆ°å¯¹åº”çš„æ¡¶äº†,æœ€åé¡ºåºè¾“å‡ºæ¡¶å°±æ˜¯æœ‰åºçš„äº†</p>
<h4 id="LSD-Least-Significant-Digit-æ¬¡ä½ä¼˜å…ˆ"><a href="#LSD-Least-Significant-Digit-æ¬¡ä½ä¼˜å…ˆ" class="headerlink" title="LSD(Least Significant Digit)æ¬¡ä½ä¼˜å…ˆ"></a>LSD(Least Significant Digit)æ¬¡ä½ä¼˜å…ˆ</h4><p>æ’10ä¸ªåœ¨0~999çš„æ•´æ•°éš¾é“è¦å»º1000ä¸ªæ¡¶å—ï¼Ÿ</p>
<ul>
<li>æ ¹æ®ä½ä½åˆ°é«˜ä½å»ºé€š(å®é™…æƒ…å†µè‚¯æ›´æŠ½è±¡)<ul>
<li>è¿™é‡Œæ˜¯ä»ä¸ªä½åˆ°ç™¾ä½,æ²¡ä½ç½®å»º10æ¡¶</li>
<li>ä¸ªä½æ¡¶å»ºè£…å¥½åå†éå†æ¡¶,è£…åä½çš„æ¡¶,ä»¥æ­¤ç±»æ¨</li>
<li>å› ä¸ºæ˜¯éå†æœ‰åºæ¡¶æ¥å¡«å…¥æ–°æ¡¶çš„,æ‰€ä»¥æœ€åçš„æ¡¶åªéœ€æŒ‰é¡ºåºè¾“å‡ºå°±æ˜¯æœ‰åºäº†</li>
</ul>
</li>
</ul>
<h2 id="BFPRTç®—æ³•ï¼šæ±‚æ— åºæ•°ç»„ä½kå°-å¤§çš„æ•°"><a href="#BFPRTç®—æ³•ï¼šæ±‚æ— åºæ•°ç»„ä½kå°-å¤§çš„æ•°" class="headerlink" title="BFPRTç®—æ³•ï¼šæ±‚æ— åºæ•°ç»„ä½kå°/å¤§çš„æ•°"></a>BFPRTç®—æ³•ï¼šæ±‚æ— åºæ•°ç»„ä½kå°/å¤§çš„æ•°</h2><p>æ€è·¯ç±»ä¼¼äºpartitionå¿«é€Ÿæ’åºï¼Œä¸‹æ ‡å°±èƒ½è¯´æ˜èŒƒå›´æ˜¯ç¬¬å‡ ï¼Œå°äºæ”¾å·¦è¾¹å¤§äºæ”¾å³è¾¹ï¼Œç„¶åèŒƒå›´åªéœ€è¦å…³æ³¨å·¦è¾¹æˆ–è€…å³è¾¹ã€‚</p>
<p>ä½†æ˜¯å¦‚æœæ˜¯ç®€å•çš„åŸºäºå¿«é€Ÿæ’åºï¼Œéšæœºé€‰ä¸€ä¸ªåˆ’åˆ†å€¼ï¼Œå¤æ‚åº¦çš„å˜æ•°å°±æ¯”è¾ƒå¤§ï¼Œå³å¦‚æœæ¯æ¬¡é€‰ä¸­çš„åˆ’åˆ†å€¼éƒ½æ˜¯æœ€å°æˆ–æœ€å¤§ï¼Œé‚£ä¹ˆå‰©ä¸‹è¿˜å¾—å…³æ³¨len-1çš„æ•°ã€‚æ•ˆç‡ä¸é«˜ã€‚</p>
<ul>
<li><code>bfprt(vector&lt;int&gt; arr, int kf)</code><ul>
<li><ol>
<li>æ•´ä¸ªæ•°ç»„å…ˆåˆ†ç»„<ul>
<li>BFPRTå‘æ˜è€…æ˜¯5ä¸ªäººï¼Œæ‰€ä»¥ä¸€èˆ¬5ä¸ªä¸€ç»„ï¼Œä¸è¶³5ä¸ªå°±æ˜¯å•ç‹¬ä¸€ç»„</li>
</ul>
</li>
</ol>
</li>
<li><ol start="2">
<li>æ¯ä¸ªå°ç»„ä¸­æ’åº</li>
</ol>
</li>
<li><ol start="3">
<li>å–å‡ºæ¯ä¸ªç»„çš„ä¸­ä½æ•°ï¼Œæ„æˆä¸€ä¸ªæ–°çš„ç»„ï¼Œå¶æ•°ä¸ªå°±å–ä¸Šä¸­æ•°æˆ–ä¸‹ä¸­æ•°ï¼Œå¾—åˆ°ä¸€ä¸ªN/5é•¿åº¦çš„æ–°æ•°ç»„</li>
</ol>
</li>
<li><ol start="4">
<li>é€’å½’è°ƒç”¨<code>num = bfprt(arr, k)</code>æ‹¿åˆ°ä¸­ä½æ•°ï¼ŒæŠŠä¸Šé¢å¾—åˆ°çš„æ•°ç»„å’Œ<code>new_arr.size()/2</code>ä¼ å…¥</li>
</ol>
</li>
<li><ol start="5">
<li>ç”¨ä¸Šä¸€æ­¥æ‹¿åˆ°çš„ä¸­ä½æ•°è¿›è¡Œåˆ’åˆ†</li>
</ol>
</li>
</ul>
</li>
</ul>
<hr>
<h1 id="æŸ¥æ‰¾"><a href="#æŸ¥æ‰¾" class="headerlink" title="æŸ¥æ‰¾"></a>æŸ¥æ‰¾</h1><h3 id="æ•£åˆ—-hash-æŸ¥æ‰¾"><a href="#æ•£åˆ—-hash-æŸ¥æ‰¾" class="headerlink" title="æ•£åˆ—(hash)æŸ¥æ‰¾"></a>æ•£åˆ—(hash)æŸ¥æ‰¾</h3><p>æŠŠå…³é”®è¯çœ‹æˆå˜é‡,é€šè¿‡å“ˆå¸Œå‡½æ•°è¿ç®—èµ‹äºˆåœ°å€</p>
<h4 id="æ’å…¥"><a href="#æ’å…¥" class="headerlink" title="æ’å…¥"></a>æ’å…¥</h4><p>å…³é”®è¯æ˜¯æ•°å­—æ—¶çš„å¸¸è§æ–¹æ³•</p>
<ul>
<li>æŠ˜å æ³•</li>
<li>å¹³æ–¹å–ä¸­æ³•</li>
<li>æ•°å­—åˆ†ææ³•</li>
<li>é™¤ç•™ä½™æ•°æ³•</li>
</ul>
<p>å…³é”®è¯æ˜¯å­—ç¬¦æ—¶çš„å¸¸è§æ–¹æ³•</p>
<ul>
<li>ä½ç§»æ³•(å˜æˆæ•´æ•°ç§»ä½&lt;&lt;æ±‚ä½™)</li>
</ul>
<p><strong>æ ¸å¿ƒæ€æƒ³å°±æ˜¯å½“ä¸€ä½æ”¹å˜æ—¶å°½å¯èƒ½å¤šçš„å½±å“ä½æ•°,é¿å…æµªè´¹</strong></p>
<h4 id="å¤„ç†å†²çª"><a href="#å¤„ç†å†²çª" class="headerlink" title="å¤„ç†å†²çª"></a>å¤„ç†å†²çª</h4><p>äº§ç”Ÿå†²çªå°±æ·»åŠ åç§»é‡åˆ°åˆ«çš„ä½ç½®  </p>
<ul>
<li>çº¿æ€§æ¢æµ‹<ul>
<li>åç§»é‡æ˜¯ä¸€å¢é‡åºåˆ—: 1.2.3.4â€¦</li>
<li>å®¹æ˜“äº§ç”Ÿèšé›†</li>
</ul>
</li>
<li>å¹³æ–¹æ¢æµ‹<ul>
<li>åç§»é‡æ˜¯ä¸€å¢é‡åºåˆ—: 1^2.2^2.3^2.4^2â€¦</li>
<li>å®¹æ˜“äº§ç”Ÿæ­»å¾ªç¯<ul>
<li>å®šç†:æ•£åˆ—è¡¨é•¿æ˜¯æŸä¸ª4k+3çš„ç´ æ•°æ—¶,ä¸€å®šèƒ½æ¢æµ‹æ•´ä¸ªè¡¨</li>
</ul>
</li>
</ul>
</li>
<li>åŒæ•£åˆ—æ¢æµ‹<ul>
<li>$d_i = i\times h_2(kay)$</li>
<li>$h_2(key)=p-(key mod p)$ æ•ˆæœæœ€å¥½</li>
</ul>
</li>
<li>å†æ•£åˆ—<ul>
<li>è£…å¡«å› å­å¤ªå¤§æ˜¯æŸ¥æ‰¾æ•ˆç‡ä¸‹é™</li>
<li>é‚£å°±æ‰©å¤§æ•£åˆ—è¡¨,åœ¨æŠŠåŸæ¥çš„å…ƒç´ æ¬è¿›å»</li>
</ul>
</li>
<li>åˆ†ç¦»é“¾æ¥æ³•<ul>
<li>æœ‰å†²çªçš„å…³é”®å­—éƒ½æ”¾åœ¨(åŒä¸€ä¸ªå…³é”®å­—çš„)ä¸€ä¸ªé“¾è¡¨ä¸­</li>
</ul>
</li>
</ul>
<p><strong>åˆ é™¤æ—¶ä¸èƒ½ç›´æ¥åˆ é™¤,ä¼šå½±å“åç»­çš„æŸ¥æ‰¾ã€‚æ­£ç¡®çš„åˆ é™¤æ˜¯æ ‡è®°ä¸ºåˆ é™¤,æ–°çš„å…ƒç´ æ¥æ—¶å†æ›¿æ¢</strong></p>
<h3 id="KMPç®—æ³•"><a href="#KMPç®—æ³•" class="headerlink" title="KMPç®—æ³•"></a>KMPç®—æ³•</h3><p><strong>è¦ç‚¹ï¼š</strong> </p>
<ul>
<li>å‰ç¼€è¡¨next(æˆ–è€…è¯´match)å‡½æ•°çš„åˆ›å»º</li>
<li>åŠ¨æ€è§„åˆ’</li>
</ul>
<p>åˆ©ç”¨å‰ç¼€è¡¨çš„åŸç†ï¼šå¯¹äºä¸€ä¸ªå­ä¸²(å¦‚ï¼šababc)ï¼Œæ‰€æœ‰å¯èƒ½çš„å‰ç¼€:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">a</span><br><span class="line">a b</span><br><span class="line">a b a</span><br><span class="line">a b a b</span><br><span class="line">a b a b c</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬éœ€è¦æ‰¾å‡ºæ¯ç§å¯èƒ½ä¸­æœ€é•¿çš„ã€éæœ¬èº«çš„å…¬å…±å‰åç¼€ï¼Œå› ä¸ºå¦‚æœå‰åç¼€ç›¸åŒçš„è¯ï¼Œå½“åç¼€å¤±å»åŒ¹é…æ—¶ï¼Œå¯ä»å‰ç¼€ç»“æŸçš„åœ°æ–¹å¼€å§‹åŒ¹é…ï¼Œè€Œä¸æ˜¯ä»å¤´å¼€å§‹ã€‚</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">a               null    <span class="number">0</span></span><br><span class="line">a b             null    <span class="number">0</span></span><br><span class="line">a b a           a       <span class="number">1</span></span><br><span class="line">a b a b         ab      <span class="number">2</span></span><br><span class="line">a b a b c       null    <span class="number">0</span>  &lt;ä¸€èˆ¬å‰”é™¤å­—ç¬¦ä¸²æœ¬èº«,åœ¨å¼€å¤´å¡«<span class="number">-1</span></span><br><span class="line"></span><br><span class="line">è¿™äº›æœ€é•¿å…¬å…±å‰åç¼€çš„é•¿åº¦å°±æ„æˆäº†å‰ç¼€è¡¨</span><br><span class="line"> a b a b c</span><br><span class="line"><span class="number">-1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">2</span></span><br><span class="line">è¿™æ ·å°±è¡¨ç¤ºäº†å½“ï¼Œstr[j]å¤±å»åŒ¹é…æ—¶ï¼Œä»match[j](å‰ç¼€ç»“æŸçš„åœ°æ–¹)å°è¯•åŒ¹é…</span><br></pre></td></tr></table></figure>

<p><strong>å‰ç¼€è¡¨å¦‚ä½•åˆ›å»º</strong></p>
<ul>
<li>å¯å°†åˆ›å»ºä¸€ä¸ªå­ä¸²å‰ç¼€è¡¨çš„é—®é¢˜åˆ’åˆ†ä¸ºä¸€ç³»åˆ—å­é—®é¢˜ï¼š<ul>
<li>åˆ›å»ºæ¯ç§å‰ç¼€çš„å‰ç¼€è¡¨</li>
<li>ä¸ºæ¯ç§å‰ç¼€æ„é€ å‰ç¼€è¡¨åˆæ˜¯ä¸€ä¸ªä¸ªå­ä¸²åŒ¹é…é—®é¢˜ï¼šå‰1ä¸ºæ˜¯å¦åŒ¹é…(æ˜¯å¦æœ‰å…¬å…±åç¼€)ã€å‰2ä½æ˜¯å¦åŒ¹é…ï¼Œâ€¦ï¼Œå‰nä½æ˜¯å¦</li>
<li>åˆå› ä¸ºä»æœ€çŸ­å¼€å§‹å°è¯•ï¼Œæœ€çŸ­çš„åˆä¸ºæ¬¡çŸ­çš„åšäº†é“ºå«ã€‚æœ€çŸ­ä¸²çš„KMPåˆ›å»ºäº†æ¬¡çŸ­æ‰€éœ€çš„å‰ç¼€è¡¨</li>
</ul>
</li>
</ul>
<p>å¯¹äºababcï¼Œå¯ä»¥åˆ’åˆ†ä¸ºï¼š</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">a</span><br><span class="line">é•¿çš„<span class="number">1</span>,ä¸éœ€è¦å‰ç¼€è¡¨è¾…åŠ©åŒ¹é…ã€‚å¾—åˆ°å‰ç¼€è¡¨ï¼š</span><br><span class="line">[<span class="number">-1</span>]</span><br><span class="line"></span><br><span class="line">a b</span><br><span class="line">å¯¹äºabï¼Œæ‰¾æœ€é•¿å…¬å…±å‰åç¼€ã€‚æ‰¾å‰<span class="number">1</span>ä½(a)æ—¶ï¼Œç›¸å½“ä¸åœ¨ä¸²abä¸­æ‰¾åŒ¹é…çš„å­ä¸²aï¼Œè€Œå­ä¸²açš„å‰ç¼€è¡¨å·²ç»ç”±ä¸Šä¸€æ­¥å¾—å‡ºï¼Œå‰<span class="number">2</span>ä½abæ˜¯å®ƒæœ¬èº«ï¼Œç»“æŸåŒ¹é…ã€‚å¾—</span><br><span class="line">[<span class="number">-1</span>, <span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">a b a</span><br><span class="line">å¯¹äºabaï¼Œæ‰¾æœ€é•¿å…¬å…±å‰åç¼€ã€‚æ‰¾å‰<span class="number">1</span>ä½(a)æ—¶ï¼Œç›¸å½“ä¸åœ¨ä¸²abaä¸­æ‰¾åŒ¹é…çš„å­ä¸²aï¼Œè€Œå­ä¸²açš„å‰ç¼€è¡¨å·²ç»ç”±ä¸Šä¸€æ­¥å¾—å‡ºï¼Œå‰<span class="number">2</span>ä½åŒç†ã€‚å¾—</span><br><span class="line">[<span class="number">-1</span> <span class="number">0</span> <span class="number">1</span>]</span><br><span class="line"></span><br><span class="line">a b a b</span><br><span class="line">a b a b c</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(j=<span class="number">1</span>;j&lt;len;j++)&#123;</span><br><span class="line">    p = m[j<span class="number">-1</span>];</span><br><span class="line">    <span class="comment">//å°è¯•åˆ©ç”¨å‰ç¼€è¡¨æ‰¾åˆ°åŒ¹é…çš„å…¬å…±å‰åç¼€</span></span><br><span class="line">    <span class="keyword">while</span>(p&gt;=<span class="number">0</span>&amp;&amp;pattern[p+<span class="number">1</span>]!=pattern[j])&#123;</span><br><span class="line">        p = m[p];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å¦‚æœä¸‹ä¸€ä½åŒ¹é…ï¼Œå…¬å…±å‰åç¼€é•¿çš„ç­‰äºå½“å‰åŒ¹é…çš„å…¬å…±å‰åç¼€é•¿åº¦åŠ 1</span></span><br><span class="line">    <span class="comment">//å¦åˆ™ä¸åŒ¹é…</span></span><br><span class="line">    <span class="keyword">if</span>(pattern[p+<span class="number">1</span>]==pattern[j])&#123;</span><br><span class="line">        m[j] = p+<span class="number">1</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        m[j] = <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h4 id="å®æˆ˜1ï¼šä¸€é¢—æ ‘Aæ˜¯å¦æ˜¯å¦ä¸€ä¸ªæ ‘çš„å­æ ‘B"><a href="#å®æˆ˜1ï¼šä¸€é¢—æ ‘Aæ˜¯å¦æ˜¯å¦ä¸€ä¸ªæ ‘çš„å­æ ‘B" class="headerlink" title="å®æˆ˜1ï¼šä¸€é¢—æ ‘Aæ˜¯å¦æ˜¯å¦ä¸€ä¸ªæ ‘çš„å­æ ‘B"></a>å®æˆ˜1ï¼šä¸€é¢—æ ‘Aæ˜¯å¦æ˜¯å¦ä¸€ä¸ªæ ‘çš„å­æ ‘B</h4><p>åºåˆ—åŒ–Aå’ŒBæ ‘ï¼Œç„¶åå°±å˜æˆäº†ç”¨KMPæ‰¾å­ä¸²çš„é—®é¢˜äº†ã€‚</p>
<p>å…³äºåºåˆ—åŒ–å’Œååºåˆ—åŒ–ï¼Œå¦‚ä½•åºåˆ—åŒ–å°±å¦‚ä½•ååºåˆ—åŒ–ã€‚å¦‚ä½¿ç”¨å…ˆåºéå†åºåˆ—åŒ–ï¼Œå¾—åˆ°<code>1 2 3 # #</code>ï¼Œé‚£ä¹ˆä¹Ÿä½¿ç”¨å…ˆåºéå†ååºåˆ—åŒ–å¾—åˆ°</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">   <span class="number">1</span></span><br><span class="line">  <span class="number">2</span> </span><br><span class="line"> <span class="number">3</span></span><br><span class="line"># #</span><br></pre></td></tr></table></figure>

<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸€ä¸ªèŠ‚ç‚¹çš„valueè¡¨ç¤ºå®Œæ¯•æ—¶ï¼Œè¦ç»™å‡ºç‰¹æ®Šçš„å­—ç¬¦åºåˆ—åŒ–ï¼Œå¦åˆ™åºåˆ—åŒ–çš„ç»“æœå¯èƒ½ä¼šæœ‰æ­§ä¹‰ã€‚</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">    <span class="number">12</span>     <span class="number">1</span></span><br><span class="line">  <span class="number">3</span>      <span class="number">23</span></span><br><span class="line">å¦‚æœvalueè¡¨ç¤ºå®Œä¸ç»™å‡ºç‰¹æ®Šå­—ç¬¦ï¼Œé‚£éƒ½æ˜¯</span><br><span class="line"><span class="number">123</span>###</span><br><span class="line"></span><br><span class="line">æ”¹è¿›ï¼š</span><br><span class="line"><span class="number">12</span>!<span class="number">3</span>!#!#!#!</span><br><span class="line"><span class="number">1</span>!<span class="number">23</span>!#!#!#!</span><br></pre></td></tr></table></figure>


<h3 id="Manacherç®—æ³•ï¼šæœ€é•¿å›æ–‡å­ä¸²"><a href="#Manacherç®—æ³•ï¼šæœ€é•¿å›æ–‡å­ä¸²" class="headerlink" title="Manacherç®—æ³•ï¼šæœ€é•¿å›æ–‡å­ä¸²"></a>Manacherç®—æ³•ï¼šæœ€é•¿å›æ–‡å­ä¸²</h3><p>åœ¨ä¸­å¿ƒæ‰©å±•çš„åŸºç¡€ä¸Šï¼Œ <strong>ä¸ºäº†è§£å†³å­—ç¬¦ä¸²é•¿åº¦å¥‡å¶çš„é—®é¢˜ï¼Œåœ¨å­—ç¬¦é—´æ’å…¥<code>#</code></strong>ï¼Œè¿™æ ·ä¸€æ¥ä¿è¯æ‰¾åˆ°çš„æ‰€æœ‰å›æ–‡ä¸²éƒ½æ˜¯å¥‡æ•°é•¿åº¦ã€‚</p>
<p>ç”¨<code>f(i)</code>æ¥è¡¨ç¤ºç¬¬iä½ä¸ºä¸­å¿ƒï¼Œå¯ä»¥æ‹“å±•å‡ºçš„æœ€å¤§å›æ–‡åŠå¾„ï¼Œé‚£ä¹ˆ<code>f(i)-1</code>å°±æ˜¯ä»¥iä¸ºä¸­å¿ƒçš„æœ€å¤§å›æ–‡ä¸²é•¿åº¦(æœ‰ä¸€åŠæ˜¯<code>#</code>)ã€‚</p>
<p>Manacherä¾æ—§æ˜¯ç©·ä¸¾æ¯ä¸€ä¸ªä½ç½®ï¼Œä½†æ˜¯å®ƒä¼šåŠ¨æ€è§„åˆ’<code>f(i)</code>ã€‚éå†æ¯ä¸ªä½ç½®ç®—å‡ºæœ€å³å›æ–‡å³è¾¹ç•Œï¼Œå¦‚<code>01232101</code>ï¼Œæœ€å³å›æ–‡å³è¾¹ç•Œå°±æ˜¯0å¤„ã€‚å½“æœ€å³å›æ–‡å³è¾¹ç•Œå‘ç”Ÿå˜åŒ–æ—¶ï¼Œè®°å½•å›æ–‡ä¸­å¿ƒï¼Œç„¶åæ¯”è¾ƒæ˜¯å¦æ˜¯æ–°æœ€å¤§å›æ–‡å­ä¸²ã€‚</p>
<ul>
<li>ä¸‰ç§æƒ…å†µçš„å¤„ç†æ–¹æ³•<ul>
<li><ol>
<li>å½“å›æ–‡ä¸­å¿ƒä¸åœ¨æœ€å³å›æ–‡å³è¾¹ç•Œä¸­æ—¶ï¼Œå°±æš´åŠ›æ‰©ã€‚</li>
</ol>
</li>
<li><ol start="2">
<li>å½“å›æ–‡å­ä¸²ï¼Œä¸­å¿ƒåœ¨æœ€å¤§å›æ–‡å³è¾¹ç•Œå†…ï¼Œä¸”å¯¹ç§°ç‚¹çš„å›æ–‡å·¦å³åŠå¾„åœ¨æœ€å³å›æ–‡è¾¹ç•Œå¯¹åº”çš„å›æ–‡å·¦å³åŠå¾„å†…<ul>
<li>é‚£å°±å¯ä»¥é€šè¿‡å¯¹ç§°ç‚¹ç›´æ¥å¾—å‡ºæ”¹ç‚¹çš„å›æ–‡åŠå¾„<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[ ( o ) a ( o ) ]</span><br><span class="line">L   i   c   i   R</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ol>
</li>
<li><ol start="3">
<li>å½“å›æ–‡å­ä¸²ï¼Œä¸­å¿ƒåœ¨æœ€å¤§å›æ–‡å³è¾¹ç•Œå†…ï¼Œä¸”å¯¹ç§°ç‚¹çš„å›æ–‡å·¦å³åŠå¾„ä¸åœ¨æœ€å³å›æ–‡è¾¹ç•Œå¯¹åº”çš„å›æ–‡å·¦å³åŠå¾„å†…<ul>
<li>é‚£åˆ°Rå›æ–‡ï¼Œå› ä¸ºy!=Yï¼Œä¸ç„¶æœ€å¤§å›æ–‡åŠå¾„è¿˜ä¼šæ‰©å¤§<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">( y[ o   ) a     o ]Y</span><br><span class="line">   L i     c     i R</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ol>
</li>
<li><ol start="4">
<li>å¦‚æœ3çš„æƒ…å†µåˆšå¥½å‹çº¿ï¼Œé‚£å°±åœ¨åŠå¾„åˆ°Rçš„åŸºç¡€ä¸Šåœ¨æ‰©è¯•è¯•</li>
</ol>
</li>
</ul>
</li>
</ul>
<h4 id="Manacheræ¨¡æ¿"><a href="#Manacheræ¨¡æ¿" class="headerlink" title="Manacheræ¨¡æ¿"></a>Manacheræ¨¡æ¿</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç”¨#é¢„å¤„ç†å¥½å­—ç¬¦ä¸²m</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”¨rså‚¨å­˜å›æ–‡åŠå¾„</span></span><br><span class="line"><span class="comment">// mrä¸ºæœ€å¤§å›æ–‡åŠå¾„çš„ä½ç½®</span></span><br><span class="line"><span class="comment">// cä¸ºæœ€å¤§å›æ–‡åŠå¾„å¯¹åº”çš„å›æ–‡ä¸­å¿ƒ</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;len;i++)&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¦‚æœåœ¨æœ€å¤§å›æ–‡åŠå¾„å†…åˆ™å–è¾ƒå°å€¼ï¼Œåé¢å†è°ƒæ•´</span></span><br><span class="line">    <span class="comment">// å½“å‰ç‚¹èƒ½åˆ°çš„æœ€å¤§å›æ–‡åŠå¾„ï¼šrm-i+1</span></span><br><span class="line">    <span class="comment">// é€šè¿‡å¯¹ç§°ç‚¹å¾—åˆ°çš„å›æ–‡åŠå¾„ï¼šrs[2*c - i]</span></span><br><span class="line">    rs[i] = (i&lt;=mr)? <span class="built_in">min</span>(mr-i+<span class="number">1</span> , rs[<span class="number">2</span>*c - i]):<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸­å¿ƒæ‰©å±•è¯•ç€æ‰¾æ›´å¤§åŠå¾„</span></span><br><span class="line">    <span class="keyword">while</span>(m[rs[i]+i] == m[i-rs[i]]) rs[i]++;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ›´æ–°æœ€å¤§è¾¹ç•ŒåŠå¯¹åº”å›æ–‡ä¸­å¿ƒ</span></span><br><span class="line">    <span class="keyword">if</span>(rs[i]+i<span class="number">-1</span> &gt; mr)&#123;</span><br><span class="line">        mr = rs[i] + i<span class="number">-1</span>;</span><br><span class="line">        c = i;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="çª—å£å†…æœ€å¤§å€¼"><a href="#çª—å£å†…æœ€å¤§å€¼" class="headerlink" title="çª—å£å†…æœ€å¤§å€¼"></a>çª—å£å†…æœ€å¤§å€¼</h3><p>çª—å£å°±æ˜¯ç”¨Lã€Ræ ‡è®°çª—å£çš„å·¦å³è¾¹ç•Œï¼Œè€Œä¸”éƒ½åªèƒ½å¾€å³ï¼Œä¸èƒ½å›é€€ã€‚</p>
<ul>
<li>ä½¿ç”¨ä¸€ä¸ªé˜Ÿåˆ—å‚¨å­˜ä¸‹æ ‡å’Œå€¼</li>
<li>é˜Ÿåˆ—åªèƒ½ä»å¤§åˆ°å°æ’åˆ—<ul>
<li>å½“çª—å£å³è¾¹ç•Œå‘å³ï¼Œåœ¨é˜Ÿåˆ—åé¢ï¼Œå¦‚æœé˜Ÿåˆ—åé¢çš„æ•°å°äºç­‰äºå¾…æ’å…¥çš„æ•°ï¼Œåˆ™å¼¹å‡ºï¼Œç›´åˆ°å¤§äºç­‰äº</li>
<li>å½“çª—å£å·¦è¾¹ç•Œå‘å³ï¼Œæ£€æŸ¥é˜Ÿåˆ—å‰é¢çš„å€¼çš„indexæ˜¯å¦è¿‡æœŸï¼Œè¿‡æœŸåˆ™å¼¹å‡º</li>
</ul>
</li>
<li>è¿™ä¹ˆä¸€æ¥ï¼Œé˜Ÿåˆ—é¡¶éƒ¨çš„æ•°å°±æ˜¯å½“å‰çª—å£ä¸­çš„æœ€å¤§å€¼</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> &#123;</span></span><br><span class="line">    val</span><br><span class="line">    index</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h4 id="ä¾‹é¢˜1"><a href="#ä¾‹é¢˜1" class="headerlink" title="ä¾‹é¢˜1"></a>ä¾‹é¢˜1</h4><p>æ‰¾å‡ºæœ€å¤§å€¼å‡æœ€å°å€¼<em>å°äº</em>numçš„æ‰€æœ‰å­æ•°ç»„ï¼Œä¸”è¦æ±‚æ—¶é—´å¤æ‚åº¦ä¸ºO(n)</p>
<ul>
<li>è§£ï¼š<ul>
<li><ol>
<li>æ€§è´¨<ul>
<li>å¦‚æœä¸€ä¸ªæ•°ç»„è¾¾æ ‡ï¼Œé‚£å®ƒé‡Œé¢çš„ä»»ä½•ä¸€ä¸ªå­æ•°ç»„ä¸€å®šè¾¾æ ‡</li>
<li>å¦‚æœä¸€ä¸ªå­æ•°ç»„ä¸è¾¾æ ‡ï¼Œé‚£å®ƒæ€ä¹ˆå¾€å¤–æ‰©éƒ½ä¸è¾¾æ ‡</li>
</ul>
</li>
</ol>
</li>
<li><ol start="2">
<li>åˆ©ç”¨ä¸Šé¢çš„æ€§è´¨ï¼Œåˆ›å»ºä¸€ä¸ªæœ€å°é˜Ÿåˆ—å’Œä¸€ä¸ªæœ€å¤§é˜Ÿåˆ—ï¼Œè®©L=0ï¼ŒRå¤–æ‰©ï¼Œç›´åˆ°ä¸‹ä¸€ä¸ªrä¸è¾¾æ ‡<ul>
<li>é‚£ä¹ˆ<strong>ä»¥Lå¼€å¤´</strong>çš„æ‰€æœ‰å­æ•°ç»„éƒ½è¾¾æ ‡ï¼ŒR-L+1ä¸ª</li>
<li>ans += R-L+1</li>
</ul>
</li>
</ol>
</li>
<li><ol start="3">
<li>ç„¶åLå³ç¼©å°ç§»ä½ï¼Œå¦‚æœRçš„ä¸‹ä¸€ä¸ªå¯ä»¥è¾¾æ ‡ï¼Œé‚£å°±å¤–æ‰©ï¼Œç„¶åå›åˆ°ç¬¬2æ­¥</li>
</ol>
</li>
<li>è¿™ä¹ˆå°±å¾—åˆ°äº†æ‰€æ±‚</li>
</ul>
</li>
</ul>
<h3 id="å•è°ƒæ ˆ"><a href="#å•è°ƒæ ˆ" class="headerlink" title="å•è°ƒæ ˆ"></a>å•è°ƒæ ˆ</h3><p>å•è°ƒæ ˆï¼šä»åº•åˆ°é¡¶æ˜¯æœ‰é¡ºåºçš„ï¼Œå¦‚å¤§åˆ°å°ã€‚</p>
<p>å¯¹æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ æ‰¾å‡ºå®ƒå·¦è¾¹æœ€è¿‘çš„å¤§äºå®ƒçš„å€¼å’Œå³è¾¹æœ€è¿‘å¤§äºå®ƒçš„å€¼ã€‚è¦æ±‚æ—¶é—´å¤æ‚åº¦O(n)ã€‚å¦‚ï¼š</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">3</span> <span class="number">5</span> <span class="number">2</span> <span class="number">4</span> <span class="number">6</span></span><br><span class="line">    å·¦      å³</span><br><span class="line"><span class="number">3</span>   null    <span class="number">5</span></span><br><span class="line"><span class="number">5</span>   null    <span class="number">6</span></span><br><span class="line"><span class="number">2</span>   <span class="number">5</span>       <span class="number">4</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<ul>
<li><ol>
<li>å»ºç«‹ä¸€ä¸ªå•è°ƒæ ˆ</li>
</ol>
</li>
<li><ol start="2">
<li>å¦‚æœæ»¡è¶³å•è°ƒçš„é¡ºåºè¦æ±‚ï¼Œåˆ™å¯æ ˆ</li>
</ol>
</li>
<li><ol start="3">
<li>å½“è¦å…¥æ ˆçš„æ•°ä¸æ»¡è¶³é¡ºåºè¦æ±‚ï¼Œåˆ™å¼€å§‹å¼¹å‡ºï¼Œå¹¶è®°å½•æ•°æ®<ul>
<li>å¦‚ä¸‹ä¸€ä¸ªindexçš„4ï¼Œä¸æ»¡è¶³é¡ºåºï¼Œé‚£ä¹ˆindexä¸º3çš„æ•°å³è¾¹æœ€è¿‘çš„æ¯”ä»–å¤§çš„æ•°å°±æ˜¯index4å¯¹åº”çš„æ•°ï¼Œé‚£ä¹ˆå·¦è¾¹æœ€è¿‘çš„æ¯”ä»–å¤§çš„å°±æ˜¯å¼¹å‡ºåçš„æ ˆé¡¶</li>
</ul>
</li>
</ol>
</li>
<li><ol start="4">
<li>å¼¹å‡ºåæ’å…¥æ˜¯å¦æœ‰åºï¼Œä¸æ»¡è¶³åˆ™å†æ¬¡è¿›è¡Œ3çš„æ“ä½œ</li>
</ol>
</li>
<li><ol start="5">
<li>å¦‚æœæ•°ç»„éå†å®Œäº†æ ˆè¿˜æ²¡ç©ºï¼Œåˆ™ä¾æ¬¡å¼¹å‡ºï¼Œæ— å³è¾¹æœ€è¿‘çš„å¤§äºçš„æ•°</li>
</ol>
</li>
<li>å¦‚æœä¸¤ä¸ªç›¸åŒçš„æ•°ç›¸é‚»ï¼Œåˆ™åœ¨æ ˆä¸­ä»–ä»¬å…±ç”¨ä¸€ä¸ªä½ç½®</li>
</ul>
<h4 id="ä¾‹é¢˜1-1"><a href="#ä¾‹é¢˜1-1" class="headerlink" title="ä¾‹é¢˜1"></a>ä¾‹é¢˜1</h4><p>ç»™å®šä¸€ä¸ªæ²¡æœ‰é‡å¤å…ƒç´ çš„æ•°ç»„è¦æ±‚å»ºç«‹ä¸€æ£µæ ‘ï¼Œå…¶ä¸­çš„æ¯ä¸€æ£µå­æ ‘ä¸Šï¼Œå€¼æœ€å¤§çš„èŠ‚ç‚¹éƒ½æ˜¯æ ‘çš„å¤´éƒ¨ã€‚å¦‚æœæ•°ç»„é•¿åº¦ä¸ºnï¼Œåˆ™æ—¶é—´å¤æ‚åº¦è¦æ±‚ä¸ºO(n)</p>
<ul>
<li>è§£1. ä½¿ç”¨å¤§å¤§æ ¹å †</li>
<li>è§£2. ä½¿ç”¨å•è°ƒæ ˆ<ul>
<li>ä½¿ç”¨å•è°ƒæ ˆæ‰¾å‡ºå·¦å³æœ€è¿‘çš„å¤§äºçš„ä¿¡æ¯</li>
<li>è‹¥å·¦å³éƒ½æ‰¾ä¸åˆ°å¤§äºçš„èŠ‚ç‚¹ï¼Œåˆ™è¯´æ˜è¯¥ç‚¹æœ€å¤§ï¼Œåšæ ¹èŠ‚ç‚¹</li>
<li>å½“å·¦å³éƒ½æœ‰å¤§äºçš„èŠ‚ç‚¹æ—¶è®©å½“å‰èŠ‚ç‚¹æˆä¸ºè¾ƒå°çš„ä¸€ä¸ªå­èŠ‚ç‚¹</li>
</ul>
</li>
</ul>
<h4 id="ä¾‹é¢˜2"><a href="#ä¾‹é¢˜2" class="headerlink" title="ä¾‹é¢˜2"></a>ä¾‹é¢˜2</h4><p>ç»™å®šä¸€ä¸ªæ•´å½¢çŸ©é˜µmapï¼Œå…¶ä¸­çš„å€¼åªæœ‰0å’Œ1ä¸¤ç§ï¼Œæ±‚å…¶ä¸­å…¨æ˜¯1çš„æ‰€æœ‰çŸ©å½¢åŒºåŸŸä¸­ï¼Œæœ€å¤§çš„çŸ©å½¢åŒºåŸŸä¸­1çš„æ•°é‡</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> <span class="number">0</span> <span class="number">1</span> <span class="number">1</span></span><br><span class="line"><span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span></span><br><span class="line"><span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span></span><br><span class="line"><span class="number">0</span> <span class="number">1</span> <span class="number">0</span> <span class="number">1</span></span><br></pre></td></tr></table></figure>

<ul>
<li>å¼•å­é¢˜ï¼šæ±‚ç»„è£…å®ƒæ‰€åŒ…å«çš„æœ€å¤§çš„çŸ©å½¢é¢ç§¯<ul>
<li>å¦‚æŸ±çŠ¶å›¾çš„é«˜åº¦åˆ†åˆ«ä¸ºï¼š<code>5 2 3 1 4</code>æœ€å¤§é¢ç§¯å°±æ˜¯6(2å¾€å·¦å¾€å³)</li>
<li>è¿™ä¸ªé¢˜çš„è§£æ³•å°±æ˜¯å»ºç«‹ä»å°åˆ°å¤§çš„å•è°ƒæ ˆï¼Œæ‰¾å‡ºæ¯ä¸ªå…ƒç´ æœ€å³æœ€è¿‘çš„å°äºçš„å€¼</li>
<li>ç„¶åæ›´æ–°é¢ç§¯ä¿¡æ¯</li>
</ul>
</li>
<li>è§£<ul>
<li><ol>
<li>ä»ç¬¬ä¸€è¡Œå¼€å§‹ï¼Œæ‰§è¡Œä¸Šé¢çš„æ“ä½œæ‰¾å‡ºæœ€å¤§çš„çŸ©å½¢ï¼Œæ›´æ–°maxå€¼</li>
</ol>
</li>
<li><ol start="2">
<li>åŠ ä¸Šä¸‹ä¸€è¡Œï¼Œå½“ä»¥åˆ—çš„å…ƒç´ é‡åˆ°é›¶æ—¶å½’é›¶<ul>
<li>è¿™é‡ŒåŠ åˆ°æœ€åä¼šå¾—åˆ°<code>0 3 0 1</code></li>
<li>ç„¶åå°±æˆä¸ºäº†å¼•å­é¢˜çš„é—®é¢˜</li>
</ul>
</li>
</ol>
</li>
<li>è¿™ä¹ˆä¸€ä¸ªè¿‡ç¨‹ä¸‹æ¥å°±è®°å½•çš„æœ€å¤§å€¼</li>
</ul>
</li>
</ul>
<h4 id="ä¾‹é¢˜3"><a href="#ä¾‹é¢˜3" class="headerlink" title="ä¾‹é¢˜3"></a>ä¾‹é¢˜3</h4><p>ç»™ä¸€ä¸ªæ•°ç»„è¡¨ç¤ºä¸€ä¸ªç¯å½¢çš„å±±ï¼Œæ•°ç»„çš„å€¼è¡¨ç¤ºå±±çš„é«˜åº¦ã€‚æ¯åº§å±±é¡¶æ”¾çƒ½ç«ï¼Œç›¸é‚»çš„å±±å¯ä»¥ç›¸äº’çœ‹è§ï¼Œé«˜çš„å±±ä¼šæŒ¡ä½ä½çš„å±±çš„è§†çº¿ã€‚æ±‚èƒ½äº’ç›¸çœ‹è§çš„å¯¹æ•°ã€‚</p>
<p>æ€è·¯ç±»ä¼¼ä¾‹2ï¼Œä¸­çš„æŸ±çŠ¶å›¾ï¼Œå°çš„å±±å³°æ‰¾å¤§çš„å±±å³°ï¼Œä½¿ç”¨æœ€å¤§å€¼æ‰“åº•ä½œå‡ºå•è°ƒæ ˆï¼Œæ‰¾å‡ºä¸¤è¾¹æœ€è¿‘çš„å¤§äºçš„æ•°ï¼Œå¼¹å‡ºæ—¶ç»“ç®—å¯¹æ•°ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æ˜¯2å¯¹ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼š</p>
<p>å¦‚æœå…¥æ ˆçš„æ•°å’Œæ ˆé¡¶çš„æ•°ä¸€æ ·å¤§ï¼Œé‚£å°±å‹åœ¨ä¸€èµ·è®¡æ•°åŠ ä¸€ï¼Œå¦‚<code>4, 4</code>4ä¸ª4ï¼Œå½“æ¥äº†çš„å¤§çš„å€¼å¦‚5</p>
<ul>
<li>ç»“ç®—4ä¸ª4ï¼Œåˆ™å¾—åˆ°çš„å¯¹æ•°ä¸º$C_4^2 + 4*2$ï¼ŒC42è¡¨ç¤ºè¿™4ä¸ª4ä¹‹é—´çš„å¯¹æ•°ï¼Œ4x2è¡¨ç¤ºæ¯ä¸ª4å·¦å³éƒ½èƒ½çœ‹åˆ°</li>
</ul>
<p>å¦‚æœéå†å®Œäº†æ ˆè¿˜éç©º</p>
<ul>
<li>æ ˆå‰©ä½™2æ¡ä»¥ä¸Šçš„è®°å½•æ—¶ï¼Œè¿˜æ˜¯å…¬å¼$C_k^2 + k*2$</li>
<li>æ ˆå‰©2æ¡è®°å½•æ—¶<ul>
<li>å¦‚æœæœ€åä¸€æ¡è®°å½•çš„ä¸ªæ•°æ˜¯å¤§äº1ï¼Œåˆ™è¿˜æ˜¯å…¬å¼</li>
<li>å¦‚æœæœ€åä¸€æ¡è®°å½•çš„ä¸ªæ•°æ˜¯1ï¼Œåˆ™å…¬å¼æŠŠ<code>k*2æ”¹ä¸ºk*1</code></li>
</ul>
</li>
<li>åªå‰©ä¸€æ¡è®°å½•æ˜¯æ—¶$C^2_k$</li>
</ul>
<h3 id="å­—ç¬¦ä¸²åŒ¹é…"><a href="#å­—ç¬¦ä¸²åŒ¹é…" class="headerlink" title="å­—ç¬¦ä¸²åŒ¹é…"></a>å­—ç¬¦ä¸²åŒ¹é…</h3><ul>
<li><p>é€’å½’</p>
<ul>
<li><code>f(int i, int j)</code>ï¼Œè¡¨ç¤ºstr[i]ä¹‹åçš„æ•´ä¸ªèƒ½ä¸èƒ½è¢«exp[j]ä¹‹åçš„æ•´ä¸ªåŒ¹é…<ul>
<li>j+1æ˜¯*<ul>
<li>å¦‚æœiï¼ŒjåŒ¹é…</li>
<li>å¦‚æœiï¼Œjä¸åŒ¹é…</li>
</ul>
</li>
<li>j+1ä¸æ˜¯*<ul>
<li>å¦‚æœiï¼ŒjåŒ¹é…</li>
<li>å¦‚æœiï¼Œjä¸åŒ¹é…</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>æš´åŠ›é€’å½’</p>
</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">process</span><span class="params">(<span class="built_in">string</span>&amp; str, <span class="built_in">string</span>&amp; <span class="built_in">exp</span>, <span class="keyword">int</span> i, <span class="keyword">int</span> j)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(j == <span class="built_in">exp</span>.<span class="built_in">size</span>())&#123;</span><br><span class="line">        <span class="keyword">return</span> i == str.<span class="built_in">size</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// jä¸Šé¢è¿˜æœ‰å­—ç¬¦ï¼Œè€ƒå¯Ÿj+1çš„æƒ…å†µ</span></span><br><span class="line">    <span class="keyword">if</span>(j + <span class="number">1</span> == <span class="built_in">exp</span>.<span class="built_in">size</span>() || <span class="built_in">exp</span>[j+<span class="number">1</span>] != <span class="string">'*'</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> i != str.<span class="built_in">size</span>() &amp;&amp; (<span class="built_in">exp</span>[j] == str[i] || <span class="built_in">exp</span>[j] == <span class="string">'.'</span>)</span><br><span class="line">            &amp;&amp; <span class="built_in">process</span>(str, <span class="built_in">exp</span>, i+<span class="number">1</span>, j+<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// expçš„j+1ä½ç½®ä¸ä»…æœ‰å­—ç¬¦ï¼Œè€Œä¸”å­—ç¬¦æ˜¯*</span></span><br><span class="line">    <span class="keyword">while</span>(i != str.<span class="built_in">size</span>() &amp;&amp; (<span class="built_in">exp</span>[j] == str[i] || <span class="built_in">exp</span>[j] == <span class="string">'.'</span>))&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">process</span>(str, <span class="built_in">exp</span>, i, j+<span class="number">2</span>))&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        i++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">process</span>(str, <span class="built_in">exp</span>, i, j+<span class="number">2</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>åŠ¨æ€è§„åˆ’</li>
</ul>
<p>buildingâ€¦</p>
<hr>
<h1 id="æ ‘"><a href="#æ ‘" class="headerlink" title="æ ‘"></a>æ ‘</h1><h3 id="Morriséå†"><a href="#Morriséå†" class="headerlink" title="Morriséå†"></a>Morriséå†</h3><p>ä¸€èˆ¬æ–¹æ³•çš„éå†æ ‘ï¼Œç©ºé—´å¤æ‚è¯»æ˜¯O(h)ï¼Œhæ˜¯æ ‘çš„é«˜åº¦ï¼Œå› ä¸ºéœ€è¦ç”¨æ ˆæ¥å‚¨å­˜çˆ¶èŠ‚ç‚¹æ¥å®ç°å›é€€ã€‚</p>
<p>Morriséå†æ˜¯åœ¨ç©ºé—´å¤æ‚åº¦ä¸ºO(1)çš„æƒ…å†µä¸‹éå†æ ‘çš„æ–¹æ³•ã€‚å®ƒåˆ©ç”¨äº†æ ‘ä¸Šçš„ç©ºé—²ç©ºé—´</p>
<ul>
<li><ol>
<li>å½“å‰èŠ‚ç‚¹è®°ä½Curï¼Œå¦‚æœCuræ— å·¦å­©å­ï¼ŒCurå‘å³ç§»åŠ¨<code>Cur = Cur.right</code></li>
</ol>
</li>
<li><ol start="2">
<li>å¦‚æœCuræœ‰å·¦å­©å­ï¼Œæ‰¾åˆ°Curå·¦å­æ ‘ä¸Šæœ€å³çš„èŠ‚ç‚¹ï¼Œè®°åš<code>mostright</code><ul>
<li><ol>
<li>å¦‚æœ<code>mostright</code>çš„å³æŒ‡é’ˆæ˜¯ç©ºï¼Œè®©å…¶æŒ‡å‘Curï¼Œç„¶åcurå‘å·¦ç§»åŠ¨</li>
</ol>
</li>
<li><ol start="2">
<li>å¦‚æœ<code>mostright</code>çš„å³æŒ‡é’ˆæŒ‡å‘curï¼Œè®©curå³ç§»ï¼Œç„¶åè®©å…¶æŒ‡å‘ç©º</li>
</ol>
</li>
</ul>
</li>
</ol>
</li>
<li><ol start="3">
<li>æ²¡æœ‰å³å­©å­éå†ç»“æŸ</li>
</ol>
</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">func</span><span class="params">(Node* head)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(head==<span class="literal">nullptr</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    Node cur = head;</span><br><span class="line">    Node mostRight = null;</span><br><span class="line">    <span class="keyword">while</span>(cur!=null)&#123;</span><br><span class="line">        mostRight = cur.left;</span><br><span class="line">        <span class="keyword">if</span>(mostRight != <span class="literal">nullptr</span>)&#123;</span><br><span class="line">            <span class="keyword">while</span>(mostRight.right != <span class="literal">nullptr</span> &amp;&amp; mostRight.right != cur)&#123;</span><br><span class="line">                mostRight = mostRight.right;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(mostRight.right == <span class="literal">nullptr</span>)&#123;</span><br><span class="line">                mostRight.right = cur;</span><br><span class="line">                cur = cur.left;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;  <span class="comment">// ç¬¬äºŒæ¬¡æ¥æ­¤èŠ‚ç‚¹</span></span><br><span class="line">                mostRight.right = <span class="literal">nullptr</span></span><br><span class="line">                <span class="comment">// cur = cur.right; //è·³è¿‡or not</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        cur = cur.right;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h4 id="Morrisååºéå†"><a href="#Morrisååºéå†" class="headerlink" title="Morrisååºéå†"></a>Morrisååºéå†</h4><p>Morriséå†åœ¨éå†å³å­æ ‘æ—¶æ— æ³•ä¸€æ­¥ä¸€æ­¥åé€€ï¼Œè¿™ä¼šå¯¼è‡´éœ€è¦å›æº¯æ—¶ä¸æ˜¯å…¨éƒ¨éƒ½èƒ½å•æ­¥å›æº¯ã€‚</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span></span><br><span class="line">  \</span><br><span class="line">    <span class="number">2</span></span><br><span class="line">  /   \</span><br><span class="line"> <span class="number">5</span>      <span class="number">3</span></span><br><span class="line">          \</span><br><span class="line">            <span class="number">4</span></span><br></pre></td></tr></table></figure>

<p>ååºéå†è·å¾—å·¦å­—èŠ‚ç‚¹åå°±å¯è¾“å‡ºï¼Œä½†æ˜¯è¦åœ¨æ ¹èŠ‚ç‚¹å‰è¾“å‡ºå³å­èŠ‚ç‚¹ï¼Œéœ€è¦å¤–çš„æ“ä½œã€‚å¯ä»¥å°†æ•´ä¸ªâ€å³æ–œâ€çš„æ ‘è®°å½•ç„¶åé€†åºè¾“å‡ºï¼Œå°±æ˜¯ååºçš„ç»“æœã€‚</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">postorderTraversal</span><span class="params">(TreeNode* root)</span></span>&#123;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; ans;</span><br><span class="line">    TreeNode* mostRight;</span><br><span class="line">    TreeNode* head = <span class="keyword">new</span> TreeNode(<span class="number">0</span>);</span><br><span class="line">    head-&gt;left = root;</span><br><span class="line">    <span class="keyword">while</span>(head)&#123;</span><br><span class="line">        mostRight = head-&gt;left;</span><br><span class="line">        <span class="keyword">if</span>(mostRight)&#123;</span><br><span class="line">            <span class="keyword">while</span>(mostRight-&gt;right &amp;&amp; mostRight-&gt;right!=head)&#123;</span><br><span class="line">                mostRight = mostRight-&gt;right;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(mostRight-&gt;right == <span class="literal">nullptr</span>)&#123;</span><br><span class="line">                mostRight-&gt;right = head;</span><br><span class="line">                head = head-&gt;left;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                TreeNode* temp = head-&gt;left;</span><br><span class="line">                <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; rtree;</span><br><span class="line">                <span class="comment">// ç¬¬äºŒæ¬¡è®¿é—®èŠ‚ç‚¹æ—¶ï¼Œå…¶"å­¤ç«‹å·¦èŠ‚ç‚¹"ä¸€å®šéƒ½å·²è¾“å‡ºï¼Œä¸”æ­£æ˜¯ååºéœ€è¦çš„åœ¨å³èŠ‚ç‚¹å‰è¾“å‡º</span></span><br><span class="line">                <span class="comment">// éå†æ•´ä¸ªå³é•¿æ ‘ï¼Œç„¶åreverseå°±æ˜¯ååºçš„å³èŠ‚ç‚¹å’Œæ ¹èŠ‚ç‚¹çš„è¾“å‡º</span></span><br><span class="line">                <span class="keyword">while</span>(temp!=mostRight)&#123;</span><br><span class="line">                    rtree.push_back(temp-&gt;val);</span><br><span class="line">                    temp = temp-&gt;right;</span><br><span class="line">                &#125;</span><br><span class="line">                rtree.push_back(temp-&gt;val);</span><br><span class="line">                reverse(rtree.begin(), rtree.end());</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">auto</span> i: rtree)&#123;</span><br><span class="line">                    ans.push_back(i);</span><br><span class="line">                &#125;</span><br><span class="line">                mostRight-&gt;right = <span class="literal">nullptr</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        head = head-&gt;right;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="äºŒå‰æœç´¢æ ‘"><a href="#äºŒå‰æœç´¢æ ‘" class="headerlink" title="äºŒå‰æœç´¢æ ‘"></a>äºŒå‰æœç´¢æ ‘</h3><ul>
<li>å·¦è¾¹å­©å­æ¯”æ ¹èŠ‚ç‚¹å°</li>
<li>å³è¾¹å­©å­æ¯”æ ¹èŠ‚ç‚¹å¤§</li>
</ul>
<p><strong>æŸ¥æ‰¾</strong>  </p>
<ul>
<li>å·¦å°å³å¤§ï¼Œé€’å½’æˆ–å¾ªç¯  </li>
</ul>
<p><strong>æ’å…¥</strong></p>
<ul>
<li>å·¦å°å³å¤§ï¼Œé€’å½’æˆ–å¾ªç¯  </li>
</ul>
<p><strong>åˆ é™¤</strong></p>
<ul>
<li>æ²¡æœ‰å­©å­<ul>
<li>ç›´æ¥æ’å…¥</li>
</ul>
</li>
<li>åªæœ‰ä¸€ä¸ªå­©å­<ul>
<li>å­æ‰¿çˆ¶ä¸š</li>
</ul>
</li>
<li>æœ‰ä¸¤ä¸ªå­©å­<ul>
<li>æ‰¾åˆ°å·¦å­æ ‘çš„æœ€å¤§æˆ–å³å­æ ‘çš„æœ€å°æ›¿æ¢è¢«åˆ é™¤èŠ‚ç‚¹â€¦æœ‰æ•ˆé™ä½æ ‘çš„é«˜åº¦</li>
</ul>
</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">BinTree <span class="title">Delete</span><span class="params">( BinTree BST, ElementType X )</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    Position Tmp; </span><br><span class="line"> </span><br><span class="line">    <span class="keyword">if</span>( !BST ) </span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"è¦åˆ é™¤çš„å…ƒç´ æœªæ‰¾åˆ°"</span>); </span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>( X &lt; BST-&gt;Data ) </span><br><span class="line">            BST-&gt;Left = Delete( BST-&gt;Left, X );   <span class="comment">/* ä»å·¦å­æ ‘é€’å½’åˆ é™¤ */</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>( X &gt; BST-&gt;Data ) </span><br><span class="line">            BST-&gt;Right = Delete( BST-&gt;Right, X ); <span class="comment">/* ä»å³å­æ ‘é€’å½’åˆ é™¤ */</span></span><br><span class="line">        <span class="keyword">else</span> &#123; <span class="comment">/* BSTå°±æ˜¯è¦åˆ é™¤çš„ç»“ç‚¹ */</span></span><br><span class="line">            <span class="comment">/* å¦‚æœè¢«åˆ é™¤ç»“ç‚¹æœ‰å·¦å³ä¸¤ä¸ªå­ç»“ç‚¹ */</span> </span><br><span class="line">            <span class="keyword">if</span>( BST-&gt;Left &amp;&amp; BST-&gt;Right ) &#123;</span><br><span class="line">                <span class="comment">/* ä»å³å­æ ‘ä¸­æ‰¾æœ€å°çš„å…ƒç´ å¡«å……åˆ é™¤ç»“ç‚¹ */</span></span><br><span class="line">                Tmp = FindMin( BST-&gt;Right );</span><br><span class="line">                BST-&gt;Data = Tmp-&gt;Data;</span><br><span class="line">                <span class="comment">/* ä»å³å­æ ‘ä¸­åˆ é™¤æœ€å°å…ƒç´  */</span></span><br><span class="line">                BST-&gt;Right = Delete( BST-&gt;Right, BST-&gt;Data );</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123; <span class="comment">/* è¢«åˆ é™¤ç»“ç‚¹æœ‰ä¸€ä¸ªæˆ–æ— å­ç»“ç‚¹ */</span></span><br><span class="line">                Tmp = BST; </span><br><span class="line">                <span class="keyword">if</span>( !BST-&gt;Left )       <span class="comment">/* åªæœ‰å³å­©å­æˆ–æ— å­ç»“ç‚¹ */</span></span><br><span class="line">                    BST = BST-&gt;Right; </span><br><span class="line">                <span class="keyword">else</span>                   <span class="comment">/* åªæœ‰å·¦å­©å­ */</span></span><br><span class="line">                    BST = BST-&gt;Left;</span><br><span class="line">                <span class="built_in">free</span>( Tmp );</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> BST;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="BSTçš„æ€§è´¨"><a href="#BSTçš„æ€§è´¨" class="headerlink" title="BSTçš„æ€§è´¨"></a>BSTçš„æ€§è´¨</h4><ul>
<li><ol>
<li><strong>BSTçš„ä¸­åºéå†æ˜¯ä¸€ä¸ªéé€’å‡çš„æœ‰åºåºåˆ—</strong></li>
</ol>
</li>
</ul>
<h3 id="å¹³è¡¡äºŒå‰æ ‘"><a href="#å¹³è¡¡äºŒå‰æ ‘" class="headerlink" title="å¹³è¡¡äºŒå‰æ ‘"></a>å¹³è¡¡äºŒå‰æ ‘</h3><p>èŠ‚ç‚¹å·¦è¾¹éƒ½æ¯”è¯¥èŠ‚ç‚¹å°ï¼Œå³è¾¹éƒ½æ¯”è¯¥èŠ‚ç‚¹å¤§</p>
<p>ä¸è€ƒè™‘å¹³è¡¡æ€§çš„æƒ…å†µä¸‹</p>
<ul>
<li><p>æ’å…¥</p>
<ul>
<li>å·¦å°å³å¤§ï¼Œæ‰¾åˆ°è‡ªå·±çš„ä½ç½®</li>
</ul>
</li>
<li><p>åˆ é™¤</p>
<ul>
<li>å½“å·¦å³å­æ ‘éƒ½éç©ºæ—¶ï¼Œç”¨å³å­æ ‘çš„æœ€å·¦èŠ‚ç‚¹é¡¶æ›¿ï¼Œè¯¥èŠ‚ç‚¹çš„å³å­æ ‘äº¤ç»™å®ƒçš„çˆ¶èŠ‚ç‚¹<ul>
<li>å› ä¸ºå³å­æ ‘æœ€å·¦èŠ‚ç‚¹æ˜¯æœ€å°çš„æ¯”å®ƒå¤§çš„æ•°</li>
<li>åŒç†ï¼Œä¹Ÿå¯é€‰å·¦å­æ ‘çš„æœ€å³èŠ‚ç‚¹</li>
</ul>
</li>
</ul>
</li>
<li><p>å¦‚æœè€ƒè™‘å¹³è¡¡æ€§ä¸åŒçš„å¹³è¡¡äºŒå·®æ•°åŠ¨ä½œçš„ç»„åˆä¸åŒï¼Œä½†åŸºæœ¬æ€æƒ³(åŠ¨ä½œ)éƒ½æ˜¯<strong>é€šè¿‡æ—‹è½¬æ¥æ”¹å˜å±€éƒ¨çš„å¹³è¡¡æ€§</strong></p>
<ul>
<li>å·¦æ—‹ï¼šå¤´èŠ‚ç‚¹å˜æˆäº†æ–°å¤´èŠ‚ç‚¹çš„å·¦èŠ‚ç‚¹<ul>
<li>å¦‚æœæ–°å¤´èŠ‚ç‚¹å­˜åœ¨å·¦å­©å­ï¼Œåˆ™æˆä¸ºæ—§å¤´èŠ‚ç‚¹çš„å³å­©å­ã€‚å› ä¸ºå¯¹äºå·¦æ—‹ï¼Œæ–°å¤´èŠ‚ç‚¹æœ¬æ¥æ˜¯æ—§å¤´èŠ‚ç‚¹çš„å³å­©å­</li>
</ul>
</li>
<li>å³æ—‹ï¼šå¤´èŠ‚ç‚¹å˜æˆäº†æ–°å¤´èŠ‚ç‚¹çš„å³èŠ‚ç‚¹<ul>
<li>å¦‚æœæ–°å¤´èŠ‚ç‚¹å­˜åœ¨å³å­©å­ï¼Œåˆ™æˆä¸ºæ—§å¤´èŠ‚ç‚¹çš„å·¦å­©å­ã€‚å› ä¸ºå¯¹äºå³æ—‹ï¼Œæ–°å¤´èŠ‚ç‚¹æœ¬æ¥æ˜¯æ—§å¤´èŠ‚ç‚¹çš„å·¦å­©å­</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="AVLæ ‘"><a href="#AVLæ ‘" class="headerlink" title="AVLæ ‘"></a>AVLæ ‘</h4><ul>
<li>å‘ç°ä¸å¹³è¡¡<ul>
<li>æŠŠå·¦æ ‘é«˜åº¦å’Œå³æ ‘é«˜åº¦è®°å½•åœ¨èŠ‚ç‚¹ä¸­ï¼Œå½“æ’å…¥æ–°èŠ‚ç‚¹æ—¶å›æº¯ï¼Œä¿®æ”¹æ²¿é€”çš„å€¼ï¼Œä¿®æ”¹è¿‡ç¨‹ä¸­å°†å‘ç°ä¸å¹³è¡¡ã€‚åˆ é™¤èŠ‚ç‚¹åŒç†</li>
</ul>
</li>
<li>å½“å‘ç°ä¸å¹³è¡¡æ—¶è¿›è¡Œæ—‹è½¬ï¼Œ<strong>4ç§è°ƒæ•´çš„ç»„åˆ</strong><ul>
<li>LLï¼šå·¦å­æ ‘çš„å·¦å­æ ‘å¯¼è‡´çš„ä¸å¹³è¡¡<ul>
<li>å•çº¯çš„å³æ—‹</li>
<li>å³<code>node.left.left != NULL</code>çš„æƒ…å†µï¼šå› ä¸ºå‘ä¸Š3çº§å°±èƒ½å‘ç°ä¸å¹³è¡¡</li>
</ul>
</li>
<li>LRï¼šå·¦å­æ ‘çš„å³å­æ ‘å¯¼è‡´çš„ä¸å¹³è¡¡<ul>
<li>å…ˆå·¦æ—‹å†å³æ—‹ï¼š<ul>
<li>å…ˆä»¥å¤´èŠ‚ç‚¹çš„å·¦å­èŠ‚ç‚¹ä¸ºæ–°å¤´èŠ‚ç‚¹å·¦æ—‹</li>
<li>ç„¶åå°±è½¬åŒ–æˆäº†LLå‹çš„æ“ä½œ</li>
</ul>
</li>
<li>å³<code>node.left.right != NULL</code>çš„æƒ…å†µ</li>
</ul>
</li>
<li>RRï¼šå³å­æ ‘çš„å³å­æ ‘å¯¼è‡´çš„ä¸å¹³è¡¡<ul>
<li>å•çº¯çš„å·¦æ—‹</li>
<li>å³<code>node.right.right != NULL</code>çš„æƒ…å†µ</li>
</ul>
</li>
<li>RLï¼šå³å­æ ‘çš„å·¦å­æ ‘å¯¼è‡´çš„ä¸å¹³è¡¡<ul>
<li>å³<code>node.right.left != NULL</code>çš„æƒ…å†µ</li>
<li>åŒç†LRå‹</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="çº¢é»‘æ ‘"><a href="#çº¢é»‘æ ‘" class="headerlink" title="çº¢é»‘æ ‘"></a>çº¢é»‘æ ‘</h4><p>ä¸ºè¡¨è¿°æ–¹ä¾¿ï¼šC(current)è¡¨ç¤ºé’ˆå¯¹çš„èŠ‚ç‚¹ï¼ŒP(parent), G(grandparent)ï¼ŒU(uncle)</p>
<ul>
<li>ç‰¹å¾<ul>
<li><ol>
<li>æ ¹èŠ‚ç‚¹æ˜¯é»‘è‰²</li>
</ol>
</li>
<li><ol start="2">
<li>æ‰€æœ‰å¶å­(nilèŠ‚ç‚¹)éƒ½æ˜¯é»‘è‰²</li>
</ol>
</li>
<li><ol start="3">
<li>æ¯ä¸ªçº¢è‰²èŠ‚ç‚¹çš„ä¸¤ä¸ªå­—èŠ‚ç‚¹éƒ½æ˜¯é»‘è‰²(ä¸å­˜åœ¨ä¸¤ä¸ªè¿ç»­çš„çº¢è‰²èŠ‚ç‚¹)</li>
</ol>
</li>
<li><ol start="4">
<li>ä»ä»»æ„èŠ‚ç‚¹åˆ°å…¶æ¯ä¸ªå¶å­çš„æ‰€æœ‰è·¯å¾„éƒ½åŒ…å«ç›¸åŒæ•°ç›®çš„é»‘è‰²èŠ‚ç‚¹<ul>
<li>é»‘è‰²å®Œç¾å¹³è¡¡</li>
</ul>
</li>
</ol>
</li>
</ul>
</li>
<li>æ—‹è½¬ï¼šä¸ºä¾‹å‡å°æ ‘çš„é«˜åº¦<ul>
<li>çº¢é»‘æ ‘æœ€å¤§é«˜åº¦$O(\log n)$</li>
<li>å·¦æ—‹ï¼š<ul>
<li>Cå’Œå®ƒçš„å³å­èŠ‚ç‚¹äº¤æ¢</li>
<li>Cå³å­èŠ‚ç‚¹çš„å·¦å­æ ‘æˆä¸ºCçš„å³å­æ ‘</li>
<li>å³å­å˜æ–°çˆ¹ï¼Œå³å­çš„å·¦å­å˜è€çˆ¹çš„å³å­ï¼Œè€çˆ¹å˜æ–°çˆ¹å·¦å­<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># LEFT-ROTATE(T, x)</span><br><span class="line">y &#x3D; x.right</span><br><span class="line">x.right &#x3D; y.left</span><br><span class="line">if y.left !&#x3D; nil</span><br><span class="line">    y.left.p &#x3D; x</span><br><span class="line">y.p &#x3D; x.p</span><br><span class="line">if x.p &#x3D;&#x3D; nil</span><br><span class="line">    T.root &#x3D;&#x3D; y</span><br><span class="line">elseif x &#x3D;&#x3D; x.p.left</span><br><span class="line">    x.p.left &#x3D; y</span><br><span class="line">else x.p.right &#x3D; y</span><br><span class="line">y.left &#x3D; x</span><br><span class="line">x.p &#x3D; y</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li>å³æ—‹ï¼š<ul>
<li>Cå’Œå®ƒçš„å·¦å­èŠ‚ç‚¹äº¤æ¢</li>
<li>Cå·¦å­èŠ‚ç‚¹çš„å³å­æ ‘æˆä¸ºCçš„å·¦å­æ ‘</li>
<li>å·¦å­å˜æ–°çˆ¹ï¼Œå·¦å­çš„å³å­å˜è€çˆ¹çš„å·¦å­ï¼Œè€çˆ¹å˜æ–°çˆ¹å³å­</li>
</ul>
</li>
</ul>
</li>
<li>æœç´¢<ul>
<li>æ¯”èŠ‚ç‚¹å°å°±æ‰¾å·¦å­æ ‘ï¼Œå¦åˆ™å³å­æ ‘</li>
</ul>
</li>
<li>æ’å…¥<ul>
<li>æ¯ä¸ªæ–°èŠ‚ç‚¹éƒ½æ˜¯çº¢è‰²çš„ï¼Œè¿è§„ä¿®å¤ä»£ä»·æ¯”è¾ƒå°</li>
<li><ol>
<li>C=rootï¼Œåˆ™æŠŠCå˜ä¸ºé»‘è‰²</li>
</ol>
</li>
<li><ol start="2">
<li>Pæ˜¯é»‘è‰²ï¼Œç›´æ¥æ’å…¥</li>
</ol>
</li>
<li><ol start="3">
<li>Pæ˜¯çº¢è‰²<ul>
<li>I. Uæ˜¯çº¢ï¼Œåˆ™På’ŒUéƒ½å˜é»‘ï¼ŒGå˜åï¼Œå‘ä¸Šé€’å½’</li>
<li>II. Uæ˜¯é»‘<ul>
<li>ä¸‰è§’å‹ï¼šGPCå‘ˆä¸‰è§’å½¢<ul>
<li>å¯¹Pæ—‹è½¬ä½¿å¾—GPCä¸€æ¡ç›´çº¿ï¼Œç„¶ååšç›´çº¿å‹æ“ä½œ</li>
</ul>
</li>
<li>ç›´çº¿å‹ï¼šGPCä¸€æ¡ç›´çº¿<ul>
<li>å¯¹Gæ—‹è½¬ï¼Œç„¶åäº¤æ¢Gå’ŒPçš„é¢œè‰²</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ol>
</li>
</ul>
</li>
<li>åˆ é™¤<ul>
<li><strong>building</strong> </li>
</ul>
</li>
</ul>
<h3 id="å“ˆå¤«æ›¼æ ‘-Huffman"><a href="#å“ˆå¤«æ›¼æ ‘-Huffman" class="headerlink" title="å“ˆå¤«æ›¼æ ‘(Huffman)"></a>å“ˆå¤«æ›¼æ ‘(Huffman)</h3><p>ä¸¤ç§ç¼–ç æ–¹å¼</p>
<ul>
<li>ç­‰é•¿ç¼–ç <ul>
<li>ä½¿ç”¨å›ºå®šé•¿åº¦çš„ä½æ¥å¯¹æ‰€æœ‰ä¿¡å·è¿›è¡Œç¼–ç </li>
<li>ç®€å•ä½†å¹¶ä¸æ˜¯æ¯ä¸ªä¿¡å·å‡ºç°çš„é¢‘ç‡æ˜¯ä¸€æ ·çš„ï¼Œæ‰€æœ‰å¯¹äºå¯¹äºç»å¸¸å‡ºç°çš„ä¿¡å·ï¼Œéœ€è¦ä½¿ç”¨å¾ˆå¤šçš„èµ„æº</li>
</ul>
</li>
<li>ä¸ç­‰é•¿ç¼–ç <ul>
<li>å¯¹äºå‡ºç°é¢‘ç‡ä¸åŒçš„ä¿¡å·å¯ä»¥é‡‡ç”¨ä¸åŒé•¿åº¦çš„ä½è¿›è¡Œç¼–ç </li>
<li>èŠ‚çœèµ„æºï¼Œä½†ä¸ºä¿è¯è¯‘ç å”¯ä¸€æ€§éœ€è¦è¿›è¡Œå¤æ‚çš„æ“ä½œ</li>
</ul>
</li>
</ul>
<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨äºŒå‰æ ‘æ¥è¿›è¡Œ01ç¼–ç ï¼Œä¸ºäº†ä¿è¯è¯‘ç å”¯ä¸€æ€§ï¼Œåˆ™éœ€è¦æ¯ä¸ªç¼–ç ä¸èƒ½æ˜¯å…¶ä»–ä»»æ„ä¸€ä¸ªç¼–ç çš„å‰ç¼€ã€‚æ‰€ä»¥ç¼–ç çš„ç»“æœå¿…é¡»éƒ½æ˜¯å‡ºç°åœ¨å¶å­èŠ‚ç‚¹ã€‚</p>
<p>å¯¹äºæœ€ä¼˜çš„ç¼–ç ï¼Œæˆ‘ä»¬éœ€è¦ä½¿å¾—æ ‘çš„æƒå€¼æœ€å°ï¼Œé‚£ä¹ˆæƒå€¼å¤§çš„èŠ‚ç‚¹åº”å°½é‡é è¿‘æ ¹èŠ‚ç‚¹ï¼Œå“ˆå¤«æ›¼æ ‘å°±æ˜¯ä¸ºäº†è§£å†³æœ€ä¼˜ç¼–ç é—®é¢˜äº§ç”Ÿçš„ã€‚</p>
<p><strong>ç®—æ³•</strong> :å¯¹äºä¸€ç»„å¸¦æƒèŠ‚ç‚¹ï¼Œæ¯æ¬¡é€‰å–æœ€å°å’Œæ¬¡å°çš„çš„èŠ‚ç‚¹ä»åŸæ•°ç»„ä¸­åˆ é™¤ï¼Œç„¶åå®ƒä»¬æƒå€¼çš„å’Œç»„æˆæ–°çš„èŠ‚ç‚¹åŠ å…¥åˆ°åŸæ•°ç»„ä¸­ï¼Œå®ƒä»¬æˆä¸ºè¿™ä¸ªæ–°èŠ‚ç‚¹çš„å­©å­ã€‚å¦‚æ­¤å¾ªç¯</p>
<p><strong>æ•°æ®ç»“æ„</strong>ï¼š</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> weight;</span><br><span class="line">    <span class="keyword">int</span> parent;</span><br><span class="line">    <span class="keyword">int</span> Lchild;</span><br><span class="line">    <span class="keyword">int</span> Rchild;</span><br><span class="line">&#125; HNode;</span><br></pre></td></tr></table></figure>

<p>ç”±äºå“ˆå¤«æ›¼æ ‘çš„ä¸¤ä¸¤èŠ‚ç‚¹åˆå¹¶ç»„æˆçš„æ ‘ï¼Œæ‰€ä»¥ä¸ä¼šå­˜åœ¨å‡ºåº¦ä¸º1çš„èŠ‚ç‚¹ï¼Œæ•…å…±æœ‰2n-1ä¸ªèŠ‚ç‚¹ã€‚å¼€è¾Ÿä¸€ä¸ª2n-1çš„æ•°ç»„ï¼Œç„¶åæ ¹æ®ç®—æ³•å¡«å……ã€‚</p>
<table>
<thead>
<tr>
<th>Id</th>
<th>weight</th>
<th>parent</th>
<th>Lchild</th>
<th>Rchild</th>
</tr>
</thead>
<tbody><tr>
<td>0</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>1</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>â€¦</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>2n-2</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<p>ä»æ²¡æœ‰æ ‡è®°çˆ¶èŠ‚ç‚¹çš„èŠ‚ç‚¹ä¸­é€‰æ‹©æœ€å°å’Œæ¬¡å°çš„èŠ‚ç‚¹ï¼Œç»„æˆæ–°çš„èŠ‚ç‚¹ï¼Œæ”¾å…¥é˜Ÿå°¾</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆå§‹åŒ–ç­‰æ“ä½œ</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=rear; i&lt;<span class="number">2</span>*n<span class="number">-1</span>; i++)&#123; </span><br><span class="line">    findNodes(nodes, <span class="built_in">min</span>, cmin); <span class="comment">// ä»æ²¡æœ‰parentçš„èŠ‚ç‚¹ä¸­æ‰¾å‡ºæœ€å°å’Œæ¬¡å°çš„èŠ‚ç‚¹</span></span><br><span class="line">    nodes[<span class="built_in">min</span>].parent = i;</span><br><span class="line">    nodes[cmin].parent = i;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ’å…¥å°¾éƒ¨</span></span><br><span class="line">    nodes[i].weight = nodes[<span class="built_in">min</span>].weight + nodes[cmin].weight;</span><br><span class="line">    nodes[i].Lchild = <span class="built_in">min</span>;</span><br><span class="line">    nodes[i].Rchild = cmin;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">findNodes</span><span class="params">(HNode* arr, <span class="keyword">int</span>&amp; <span class="built_in">min</span>, <span class="keyword">int</span>&amp; cmin)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> <span class="built_in">min</span>=MAXINT;</span><br><span class="line">    <span class="keyword">int</span> cmin=MAXINT;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;arr.<span class="built_in">size</span>; i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(arr[i].parent == EMPTY)&#123;</span><br><span class="line">            <span class="keyword">if</span>(arr[i].weight &lt; <span class="built_in">min</span>)&#123;</span><br><span class="line">                cmin = <span class="built_in">min</span>;</span><br><span class="line">                <span class="built_in">min</span> = arr[i].weight;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(arr[i].weight &lt; cmin)&#123;</span><br><span class="line">                cmin = arr[i].weight;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ„é€ å¥½å“ˆå¤«æ›¼æ ‘åï¼Œè¯‘ç å’Œç¼–ç æ“ä½œå°±ç®€å•äº†ã€‚</p>
<ul>
<li>è¯‘ç : <ul>
<li>ä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œ0æ‰¾å·¦èŠ‚ç‚¹ï¼Œ1æ‰¾å³èŠ‚ç‚¹(ä¸å…·ä½“æ€ä¹ˆå»ºç«‹çš„å“ˆå¤«æ›¼æ ‘æœ‰å…³)</li>
<li>é‡åˆ°å¶å­èŠ‚ç‚¹åˆ™å¾—åˆ°è¯‘ç ç»“æœ</li>
</ul>
</li>
<li>ç¼–ç ï¼š<ul>
<li>ä»å¶å­èŠ‚ç‚¹å¼€å§‹ï¼Œå‘ä¸Šå¯»æ‰¾å…¶çˆ¶èŠ‚ç‚¹ï¼Œå¦‚æœèŠ‚ç‚¹æ˜¯çˆ¶èŠ‚ç‚¹çš„å·¦å­©å­ï¼Œåˆ™ç¼–ç 0ï¼Œå¦åˆ™ç¼–ç 1ï¼Œä»å°¾å‘å‰å¡«å……</li>
<li>å¦‚<code>***010\0</code></li>
<li>æ‰¾åˆ°æ ¹èŠ‚ç‚¹åˆ™å°†ç¼–ç ä¼ å‡ºå³å¯</li>
</ul>
</li>
</ul>
<hr>
<h1 id="å›¾"><a href="#å›¾" class="headerlink" title="å›¾"></a>å›¾</h1><h2 id="DFSæ·±åº¦ä¼˜å…ˆæœç´¢"><a href="#DFSæ·±åº¦ä¼˜å…ˆæœç´¢" class="headerlink" title="DFSæ·±åº¦ä¼˜å…ˆæœç´¢"></a>DFSæ·±åº¦ä¼˜å…ˆæœç´¢</h2><ul>
<li>ä»ä¸€èŠ‚ç‚¹å‡ºå‘<ul>
<li>éè¿é€šå›¾åˆ†è€Œæ²»ä¹‹</li>
</ul>
</li>
<li>ä¾æ¬¡ä»è®¿é—®é‚»æ¥ç‚¹,ç›´è‡³æ‰€æœ‰é‚»æ¥ç‚¹éƒ½è¢«è®¿é—®<ul>
<li>ä¾‹:è¿·å®«  </li>
</ul>
</li>
</ul>
<h2 id="BFSå¹¿åº¦ä¼˜å…ˆæœç´¢"><a href="#BFSå¹¿åº¦ä¼˜å…ˆæœç´¢" class="headerlink" title="BFSå¹¿åº¦ä¼˜å…ˆæœç´¢"></a>BFSå¹¿åº¦ä¼˜å…ˆæœç´¢</h2><ul>
<li>ä»ä¸€èŠ‚ç‚¹å‡ºå‘</li>
<li>æŠŠä»–æ‰€æœ‰çš„é‚»æ¥ç‚¹å…¥é˜Ÿåˆ—,å¹¶æ£€æµ‹ç›®æ ‡èŠ‚ç‚¹</li>
<li>ä¾æ¬¡æŠŠèŠ‚ç‚¹å‡ºé˜Ÿåˆ—,å¹¶é€’å½’çš„æŠŠä»–çš„é‚»æ¥ç‚¹å…¥é˜Ÿåˆ—,ç›´åˆ°è®¿é—®æ‰€æœ‰ç‚¹<ul>
<li>ä¾‹:æ ‘çš„å±‚åºéå†  </li>
</ul>
</li>
</ul>
<h3 id="å¹¶æŸ¥é›†"><a href="#å¹¶æŸ¥é›†" class="headerlink" title="å¹¶æŸ¥é›†"></a>å¹¶æŸ¥é›†</h3><p>è‹¥å­˜åœ¨ä¸¤ç‚¹åœ¨åŒä¸€ä¸ªè¿é€šé›†åˆä¸­ï¼Œåˆ™è¿™ä¸¤ç‚¹å­˜åœ¨å›è·¯</p>
<ul>
<li>Find() æ‰¾æ ¹èŠ‚ç‚¹</li>
<li>Union() åˆå¹¶æˆé›†åˆ</li>
</ul>
<h2 id="æœ€çŸ­è·¯é—®é¢˜"><a href="#æœ€çŸ­è·¯é—®é¢˜" class="headerlink" title="æœ€çŸ­è·¯é—®é¢˜"></a>æœ€çŸ­è·¯é—®é¢˜</h2><h3 id="Dijkstraç®—æ³•"><a href="#Dijkstraç®—æ³•" class="headerlink" title="Dijkstraç®—æ³•"></a>Dijkstraç®—æ³•</h3><p>è§£å†³å•æºè·¯éé€’å‡é¡ºåº(æ²¡æœ‰è´Ÿ)æœ€çŸ­è·¯å¾„é—®é¢˜</p>
<ul>
<li>å¯¹æ‰€æœ‰æœªæ£€ç´¢çš„ç‚¹è¿›è¡Œæ ‡è®°:collected[v] = false</li>
<li>ä»ä¸€ç‚¹å‡ºå‘,è®°å½•æ‰€æœ‰é‚»æ¥ç‚¹,è‹¥é‚»æ¥ç‚¹åŠ å…¥åè·¯å¾„æœ€çŸ­,åˆ™æ›´æ–°<ul>
<li>ç±»ä¼¼BFS</li>
</ul>
</li>
<li>æ‰€æœ‰é‚»æ¥ç‚¹è®¿é—®å®Œåcolleceted[v]=true,ä»ä¸‹ä¸€ä¸ªæœªæ£€ç´¢çš„ç‚¹ç»§ç»­å¾ªç¯,ç›´åˆ°æ£€ç´¢æ‰€æœ‰èŠ‚ç‚¹</li>
</ul>
<h3 id="Floydç®—æ³•"><a href="#Floydç®—æ³•" class="headerlink" title="Floydç®—æ³•"></a>Floydç®—æ³•</h3><p>è§£å†³å¤šæºè·¯éé€’å‡é¡ºåºæœ€çŸ­è·¯å¾„é—®é¢˜   </p>
<p>ç¨ å¯†å›¾æœ‰ä¼˜åŠ¿  </p>
<p>$T=O(V^3)$  </p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ ¸å¿ƒ</span></span><br><span class="line"><span class="comment">// é¡¶ç‚¹iåˆ°é¡¶ç‚¹j,é¡¶ç‚¹é—´çš„æœ€çŸ­è·¯å°±åœ¨çŸ©é˜µæ˜¾ç¤ºå‡ºæ¥äº†</span></span><br><span class="line"><span class="keyword">for</span>(k = <span class="number">0</span>;k&lt;N;k++)&#123;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;N;i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;N;j++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(D[i][k]+D[k][j]&lt;D[i][j])&#123;</span><br><span class="line">                D[i][j] = D[i][k]+D[k][j];</span><br><span class="line">                path[i][j] = k;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="Primç®—æ³•"><a href="#Primç®—æ³•" class="headerlink" title="Primç®—æ³•"></a>Primç®—æ³•</h3><p>è§£å†³ç¨ å¯†å›¾çš„æœ€å°ç”Ÿæˆæ ‘é—®é¢˜  </p>
<ul>
<li>ä»ä»»æ„ç‚¹å‡ºå‘</li>
<li>å¯»æ‰¾ä¸è¿™ä¸ªæ•´ä½“ç›¸é‚»,ä¸”ä¸æ„æˆå›è·¯çš„æƒæœ€å°ç‚¹</li>
<li>åŠ å…¥è¯¥æ•´ä½“,ç»§ç»­æœç´¢,ç›´è‡³æ‰€æœ‰ç‚¹éƒ½æ”¶å½•(ç”Ÿæˆæ ‘å¿…é¡»åŒ…å«æ‰€æœ‰ç‚¹)</li>
</ul>
<h3 id="Kruskalç®—æ³•"><a href="#Kruskalç®—æ³•" class="headerlink" title="Kruskalç®—æ³•"></a>Kruskalç®—æ³•</h3><p>è§£å†³ç¨€ç–å›¾çš„æœ€å°ç”Ÿæˆæ ‘é—®é¢˜  </p>
<p>$T=E\log{E}$  </p>
<ul>
<li>æ ¸å¿ƒæ€æƒ³,æ¯ä¸ªé¡¶ç‚¹éƒ½æ˜¯ä¸€æ£µæ ‘,æŠŠæ£®æ—è¿æˆæ ‘</li>
<li>æ‰¾æœ€çŸ­ä¸”ä¸æ„æˆå›è·¯çš„è¾¹,åˆå› ä¸ºæ¯ä¸ªé¡¶ç‚¹éƒ½æ˜¯ä¸€æ£µæ ‘,æ¯ä¸ªè¾¹éƒ½æŠŠæ£®æ—è¿æˆæ ‘</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">MST=&#123;&#125;;  <span class="comment">// æœ€å°ç”Ÿæˆæ ‘</span></span><br><span class="line">E;   <span class="comment">// è¾¹é›†</span></span><br><span class="line"><span class="keyword">while</span>(æ²¡å¤ŸV<span class="number">-1</span>æ¡è¾¹&amp;&amp;Eæ²¡ç©º)&#123;</span><br><span class="line">    findmin();  <span class="comment">// æ‰¾æœ€å°è¾¹  ç”¨æœ€å°å †</span></span><br><span class="line">    delet(E(v,w));  <span class="comment">// æŠŠè¯¥è¾¹ç§»é™¤è¾¹é›†E</span></span><br><span class="line">    <span class="keyword">if</span>(E(v,w)åŠ å…¥MSTä¸æ„æˆå›è·¯)   <span class="comment">// å¹¶æŸ¥é›†</span></span><br><span class="line">        join(E(v,w));  <span class="comment">// åŠ å…¥å¹¶æŸ¥é›†</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        å•çº¯çš„åˆ é™¤</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(MSTä¸­è¾¹ä¸å¤ŸV<span class="number">-1</span>æ¡)</span><br><span class="line">    ç”Ÿæˆæ ‘ä¸å­˜åœ¨</span><br></pre></td></tr></table></figure>


<h3 id="Aæ˜Ÿå¯»è·¯ç®—æ³•"><a href="#Aæ˜Ÿå¯»è·¯ç®—æ³•" class="headerlink" title="Aæ˜Ÿå¯»è·¯ç®—æ³•"></a>Aæ˜Ÿå¯»è·¯ç®—æ³•</h3><ul>
<li>å¯å‘æ€§æœç´¢ï¼šf = g + h<ul>
<li>fï¼šå½“å‰ç‚¹åˆ°ç»ˆç‚¹çš„ä»£ä»·</li>
<li>gï¼šèµ·ç‚¹åˆ°å½“å‰ç‚¹çš„ä»£ä»·</li>
<li>hï¼šå½“å‰ç‚¹åˆ°ç»ˆç‚¹çš„ <strong>é¢„ä¼°ä»£ä»·</strong><ul>
<li>å¿½ç•¥éšœç¢ï¼Œåªç®—ç›´çº¿è·ç¦»ï¼Œä½†æ˜¯ç§»åŠ¨æ—¶åªèµ°æ— éšœç¢çš„è·¯</li>
</ul>
</li>
</ul>
</li>
<li>è¿‡ç¨‹<ul>
<li>ä½¿ç”¨ä¸€ä¸ªOPENåˆ—è¡¨ä¿å­˜èƒ½èµ°ä¸”æœªèµ°è¿‡çš„è·¯</li>
<li>ä½¿ç”¨ä¸€ä¸ªCLOSEDåˆ—è¡¨ä¿å­˜èµ°è¿‡çš„è·¯</li>
<li>å°†èµ·ç‚¹æ”¾å…¥OPENåˆ—è¡¨</li>
<li>å¾ªç¯<ul>
<li><ol>
<li><strong>current=OPENåˆ—è¡¨ä¸­fæœ€å°çš„ç‚¹</strong></li>
</ol>
</li>
<li><ol start="2">
<li>OPENä¸­ç§»å‡ºcurrentæ”¾å…¥CLOSED</li>
</ol>
</li>
<li><ol start="3">
<li>å¦‚æœcurrentæ˜¯ç»ˆç‚¹ï¼Œåˆ™å¾ªç¯ç»“æŸ</li>
</ol>
</li>
<li><ol start="3">
<li>éå†currentçš„æ‰€æœ‰é‚»å±…(å…¶ä¸­çš„é‚»å±…ä¸èƒ½æ˜¯CLOSEDä¸­ã€ä¸èƒ½æ˜¯éšœç¢ç‰©)</li>
</ol>
</li>
<li><ol start="4">
<li>è®¡ç®—é‚»å±…çš„f</li>
</ol>
</li>
<li><ol start="5">
<li>å°†é‚»å±…çš„parentè®¾ä¸ºcurrent</li>
</ol>
</li>
<li><ol start="6">
<li>å°†é‚»å±…æ”¾å…¥OPENåˆ—è¡¨</li>
</ol>
</li>
</ul>
</li>
<li>æœ€åä»ç»ˆç‚¹ä¸€ç›´æ²¿ç€çˆ¶èŠ‚ç‚¹èµ°å°±æ‰¾åˆ°äº†æœ€çŸ­è·¯å¾„</li>
</ul>
</li>
</ul>
<hr>
<h1 id="æ•ˆç‡é—®é¢˜"><a href="#æ•ˆç‡é—®é¢˜" class="headerlink" title="æ•ˆç‡é—®é¢˜"></a>æ•ˆç‡é—®é¢˜</h1><h3 id="è”æœºç®—æ³•"><a href="#è”æœºç®—æ³•" class="headerlink" title="è”æœºç®—æ³•"></a>è”æœºç®—æ³•</h3><p>åœ¨ä»»æ„æ—¶åˆ»ï¼Œç®—æ³•å¯¹è¦æ“ä½œçš„æ•°æ®åªè¯»å…¥ï¼ˆæ‰«æï¼‰ä¸€æ¬¡ï¼Œä¸€æ—¦è¢«è¯»å…¥å¹¶å¤„ç†ï¼Œå®ƒå°±ä¸éœ€è¦åœ¨è¢«è®°å¿†äº†ã€‚è€Œåœ¨æ­¤å¤„ç†è¿‡ç¨‹ä¸­ç®—æ³•èƒ½å¯¹å®ƒå·²ç»è¯»å…¥çš„æ•°æ®ç«‹å³ç»™å‡ºç›¸åº”å­åºåˆ—é—®é¢˜çš„æ­£ç¡®ç­”æ¡ˆã€‚å…·æœ‰è¿™ç§ç‰¹æ€§çš„ç®—æ³•å«åšè”æœºç®—æ³•ï¼ˆon-line algorithmã€‚</p>
<h3 id="åˆ†æ²»ç®—æ³•"><a href="#åˆ†æ²»ç®—æ³•" class="headerlink" title="åˆ†æ²»ç®—æ³•"></a>åˆ†æ²»ç®—æ³•</h3><p>åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œåˆ†æ²»æ³•æ˜¯ä¸€ç§å¾ˆé‡è¦çš„ç®—æ³•ã€‚å­—é¢ä¸Šçš„è§£é‡Šæ˜¯â€œåˆ†è€Œæ²»ä¹‹â€ï¼Œå°±æ˜¯æŠŠä¸€ä¸ªå¤æ‚çš„é—®é¢˜åˆ†æˆä¸¤ä¸ªæˆ–æ›´å¤šçš„ç›¸åŒæˆ–ç›¸ä¼¼çš„å­é—®é¢˜ï¼Œå†æŠŠå­é—®é¢˜åˆ†æˆæ›´å°çš„å­é—®é¢˜â€¦â€¦ç›´åˆ°æœ€åå­é—®é¢˜å¯ä»¥ç®€å•çš„ç›´æ¥æ±‚è§£ï¼ŒåŸé—®é¢˜çš„è§£å³å­é—®é¢˜çš„è§£çš„åˆå¹¶ã€‚è¿™ä¸ªæŠ€å·§æ˜¯å¾ˆå¤šé«˜æ•ˆç®—æ³•çš„åŸºç¡€ï¼Œå¦‚æ’åºç®—æ³•(å¿«é€Ÿæ’åºï¼Œå½’å¹¶æ’åº)ï¼Œå‚…ç«‹å¶å˜æ¢(å¿«é€Ÿå‚…ç«‹å¶å˜æ¢)â€¦â€¦</p>
<ul>
<li>è¯¥é—®é¢˜çš„è§„æ¨¡ç¼©å°åˆ°ä¸€å®šçš„ç¨‹åº¦å°±å¯ä»¥å®¹æ˜“åœ°è§£å†³</li>
<li>è¯¥é—®é¢˜å¯ä»¥åˆ†è§£ä¸ºè‹¥å¹²ä¸ªè§„æ¨¡è¾ƒå°çš„ç›¸åŒé—®é¢˜ï¼Œå³è¯¥é—®é¢˜å…·æœ‰æœ€ä¼˜å­ç»“æ„æ€§è´¨</li>
<li>åˆ©ç”¨è¯¥é—®é¢˜åˆ†è§£å‡ºçš„å­é—®é¢˜çš„è§£å¯ä»¥åˆå¹¶ä¸ºè¯¥é—®é¢˜çš„è§£</li>
<li>è¯¥é—®é¢˜æ‰€åˆ†è§£å‡ºçš„å„ä¸ªå­é—®é¢˜æ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œå³å­é—®é¢˜ä¹‹é—´ä¸åŒ…å«å…¬å…±çš„å­å­é—®é¢˜</li>
</ul>
<hr>
<h1 id="å›æº¯"><a href="#å›æº¯" class="headerlink" title="å›æº¯"></a>å›æº¯</h1><h3 id="å…¨æ’åˆ—"><a href="#å…¨æ’åˆ—" class="headerlink" title="å…¨æ’åˆ—"></a>å…¨æ’åˆ—</h3><p>ç»™å®šä¸€ä¸ª æ²¡æœ‰é‡å¤ æ•°å­—çš„åºåˆ—ï¼Œè¿”å›å…¶æ‰€æœ‰å¯èƒ½çš„å…¨æ’åˆ—ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥: [1,2,3]</span><br><span class="line">è¾“å‡º:</span><br><span class="line">[</span><br><span class="line">  [1,2,3],</span><br><span class="line">  [1,3,2],</span><br><span class="line">  [2,1,3],</span><br><span class="line">  [2,3,1],</span><br><span class="line">  [3,1,2],</span><br><span class="line">  [3,2,1]</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<ul>
<li>æ€è·¯ï¼Œå¯ä»¥æ¨¡æ‹Ÿå…¨æ’åˆ—çš„è¿‡ç¨‹ï¼Œä¸€ä¸ªä¸€ä¸ªæ’å…¥ã€‚åªæ˜¯ä¸åŒçš„æ–¹æ³•ä¼˜åŠ£ç¨‹åº¦ä¸åŒ<ul>
<li>å¦™ï¼šé€šè¿‡äº¤æ¢ä½ç½®ç»´æŠ¤å·²é€‰æ•°ï¼Œå›æº¯æ—¶å†æ¢å›æ¥<ul>
<li><ol>
<li>ä¼˜åŒ–ç©ºé—´ï¼Œä¸éœ€è¦è€Œå¤–ç©ºé—´ä¿å­˜å·²é€‰</li>
</ol>
</li>
<li><ol start="2">
<li>ä¼˜åŒ–æœªé€‰æ•°æŸ¥è¯¢ï¼Œäº¤æ¢åå·²é€‰çš„æ•°éƒ½æ’åœ¨äº†å‰å¤´ï¼Œæœªé€‰çš„æ•°ä»å‰©ä½™é•¿åº¦å¼€å§‹å°±æ˜¯</li>
</ol>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">backtrack</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; res, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; output, <span class="keyword">int</span> first, <span class="keyword">int</span> len)</span></span>&#123;</span><br><span class="line">    <span class="comment">// æ‰€æœ‰æ•°éƒ½å¡«å®Œäº†</span></span><br><span class="line">    <span class="keyword">if</span> (first == len) &#123;</span><br><span class="line">        res.emplace_back(output);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = first; i &lt; len; ++i) &#123;  <span class="comment">// firstè¡¨ç¤ºè¦æ’å…¥çš„ä½ç½®ï¼Œiè¡¨ç¤ºè¦é€‰æ‹©æ’å…¥çš„å¯¹è±¡</span></span><br><span class="line">        <span class="comment">// ä½¿ç”¨äº¤æ¢æ¥ç»´æŠ¤å·²é€‰æ•°ç»„</span></span><br><span class="line">        swap(output[i], output[first]);</span><br><span class="line">        <span class="comment">// ç»§ç»­é€’å½’å¡«ä¸‹ä¸€ä¸ªæ•°</span></span><br><span class="line">        backtrack(res, output, first + <span class="number">1</span>, len);</span><br><span class="line">        <span class="comment">// æ’¤é”€æ“ä½œ</span></span><br><span class="line">        swap(output[i], output[first]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h1 id="ä½è¿ç®—"><a href="#ä½è¿ç®—" class="headerlink" title="ä½è¿ç®—"></a>ä½è¿ç®—</h1><h2 id="å¸ƒéš†è¿‡æ»¤å™¨"><a href="#å¸ƒéš†è¿‡æ»¤å™¨" class="headerlink" title="å¸ƒéš†è¿‡æ»¤å™¨"></a>å¸ƒéš†è¿‡æ»¤å™¨</h2><p>è®¾æœ‰100äº¿ä¸ªé»‘åå•ç½‘é¡µï¼Œæ¯ä¸ªç½‘é¡µURLå ç”¨64å­—èŠ‚ï¼Œæƒ³è¦å®ç°ä¸€ç§ç½‘é¡µè¿‡æ»¤ç³»ç»Ÿï¼Œè¿‡æ»¤é»‘åå•ï¼Œå…è®¸æœ‰ä¸‡åˆ†ä¹‹ä¸€çš„åˆ¤æ–­å¤±è¯¯ï¼Œä¸”è€Œå¤–ç©ºé—´ä¸è¶…è¿‡30Gã€‚</p>
<p>å¦‚æœç”¨å“ˆå¸Œè¡¨å­˜å…¥æ•°æ®åº“ï¼Œä½†æ˜¯è‡³å°‘éœ€è¦640Gç©ºé—´ã€‚è¿™æ ·å¯¹ç©ºé—´è¦æ±‚æ¯”è¾ƒä¸¥æ ¼ï¼Œä½†å…è®¸ä¸€å®šå¤±è¯¯çš„è¿‡æ»¤ç³»ç»Ÿï¼Œå¾€å¾€æ˜¯  <strong>å¸ƒéš†è¿‡æ»¤å™¨ï¼šä½¿ç”¨å¾ˆå°‘çš„ç©ºé—´å°±èƒ½æŠŠæ­£ç¡®ç‡åšåˆ°å¾ˆé«˜çš„ç¨‹åº¦</strong> </p>
<p>å¸ƒéš†è¿‡æ»¤å™¨å¯ä»¥ç²¾ç¡®çš„ä»£è¡¨ä¸€ä¸ªé›†åˆï¼Œå¯ç²¾ç¡®åˆ°åˆ¤æ–­æŸä¸€å…ƒç´ æ˜¯å¦åœ¨é›†åˆä¸­ï¼Œä½†100%çš„ç²¾ç¡®æ˜¯ä¸å¯èƒ½çš„ã€‚</p>
<ul>
<li>åŠ å…¥å¸ƒéš†è¿‡æ»¤å™¨<ul>
<li>ä¸€ä¸ªé•¿åº¦ä¸ºmçš„bitç±»å‹çš„æ•°ç»„<code>bitarray</code>ï¼Œæ¯ä¸ªä½ç½®åªæœ‰0(ç™½)å’Œ1(é»‘)</li>
<li>æœ‰kä¸ªå“ˆå¸Œå‡½æ•°ï¼Œè¿™äº›å“ˆå¸Œå‡½æ•°éƒ½è¶³å¤Ÿä¼˜ç§€ï¼Œä¸”è¾“å‡ºåŸŸéƒ½å¤§äºç­‰äºm</li>
<li>å¯¹äºä¸€ä¸ªå¯¹è±¡ï¼Œå¦‚64å­—èŠ‚çš„URLé€šè¿‡kä¸ªå“ˆå¸Œå‡½æ•°<ul>
<li>å“ˆå¸Œçš„ç»“æœå¯¹må–ä½™ï¼Œå–ä½™çš„ç»“æœåœ¨bitarrayä¸Šå°†ç›¸åº”çš„ä½ç½®è®¾ä¸º1(æ¶‚é»‘)</li>
</ul>
</li>
<li>ä½¿ç”¨è¯¥æ–¹æ³•å¤„ç†æ‰€æœ‰çš„å¯¹è±¡ï¼Œå¦‚æœé‡åˆ°å·²ç»æ¶‚é»‘çš„ä½ç½®ï¼Œåˆ™è®©å…¶ä¿æŒé»‘</li>
</ul>
</li>
<li>æ£€æŸ¥<ul>
<li>å°†å¯¹è±¡é€šè¿‡è¿™kä¸ªå“ˆå¸Œå‡½æ•°ï¼Œå–ä½™ç­‰æ“ä½œï¼Œæ‰¾åˆ°bitarrayä¸Šå¯¹åº”çš„ä½ç½®</li>
<li>å¦‚æœå¾—åˆ°çš„ä½ç½®éƒ½ä¸ºé»‘è‰²ï¼Œåˆ™å°±æ˜¯é»‘åå•ä¸­ï¼Œå¦åˆ™ä¸æ˜¯</li>
<li>ä½†æ˜¯ä¹Ÿæœ‰å¯èƒ½è¯¯åˆ¤ï¼Œå°†ç™½çš„åˆ¤ä¸ºé»‘çš„</li>
</ul>
</li>
</ul>
<h3 id="bitarrayå’Œkå¤§å°çš„ç¡®å®š"><a href="#bitarrayå’Œkå¤§å°çš„ç¡®å®š" class="headerlink" title="bitarrayå’Œkå¤§å°çš„ç¡®å®š"></a>bitarrayå’Œkå¤§å°çš„ç¡®å®š</h3><p>bitarrayå¤§å°mç”±æ ·æœ¬æ•°é‡nå’Œèƒ½å®¹å¿çš„é©¶å…¥ç‡på†³å®šã€‚ä¸Šé¢˜ä¸­$m=100äº¿ï¼Œp=0.01%$</p>
<p>$$<br>m = - \frac{n \times lnp}{(ln2)^2} \<br>k = ln2 \times \frac mn = 0.7 \times \frac mn<br>$$</p>
<h2 id="ä¸ç”¨é¢å¤–ç©ºé—´äº¤æ¢é‡æ•´æ•°çš„å€¼"><a href="#ä¸ç”¨é¢å¤–ç©ºé—´äº¤æ¢é‡æ•´æ•°çš„å€¼" class="headerlink" title="ä¸ç”¨é¢å¤–ç©ºé—´äº¤æ¢é‡æ•´æ•°çš„å€¼"></a>ä¸ç”¨é¢å¤–ç©ºé—´äº¤æ¢é‡æ•´æ•°çš„å€¼</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">a = a0;</span><br><span class="line">b = b0;</span><br><span class="line">a = a^b;  <span class="comment">// a=a0^b0, b=b0</span></span><br><span class="line">b = a^b;  <span class="comment">// a=a0^b0, b=a0^b0^b0=a0</span></span><br><span class="line">a = a^b;  <span class="comment">// a=a0^b0^a0=b0, b=a0</span></span><br></pre></td></tr></table></figure>


<h2 id="å¥‡æ•°æ¬¡å¶æ•°æ¬¡"><a href="#å¥‡æ•°æ¬¡å¶æ•°æ¬¡" class="headerlink" title="å¥‡æ•°æ¬¡å¶æ•°æ¬¡"></a>å¥‡æ•°æ¬¡å¶æ•°æ¬¡</h2><ul>
<li><ol>
<li>å‡è®¾ä¸€ä¸ªæ•°ç»„ä¸­åªæœ‰ä¸€ä¸ªæ•°å‡ºç°äº†å¥‡æ•°æ¬¡ï¼Œå…¶ä»–æ•°éƒ½å‡ºç°äº†å¶æ•°æ¬¡ï¼Œè¦æ±‚åœ¨æ—¶é—´å¤æ‚åº¦0(1)çš„æƒ…å†µä¸‹æ‰¾å‡ºè¿™ä¸ªæ•°ã€‚<ul>
<li>ä½¿ç”¨ä¸€ä¸ªæ•°a=0ï¼Œä¸arrä¸­çš„æ¯ä¸€ä¸ªæ•°[c, b, a, c, b, a, d]å¼‚æˆ–ï¼Œç»“æœå°±æ˜¯è¿™ä¸ªæ•°</li>
<li>å› ä¸ºå¼‚æˆ–è¿ç®—æ»¡è¶³äº¤æ¢ç‡å’Œç»“åˆç‡ï¼Œå¼‚æˆ–çš„æ¬¡åºå°±å¯ä»¥æ˜¯[aabbccd]ï¼Œæ‰€ä»¥å¾—åˆ°d</li>
</ul>
</li>
</ol>
</li>
<li><ol start="2">
<li>ç¬¬ä¸€é¢˜å°å°æ”¹è¿›ï¼Œæœ‰ä¸¤ä¸ªæ•°å‡ºç°å¥‡æ•°æ¬¡<ul>
<li>å…ˆä¸æ¯ä¸ªæ•°å¼‚æˆ–æœ€åå‰©ä¸‹<code>a=b^c</code></li>
<li>å› ä¸ºbå’Œcæ˜¯ä¸åŒçš„æ•°ï¼Œæ‰€ä»¥aä¸ä¸º0ï¼Œæ‰¾åˆ°ä¸º1çš„ä¸€ä½ï¼Œå‡è®¾æ˜¯ç¬¬kä½</li>
<li>å› ä¸ºä½kä½ä¸º1ï¼Œè¯´æ˜aå’Œbçš„ç¬¬kä½ä¸€å®šä¸ä¸€æ ·</li>
<li>ç¬¬äºŒæ¬¡éå†è®©a2=0åªä¸ä¸ç¬¬kä½ä¸º1çš„æ•°å¼‚æˆ–ï¼Œåˆ™å¼‚æˆ–çš„ç»“æœå°±æ˜¯aå’Œbä¸­çš„ä¸€ä¸ª</li>
<li><code>a^a2</code>çš„ç»“æœå°±æ˜¯aå’Œbä¸­çš„å¦ä¸€ä¸ª</li>
</ul>
</li>
</ol>
</li>
</ul>
<h1 id="åŠ¨æ€è§„åˆ’"><a href="#åŠ¨æ€è§„åˆ’" class="headerlink" title="åŠ¨æ€è§„åˆ’"></a>åŠ¨æ€è§„åˆ’</h1><p>ä»æš´åŠ›æœç´¢ æ¨å¯¼å‡º åŠ¨æ€è§„åˆ’ï¼Œç„¶åä¼˜åŒ–</p>
<h2 id="åŠ¨æ€è§„åˆ’ä¸è®°å¿†æœç´¢çš„å…³ç³»"><a href="#åŠ¨æ€è§„åˆ’ä¸è®°å¿†æœç´¢çš„å…³ç³»" class="headerlink" title="åŠ¨æ€è§„åˆ’ä¸è®°å¿†æœç´¢çš„å…³ç³»"></a>åŠ¨æ€è§„åˆ’ä¸è®°å¿†æœç´¢çš„å…³ç³»</h2><p>ç»™å®šä¸€ä¸ªé›†åˆï¼Œ{1, 5, 10, 15, 25}ï¼Œæ±‚ç»„åˆå¾—åˆ°ä¸€ä¸ªæ•°targetæ˜¯æ‰€æœ‰ç»„åˆæ•°ã€‚</p>
<ul>
<li>é€’å½’<ul>
<li>éå†æ•°ç»„ï¼Œå–ä¸€ä¸ªå€¼åï¼Œç”¨å‰©ä¸‹targetç»§ç»­é€’å½’æ‰§è¡Œ</li>
<li><strong>å¤§é‡é‡å¤è®¡ç®—</strong>ï¼Œå¯¹äºä¸€ä¸ªtargetå€¼ï¼Œç»„åˆæ•°æ˜¯ç›¸åŒçš„ï¼Œä¸éœ€è¦æ¯æ¬¡éƒ½ä»å¤´è®¡ç®—</li>
</ul>
</li>
<li>è®°å¿†æœç´¢<ul>
<li>ä½¿ç”¨ä¸€ä¸ªmapè®°å½•æŸä¸ªçŠ¶æ€ä¸‹targetå¯¹åº”çš„ç»„åˆæ•°ï¼Œå¦‚æœæ²¡è®¡ç®—è¿‡æ‰ç®—ï¼Œå¦åˆ™ç›´æ¥å–å€¼</li>
<li><strong>åŒºåˆ«äºåŠ¨æ€è§„åˆ’</strong> ï¼Œè®°å¿†æœç´¢â€ä¸è§„å®šè®¡ç®—é¡ºåºâ€ï¼Œé‡åˆ°æ— è®°å¿†çš„å°±ç®—</li>
</ul>
</li>
<li>åŠ¨æ€è§„åˆ’<ul>
<li>ç”Ÿæˆè¡Œæ•°ä¸ºNï¼Œåˆ—æ•°ä½aim+1çš„çŸ©é˜µdp(dynamic programming)ï¼Œ<code>dp[i][j]</code>è¡¨ç¤ºä½¿ç”¨<code>arr[0...i]</code>è´§å¸çš„æƒ…å†µä¸‹ï¼Œç»„æˆé’±æ•°jæœ‰å¤šå°‘ç§æ–¹æ³•</li>
<li>åŠ¨æ€è§„åˆ’è§„å®šæ¯ä¸€ç§é€’å½’çŠ¶æ€ä¸‹çš„è®¡ç®—é¡ºåºï¼Œä¾æ¬¡è¿›è¡Œè®¡ç®—</li>
<li>åŠ¨æ€è§„åˆ’ä¸¥æ ¼è§„å®šè®¡ç®—é¡ºåºï¼Œå­˜åœ¨è¿›ä¸€æ­¥ä¼˜åŒ–çš„å¯èƒ½</li>
</ul>
</li>
</ul>
<p>buildingâ€¦</p>
<h1 id="å¤§æ•°æ®"><a href="#å¤§æ•°æ®" class="headerlink" title="å¤§æ•°æ®"></a>å¤§æ•°æ®</h1><h2 id="Map-Reduce"><a href="#Map-Reduce" class="headerlink" title="Map-Reduce"></a>Map-Reduce</h2><ul>
<li>Map<ul>
<li>é€šè¿‡å“ˆå¸Œå‡½æ•°æŠŠå¤§ä»»åŠ¡åˆ†æˆå­ä»»åŠ¡</li>
</ul>
</li>
<li>Reduce<ul>
<li>æŠŠå­ä»»åŠ¡å¹¶å‘å¤„ç†ï¼Œç„¶ååˆå¹¶ç»“æœ</li>
</ul>
</li>
<li>æ³¨æ„ç‚¹<ul>
<li>å¤‡ä»½çš„è€ƒè™‘ï¼Œåˆ†å¸ƒå¼å­˜å‚¨çš„è®¾è®¡ç»†èŠ‚(å¤šå°‘å¤‡ä»½åˆé€‚)</li>
<li>ä»»åŠ¡åˆ†é…ç­–ç•¥ä¸ä»»åŠ¡è¿›åº¦è·Ÿè¸ª</li>
<li>å¤šç”¨æˆ·æƒé™æ§åˆ¶</li>
</ul>
</li>
</ul>
<p>ä»¥ä¸‹çš„ç»å…¸ç”¨map-reduceè§£å†³é—®é¢˜çš„æ–¹æ¡ˆ</p>
<h3 id="ä¾‹é¢˜"><a href="#ä¾‹é¢˜" class="headerlink" title="ä¾‹é¢˜"></a>ä¾‹é¢˜</h3><p>ç»Ÿè®¡ä¸€ç¯‡æ–‡ç« ä¸­æ¯ä¸ªå•è¯å‡ºç°æ¬¡æ•°</p>
<ul>
<li>æ–‡ç« é¢„å¤„ç†ï¼ŒæŠ“å–æœ‰æ•ˆå•è¯<ul>
<li>å»é™¤æ ‡ç‚¹ï¼Œå»é™¤è¿å­—ç¬¦ï¼Œå¤„ç†ç¼©å†™ç­‰</li>
</ul>
</li>
<li>mapé˜¶æ®µ<ul>
<li>å¯¹æ¯ä¸ªå•è¯ç”Ÿæˆè¯é¢‘ä¸ºä¸€çš„è®°å½•ï¼Œå¦‚(dog, 1), (cat, 1)</li>
<li>é€šè¿‡å“ˆå¸Œå‡½æ•°å°†æ‰€æœ‰å•è¯åˆ†æˆè‹¥å¹²ä¸ªå­ä»»åŠ¡<ul>
<li>æ¯ä¸ªå­ä»»åŠ¡ä¼šåŒ…å«è‹¥å¹²ç§å•è¯ï¼Œä½†åŒä¸€ç§å•è¯ä¸ä¼šè¢«åˆ†é…åˆ°ä¸åŒå­ä»»åŠ¡ä¸­</li>
<li>è¿™æ ·ä¸€æ¥ç›¸åŒçš„éƒ½èƒ½è¢«ç»Ÿè®¡åˆ°</li>
</ul>
</li>
</ul>
</li>
<li>reduceé˜¶æ®µ<ul>
<li>æ‰€æœ‰å­ä»»åŠ¡è®°å½•åˆå¹¶</li>
</ul>
</li>
</ul>
<h2 id="æµ·é‡æ•°æ®å¤„ç†"><a href="#æµ·é‡æ•°æ®å¤„ç†" class="headerlink" title="æµ·é‡æ•°æ®å¤„ç†"></a>æµ·é‡æ•°æ®å¤„ç†</h2><ul>
<li><ol>
<li>åˆ†æ²»ï¼Œé€šè¿‡å“ˆå¸Œå‡½æ•°å°†å¤§ä»»åŠ¡åˆ†æµ<ul>
<li>éš¾ç‚¹åœ¨äºé€šè®¯ã€æ—¶é—´å’Œç©ºé—´çš„ä¼°ç®—</li>
</ul>
</li>
</ol>
</li>
<li><ol start="2">
<li>åˆ†æµï¼Œé€šè¿‡å“ˆå¸Œå‡½æ•°å°†å¤§æ–‡ä»¶æ–‡æµåˆ°å°æ–‡ä»¶<ul>
<li>è§£å†³å±€éƒ¨é—®é¢˜ä»è€Œè§£å†³æ•´ä½“é—®é¢˜</li>
</ul>
</li>
</ol>
</li>
</ul>
<h3 id="ä¾‹é¢˜1-2"><a href="#ä¾‹é¢˜1-2" class="headerlink" title="ä¾‹é¢˜1"></a>ä¾‹é¢˜1</h3><p>å¯¹10äº¿ä¸ªipåœ°å€æ’åºï¼Œå·²çŸ¥æ¯ä¸ªipåœ°å€åªä¼šå‡ºç°ä¸€æ¬¡</p>
<ul>
<li>æ™®é€šæ–¹æ³•<ul>
<li>æ¯ä¸ªipè½¬æ¢æˆæ— ç¬¦å·æ•´æ•°</li>
<li>10äº¿ä¸ªæ•´æ•°çº¦å 4Gç©ºé—´</li>
</ul>
</li>
<li>bitmap<ul>
<li>æ¯ä¸ªipè½¬æ¢æˆæ— ç¬¦å·æ•´æ•°</li>
<li>ç”³è¯·ä¸€ä¸ª$2^32$çš„bitç±»å‹çš„æ•°ç»„ï¼Œç©ºé—´çº¦128m</li>
<li>å¦‚æœæ•´æ•°kå‡ºç°åˆ™æŠŠç¬¬k-1ä½bitæé»‘</li>
<li>ä»0ä½ç½®éå†ï¼ŒæŠŠipé€šè¿‡ä½ç½®è¿˜åŸå³å¯</li>
</ul>
</li>
</ul>
<h3 id="ä¾‹é¢˜2-1"><a href="#ä¾‹é¢˜2-1" class="headerlink" title="ä¾‹é¢˜2"></a>ä¾‹é¢˜2</h3><p>ä¸€ä¸ªåŒ…å«20äº¿ä¸ªå…¨æ˜¯æ•´æ•°çš„å¤§æ–‡ä»¶ï¼Œåœ¨å…¶ä¸­æ‰¾å‡ºå‡ºç°æ¬¡æ•°æœ€å¤šçš„æ•°ã€‚ä½†æ˜¯å†…å­˜åªæœ‰2G</p>
<ul>
<li>æ™®é€šæ–¹æ³•ï¼šHashMap<ul>
<li>keyï¼šå…·ä½“ä¸€ç§æ•°ï¼Œæ•´å‹4å­—èŠ‚</li>
<li>valueï¼šå‡ºç°æ¬¡æ•°ï¼Œæ•´å‹4å­—èŠ‚</li>
<li>ä¸€æ¡è®°å½•8å­—èŠ‚ï¼Œå¦‚æœäº§ç”Ÿ20äº¿æ¡è®°å½•å°†ä¼šæº¢å‡ºï¼Œä½†æ˜¯å¦‚æœè®°å½•æ¡æ•°æ¯”è¾ƒå°‘å¯èƒ½ä¹Ÿä¸ä¼šæº¢å‡º</li>
</ul>
</li>
<li>å“ˆå¸Œå‡½æ•° <strong>åˆ†æµ</strong><ul>
<li>å°†å¤§æ–‡ä»¶çš„æ•°åˆ†é…åˆ°å°æ–‡ä»¶ä¸­<ul>
<li>åŒä¸€ä¸ªæ•°è‚¯å®šåœ¨åŒä¸€ä¸ªæ–‡ä»¶</li>
<li>è€Œä¸”åˆ†é…å‡åŒ€ï¼Œæ¯ä¸ªæ–‡ä»¶ç”¨åˆ°çš„å†…å­˜ç›¸å½“</li>
</ul>
</li>
<li>æ‰¾å‡ºå°æ–‡ä»¶ä¸­å„è‡ªæœ€é«˜ï¼Œæ¯”è¾ƒå³å¯</li>
</ul>
</li>
</ul>
<h2 id="æ•°æ®ç¼“å­˜"><a href="#æ•°æ®ç¼“å­˜" class="headerlink" title="æ•°æ®ç¼“å­˜"></a>æ•°æ®ç¼“å­˜</h2><p>ä¸€èˆ¬ä½¿ç”¨é›†ç¾¤æ¥å®ç°æ•°æ®ç¼“å­˜ï¼Œå› æ­¤éœ€è¦ä¼˜ç§€çš„å“ˆå¸Œå‡½æ•°åœ¨åšè´Ÿè½½å‡è¡¡ã€‚å¦‚æœä½¿ç”¨ç®€å•æ˜¯å“ˆå¸Œå‡½æ•°ï¼Œå¦‚å–ä½™å“ˆå¸Œï¼Œå°†ä¼šé¢ä¸´ä»¥ä¸‹é—®é¢˜ã€‚</p>
<ul>
<li>é—®é¢˜<ul>
<li>å¢åŠ æˆ–åˆ é™¤æœºå™¨æ—¶ä»£ä»·å¾ˆé«˜ï¼Œæœºå™¨æ•°æ”¹å˜æ‰€æœ‰æ•°æ®éœ€è¦é‡æ–°å“ˆå¸Œ</li>
<li>å› æ­¤è¿˜éœ€è¦å¤§è§„æ¨¡çš„æ•°æ®è¿ç§»</li>
</ul>
</li>
<li>æ”¹è¿›æ–¹æ¡ˆ<ul>
<li><strong>ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•</strong><ul>
<li>æ•°æ®idå“ˆå¸Œè®¡ç®—çš„ç»“æœèŒƒå›´æ˜¯ 0ï½2^32</li>
<li>å°†idç»„å“ˆå¸Œç»„ç»‡æˆé¦–å°¾ç›¸è¿çš„ç¯å½¢ç»“æ„</li>
<li>æœºå™¨å‡åŒ€çš„åˆ†é…åœ¨å…¶ä¸­çš„æœºå™¨ç‚¹</li>
<li>æ•°æ®è®¡ç®—å“ˆå¸Œåï¼Œæ‰¾åˆ°è·ç¦»æœ€è¿‘(è§„å®šåªèƒ½ä¸€ä¸ªæ–¹å‘æ‰¾)çš„æœºå™¨ï¼Œåˆ™è¿™ä¸ªæ•°æ®ç”±è¯¥æœºå™¨ç®¡ç†</li>
<li>æ·»åŠ åˆ é™¤æœºå™¨åªä¼šæ”¹å˜ç¯çš„ä¸€éƒ¨åˆ†</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="å­—ç¬¦ä¸²"><a href="#å­—ç¬¦ä¸²" class="headerlink" title="å­—ç¬¦ä¸²"></a>å­—ç¬¦ä¸²</h1><h2 id="å­—ç¬¦ä¸²æ‹·è´å’Œæ›¿æ¢"><a href="#å­—ç¬¦ä¸²æ‹·è´å’Œæ›¿æ¢" class="headerlink" title="å­—ç¬¦ä¸²æ‹·è´å’Œæ›¿æ¢"></a>å­—ç¬¦ä¸²æ‹·è´å’Œæ›¿æ¢</h2><p>ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²strï¼Œå°†å…¶ä¸­ç©ºæ ¼æ›¿æ¢æˆâ€%20â€ï¼Œå‡è®¾stråé¢æœ‰è¶³å¤Ÿçš„ç©ºé—´</p>
<ul>
<li>ç®—å‡ºæ›¿æ¢åçš„é•¿åº¦</li>
<li><strong>ä»åå‘å‰æ‹·è´</strong>ï¼Œç»å¸¸æ˜¯è¿™ç§æ“ä½œ</li>
</ul>
<h2 id="æ‹¬å·åŒ¹é…"><a href="#æ‹¬å·åŒ¹é…" class="headerlink" title="æ‹¬å·åŒ¹é…"></a>æ‹¬å·åŒ¹é…</h2><p>ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²strï¼Œåˆ¤æ–­æ˜¯ä¸æ˜¯æ•´ä½“æœ‰æ•ˆçš„æ‹¬å·å­—ç¬¦ä¸²ï¼Œæœ€ä¼˜è§£æ—¶é—´å¤æ‚åº¦O(n), ç©ºé—´å¤æ‚åº¦O(1)</p>
<ul>
<li>ç”¨ä¸€ä¸ªnumè®°å½•ä¸€ç§æ‹¬å·ï¼Œä»¥ä¸‹å‡è®¾åªæœ‰ä¸€ç§æ‹¬å·å‡ºç°</li>
<li>å·¦æ‹¬å·num++ï¼Œå³æ‹¬å·numâ€“</li>
<li>å¦‚æœnum&lt;0ï¼Œreturn false</li>
<li>å¦‚æœéå†å®Œånum==0,return true</li>
</ul>
<h2 id="æœ€é•¿æ— é‡å¤å­å­—ç¬¦ä¸²"><a href="#æœ€é•¿æ— é‡å¤å­å­—ç¬¦ä¸²" class="headerlink" title="æœ€é•¿æ— é‡å¤å­å­—ç¬¦ä¸²"></a>æœ€é•¿æ— é‡å¤å­å­—ç¬¦ä¸²</h2><p>ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²stræ‰¾å‡ºå®ƒçš„æœ€é•¿æ— é‡å¤å­å­—ç¬¦ä¸²ï¼Œæœ€ä¼˜è§£O(n), O(n)</p>
<ul>
<li>å‡è®¾s[i]è¡¨ç¤ºiä½ç½®ä¸ºç»“å°¾ï¼Œèƒ½åˆ°è¾¾(ç¬¦åˆä¸é‡å¤å­—ç¬¦)çš„æœ€å·¦çš„ä½ç½®</li>
<li>mapï¼Œç»Ÿè®¡æ¯ç§å­—ç¬¦æœ€åä¸€æ¬¡å‡ºç°çš„ä½ç½®</li>
<li><code>int pre</code>ï¼Œs[i-1]ç»“å°¾çš„æƒ…å†µä¸‹ï¼Œèƒ½åˆ°è¾¾çš„æœ€å·¦ä½ç½®</li>
<li><ol>
<li><code>map[str[i]]</code>æ‰¾åˆ°ä¹‹å‰<code>str[i]</code>ç»“å°¾çš„ä½ç½®ï¼Œè®°ä¸ºA</li>
</ol>
</li>
<li><ol start="2">
<li>ä½¿ç”¨preï¼Œæ‰¾åˆ°<code>str[i-1]</code>æœ€å·¦ä½ç½®ï¼Œè®°ä¸ºB</li>
</ol>
</li>
<li><ol start="3">
<li>æ¯”è¾ƒAå’ŒBï¼Œé€‰æ‹©å½“å‰ä½ç½®é—´Aæˆ–Bè¾ƒçŸ­çš„ä¸€æ–¹ï¼Œæ›´æ–°æœ€å¤§æ— é‡å¤å­—ç¬¦å­—ä¸²é•¿åº¦</li>
</ol>
</li>
<li><ol start="4">
<li>æ›´æ–°ï¼Œmapå’Œpre</li>
</ol>
</li>
<li>åŸç†:<ul>
<li>ä»å·¦åˆ°å³éƒ½æ˜¯å–æœ€é•¿æ— é‡å¤ï¼Œå†å¤šä¸€ä¸ªå°±é‡å¤çš„æ“ä½œ</li>
</ul>
</li>
</ul>
<h2 id="å­—ç¬¦ä¸²æ—‹è½¬-é€†åºçš„å¦™ç”¨"><a href="#å­—ç¬¦ä¸²æ—‹è½¬-é€†åºçš„å¦™ç”¨" class="headerlink" title="å­—ç¬¦ä¸²æ—‹è½¬/é€†åºçš„å¦™ç”¨"></a>å­—ç¬¦ä¸²æ—‹è½¬/é€†åºçš„å¦™ç”¨</h2><h3 id="æ—‹è½¬é¢˜"><a href="#æ—‹è½¬é¢˜" class="headerlink" title="æ—‹è½¬é¢˜"></a>æ—‹è½¬é¢˜</h3><p>ç»™å®šä¸¤ä¸ªå­—ç¬¦ä¸²str1ï¼Œstr2ï¼Œåˆ¤æ–­æ˜¯å¦äº’ä¸ºæ—‹è½¬è¯ï¼Œè¦æ±‚æ—¶é—´å¤æ‚åº¦O(N)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a &#x3D; &quot;cdab&quot;, b &#x3D; &quot;abcd&quot;, true</span><br><span class="line">a &#x3D; &quot;1ab2&quot;, b &#x3D; &quot;ab12&quot;, false</span><br><span class="line">a &#x3D; &quot;2ab1&quot;, b &#x3D; &quot;ab12&quot;, true</span><br></pre></td></tr></table></figure>

<ul>
<li>KMP(str1+str1, str2)<ul>
<li>strå’Œstræ‹¼æ¥åï¼Œä»¥é•¿åº¦ä¸º4çš„å­—ç¬¦ä¸²ä¸ºä¾‹ï¼Œåˆ™[0<del>3]ï¼Œ[1-4], [2</del>5]â€¦å„æ˜¯ä¸€ç§æ—‹è½¬æ¬¡ï¼Œå› æ­¤æ‹¼æ¥åçš„å­—ç¬¦ä¸²åŒ…å«æ‰€æœ‰å¯èƒ½çš„æ—‹è½¬è¯</li>
</ul>
</li>
</ul>
<h3 id="é€†åºå¦™ç”¨"><a href="#é€†åºå¦™ç”¨" class="headerlink" title="é€†åºå¦™ç”¨"></a>é€†åºå¦™ç”¨</h3><ul>
<li>ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œåœ¨å•è¯é—´åšé€†åºè°ƒæ•´ï¼Œå¦‚: Iâ€™m a student.  =&gt;  student. a Iâ€™m<ul>
<li>å…¨å±€é€†åºï¼Œå†æ¯ä¸ªå•è¯æ¯ä¸ªå•è¯çš„é€†åº</li>
</ul>
</li>
<li>ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²strï¼Œå’Œä¸€ä¸ªæ•´æ•°iï¼Œiå°†str[0:i]ç§»åˆ°å³ä¾§ï¼Œstr[i+1:n-1]ç§»åˆ°å·¦ä¾§ã€‚å¦‚ï¼šstr = â€œabcdeâ€, i=2 =&gt; â€œdeabcâ€ï¼Œè¦æ±‚:æ—¶O(N)ï¼Œç©ºO(1)<ul>
<li>æ•´ä½“é€†åºï¼Œå†æ¯æ®µé€†åº([0,2]é€†åºï¼Œ[3,n-1]é€†åº)</li>
</ul>
</li>
</ul>
<h1 id="æ’åˆ—ç»„åˆ"><a href="#æ’åˆ—ç»„åˆ" class="headerlink" title="æ’åˆ—ç»„åˆ"></a>æ’åˆ—ç»„åˆ</h1><h2 id="å¡ç‰¹å…°æ•°å…¬å¼"><a href="#å¡ç‰¹å…°æ•°å…¬å¼" class="headerlink" title="å¡ç‰¹å…°æ•°å…¬å¼"></a>å¡ç‰¹å…°æ•°å…¬å¼</h2><h3 id="å…¬å¼ä¹‹ä¸€"><a href="#å…¬å¼ä¹‹ä¸€" class="headerlink" title="å…¬å¼ä¹‹ä¸€"></a>å…¬å¼ä¹‹ä¸€</h3><p>å‡è®¾æœ‰nå¯¹å·¦å³æ‹¬å·ï¼Œæ±‚åˆæ³•çš„æ’åˆ—ç»„åˆæœ‰å¤šå°‘ç§ï¼Ÿ</p>
<ul>
<li>nå¯¹æ‹¬å·ï¼Œåˆ™æ€»æ’åˆ—æ•°ä¸º C_{2n}^n ã€‚æŠŠå·¦æ‹¬å·è®°ä¸º1ï¼Œå³æ‹¬å·è®°ä¸º-1</li>
<li>å½“ç¬¬ä¸€æ¬¡å‡ºç°-1ä¸ªæ•°å¤§äº1æ—¶(å³ä¸åˆæ³•)ï¼ŒæŠŠæ‰€ä»¥1å˜ä¸º-1,æ‰€æœ‰-1å˜ä¸º1ã€‚äºæ˜¯å¾—åˆ°ä¸€ä¸ªæœ‰n+1ä¸ª1å’Œn-1ä¸ª-1çš„æ’åˆ—</li>
<li>åˆ©ç”¨è¯æ˜ç»“è®ºï¼šæ¯ä¸€ä¸ªéæ³•çš„æ’åˆ—é€šè¿‡å¦‚ä¸Šæ–¹å¼å˜æ¢ï¼Œå¯ä»¥å¾—åˆ°n+1ä¸ª1å’Œn-1ä¸ª-1ç»„æˆçš„æ’åˆ—</li>
<li>åˆ™æ‰€æœ‰ä¸åˆæ³•æ’åˆ—æ•° = n+1ä¸ª1å’Œn-1ä¸ª-1ç»„æˆçš„æ’åˆ—æ•° = $C_{2n}^{n+1}æˆ–C_{2n}^{n-1}$</li>
<li>æ‰€ä»¥åˆæ³•æ’åˆ—æ•° = $\frac1{n+1} \times C_{2n}^n $ ã€‚_<ul>
<li>å³ <strong>å¡ç‰¹å…°æ•°å…¬å¼</strong> ä¹‹ä¸€</li>
</ul>
</li>
</ul>
<p>building(æ•°å­¦é—®é¢˜)</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/19/universe/python/tensorflow_learning/Tensorflow_learning/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Travis TuRing">
      <meta itemprop="description" content="Mens et Manus">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ring's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/09/19/universe/python/tensorflow_learning/Tensorflow_learning/" class="post-title-link" itemprop="url">Tensorflow</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-09-19 00:00:00" itemprop="dateCreated datePublished" datetime="2019-09-19T00:00:00+08:00">2019-09-19</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-10-10 19:09:31" itemprop="dateModified" datetime="2020-10-10T19:09:31+08:00">2020-10-10</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="åŸºæœ¬æ“ä½œ"><a href="#åŸºæœ¬æ“ä½œ" class="headerlink" title="åŸºæœ¬æ“ä½œ"></a>åŸºæœ¬æ“ä½œ</h1><h3 id="å›¾ç‰‡è¯»å–å±•ç¤º"><a href="#å›¾ç‰‡è¯»å–å±•ç¤º" class="headerlink" title="å›¾ç‰‡è¯»å–å±•ç¤º"></a>å›¾ç‰‡è¯»å–å±•ç¤º</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2  <span class="comment"># å¼•å…¥OpenCV</span></span><br><span class="line">img = cv2.imread(<span class="string">'path'</span>,<span class="number">1</span>)  <span class="comment"># è¯»å–å›¾ç‰‡ï¼Œ0æ˜¯ç°å›¾ï¼Œ1æ˜¯å½©å›¾</span></span><br><span class="line">cv2.imshow(<span class="string">'image'</span>,img)  <span class="comment"># 'image'æ‰“å¼€çš„çª—ä½“çš„æ ‡é¢˜ï¼Œimgå±•ç¤ºçš„å†…å®¹</span></span><br><span class="line">cv2.waitKey(<span class="number">0</span>)  <span class="comment"># æš‚åœ</span></span><br></pre></td></tr></table></figure>
<p>cv.imread è¿‡ç¨‹ï¼š1æ–‡ä»¶è¯»å– 2å°è£…æ ¼å¼è§£æ 3æ•°æ®è§£ç  4æ•°æ®åŠ è½½  </p>
<h3 id="è¯»å†™æ“ä½œ"><a href="#è¯»å†™æ“ä½œ" class="headerlink" title="è¯»å†™æ“ä½œ"></a>è¯»å†™æ“ä½œ</h3><h4 id="å›¾ç‰‡è¯»å†™"><a href="#å›¾ç‰‡è¯»å†™" class="headerlink" title="å›¾ç‰‡è¯»å†™"></a>å›¾ç‰‡è¯»å†™</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line">img = cv2.imread(<span class="string">'path'</span>,<span class="number">1</span>)  <span class="comment"># è¯»å–å›¾ç‰‡ï¼Œ0æ˜¯ç°å›¾ï¼Œ1æ˜¯å½©å›¾</span></span><br><span class="line">cv2.imwrite(<span class="string">"path"</span>,img)  <span class="comment"># 1,å›¾ç‰‡å 2.å›¾ç‰‡æ•°æ®</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸åŒè´¨é‡çš„å›¾ç‰‡å†™å…¥</span></span><br><span class="line"><span class="comment"># jpg,æœ‰æŸå‹ç¼©</span></span><br><span class="line"><span class="comment"># å‹ç¼©æ¯”å‚æ•°èŒƒå›´ä¸º0~100ï¼Œè¶Šä½å‹ç¼©æ¯”è¶Šé«˜</span></span><br><span class="line">cv2.imwrite(<span class="string">"path.jpg"</span>,img,[cv2.IMWRITE_JPEG_QUALITY,<span class="number">0</span>]) </span><br><span class="line"></span><br><span class="line"><span class="comment"># pngæ˜¯æ— æŸå‹ç¼©ï¼Œæœ‰é€æ˜åº¦å±æ€§</span></span><br><span class="line"><span class="comment"># å‹ç¼©æ¯”å‚æ•°0~9,è¶Šä½å‹ç¼©æ¯”è¶Šä½</span></span><br><span class="line">cv2.imwrite(<span class="string">"path.png"</span>,img,[cv2.IMWRITE_PNG_QUALITY,<span class="number">0</span>])</span><br></pre></td></tr></table></figure>

<h4 id="æ“ä½œåƒç´ "><a href="#æ“ä½œåƒç´ " class="headerlink" title="æ“ä½œåƒç´ "></a>æ“ä½œåƒç´ </h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line">img = cv2.imread(<span class="string">"img.jpg"</span>,<span class="number">1</span>)</span><br><span class="line"><span class="comment"># OpenCvè¯»å–å›¾ç‰‡æ˜¯bgr(rgbå€’è¿‡æ¥)ï¼Œå·¦ä¸Šè§’å¼€å§‹çš„åæ ‡è½´</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è¯»å–åƒç´ ç‚¹</span></span><br><span class="line">(b,g,r) = img[x,y]</span><br><span class="line">print(b,g,r)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å†™å…¥åƒç´ </span></span><br><span class="line">img[x,y] = (b,g,r)</span><br></pre></td></tr></table></figure>





<hr>
<h1 id="OpenCv"><a href="#OpenCv" class="headerlink" title="OpenCv"></a>OpenCv</h1><h3 id="OpenCvæ¨¡å—ç»“æ„"><a href="#OpenCvæ¨¡å—ç»“æ„" class="headerlink" title="OpenCvæ¨¡å—ç»“æ„"></a>OpenCvæ¨¡å—ç»“æ„</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">to be continued</span><br></pre></td></tr></table></figure>

<hr>
<h1 id="Tensotflow"><a href="#Tensotflow" class="headerlink" title="Tensotflow"></a>Tensotflow</h1><h4 id="åŸºæœ¬æ“ä½œ-1"><a href="#åŸºæœ¬æ“ä½œ-1" class="headerlink" title="åŸºæœ¬æ“ä½œ"></a>åŸºæœ¬æ“ä½œ</h4><h5 id="æ¦‚å†µ"><a href="#æ¦‚å†µ" class="headerlink" title="æ¦‚å†µ"></a>æ¦‚å†µ</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"><span class="comment"># å®šä¹‰å¸¸é‡</span></span><br><span class="line">data1 = tf.constant(<span class="number">2.5</span>)  <span class="comment"># æŒ‡å®šæ•°æ®ç±»å‹å¯ä»¥åŠ å‚æ•°(2,dtype=tf.int32)</span></span><br><span class="line"><span class="comment"># å®šä¹‰å˜é‡</span></span><br><span class="line">data2 = tf.Variable(b,name=<span class="string">"name"</span>)</span><br><span class="line"><span class="comment"># æ‰“å°å‡ºæ¥çš„æ˜¯æè¿°ä¿¡æ¯</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰€æœ‰æ“ä½œè¦sessionä¼šè¯è¿›è¡Œ</span></span><br><span class="line">sess = tf.Session()</span><br><span class="line">print(sess.run(data1))  <span class="comment"># é€šè¿‡ä¼šè¯è¿›è¡Œçš„å°±å¯ä»¥æ‰“å°äº†</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰€æœ‰å˜é‡éƒ½è¦ç”¨sessionè¿›è¡Œåˆå§‹åŒ–</span></span><br><span class="line">init = tf.global_variables_initializer()</span><br><span class="line">sess.run(init)  <span class="comment"># åˆå§‹åŒ–</span></span><br><span class="line"><span class="comment"># sessionæ‰“å°å¤šä¸ªå†…å®¹</span></span><br><span class="line">sess.run([x1,x2,x3])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># å…³é—­session</span></span><br><span class="line"><span class="comment"># æ³•ä¸€</span></span><br><span class="line">sess.close()</span><br><span class="line"><span class="comment"># æ³•äºŒ  with</span></span><br><span class="line"><span class="keyword">with</span> sees:</span><br><span class="line">	...</span><br></pre></td></tr></table></figure>

<h5 id="ç±»å‹"><a href="#ç±»å‹" class="headerlink" title="ç±»å‹"></a>ç±»å‹</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># tensorflowè¿ç®—çš„æ¯ä¸ªç±»å‹éƒ½è¦æ˜¯tensor</span></span><br><span class="line"><span class="comment"># è½¬æ¢ä¸ºtensor,å¦‚ a=np.arange(1)</span></span><br><span class="line">aa = tf.convert_to_tensor(a,dtye=tf.int32) <span class="comment">#dtype=æ•°æ®ç±»å‹</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># tensorç±»å‹é—´è½¬æ¢</span></span><br><span class="line">tf.cast(aa,dtype=tf.double)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Variable</span></span><br><span class="line"><span class="comment"># VariableåŒ…è£…è¿‡çš„å˜é‡ä¼šå…·æœ‰ä¸€äº›ç‰¹æ®Šçš„å±æ€§,å¦‚å¯å¯¼</span></span><br><span class="line">b=tf.Variable(b,name=<span class="string">"name"</span>)</span><br><span class="line">b.name</span><br><span class="line">b.trainable</span><br><span class="line"></span><br><span class="line"><span class="comment"># tensorå˜numpy</span></span><br><span class="line"><span class="comment"># tensorä¸€èˆ¬åœ¨GPU,å½“æœ‰æ—¶æˆ‘ä»¬è¦åœ¨CPUä¸Šå¤„ç†é»˜å†™é€»è¾‘æ—¶å°±è¦è½¬æˆnumpy</span></span><br><span class="line">a.numpy()  <span class="comment"># tensor:a å°±å˜æˆäº†numpy</span></span><br></pre></td></tr></table></figure>

<h5 id="åˆ›å»ºtensor"><a href="#åˆ›å»ºtensor" class="headerlink" title="åˆ›å»ºtensor"></a>åˆ›å»ºtensor</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">a.convert_to_tensor()</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆå§‹åŒ–</span></span><br><span class="line">tf.zeros(shape)  <span class="comment"># tf.zeros_like(a) åˆå§‹åŒ–ä¸€ä¸ªå’Œaä¸€æ ·ç»´åº¦çš„(shape)</span></span><br><span class="line">tf,ones(shape)</span><br><span class="line">tf.fill(shape,elem)</span><br><span class="line">tf.random.normal(shape,mean=<span class="number">1</span>,stddev=<span class="number">1</span>)  <span class="comment"># ç”¨æ­£æ€åˆ†å¸ƒé‡‡æ ·(normal,å…¶ä»–åˆ†éƒ¨åŒç†)åˆå§‹åŒ–ä¸€ä¸ª,å…¶ä¸­mean,stddevæ­£å¤ªåˆ†éƒ¨çš„å‚æ•°,å…¶ä»–åˆ†éƒ¨åŒç†</span></span><br><span class="line">tf.random.truncated_normal(...)  <span class="comment"># æˆªæ–­çš„æ­£æ€åˆ†å¸ƒ</span></span><br><span class="line">tf.random.uniform(shape,minval=<span class="number">0</span>,maxval=<span class="number">1</span>)  <span class="comment"># å‡åŒ€åˆ†å¸ƒé‡‡æ ·</span></span><br><span class="line"><span class="comment"># shapeè¡¨ç¤ºç»´åº¦</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># éšæœºæ‰“æ•£</span></span><br><span class="line"><span class="comment"># å°±æ˜¯randomäº†,ä½†æ˜¯å¦‚æœæ˜¯ä¸¤ç»„æœ‰ä¸€ä¸€å¯¹åº”å…³ç³»çš„ä¸œè¥¿,æ€ä¹ˆæ‰“æ•£æ‰ä¸ä¼šç ´åé‚£ä¸ªä¸€ä¸€å¯¹åº”å…³ç³»?</span></span><br><span class="line">idx = tf.range(<span class="number">10</span>)  <span class="comment"># å‡è®¾æœ‰10ç»„æ•°æ®</span></span><br><span class="line">idx = rf.random.shuffle(idx)  <span class="comment"># (å°±å¥½æ¯”ç”Ÿæˆäº†10ç»„éšæœºçš„é€šé“(æ¯ä¸ªé€šé“ä»£è¡¨ä¸€ç§ä¸€ä¸€å¯¹åº”å…³ç³»)é€šé“ä¸¤è¾¹ç»‘å®šäº†,æ‰€ä»¥å¯¹åº”å…³ç³»ä¸å˜)</span></span><br></pre></td></tr></table></figure>

<h5 id="ç´¢å¼•ä¸åˆ‡ç‰‡"><a href="#ç´¢å¼•ä¸åˆ‡ç‰‡" class="headerlink" title="ç´¢å¼•ä¸åˆ‡ç‰‡"></a>ç´¢å¼•ä¸åˆ‡ç‰‡</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç´¢å¼•</span></span><br><span class="line"><span class="comment"># numpyé£æ ¼çš„ç´¢å¼•ï¼Œå¦‚ï¼š</span></span><br><span class="line">a.shape() = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line">a[<span class="number">1</span>,<span class="number">2</span>].shape = [<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line"><span class="comment"># ç´¢å¼•å†™åœ¨ä¸€ä¸ª[]å†…ï¼Œç”¨é€—å·éš”å¼€</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ‡ç‰‡</span></span><br><span class="line"><span class="comment"># å¯¹äºæŸä¸ªç»´åº¦</span></span><br><span class="line">a[<span class="number">-1</span>:]  <span class="comment"># åˆ°æ•°ç¬¬ä¸€ä¸ªåˆ°æœ€åä¸€ä¸ª,å°±æ˜¯pythonçš„åˆ‡ç‰‡</span></span><br><span class="line"><span class="comment"># å¯¹å¤šä¸ªç»´åº¦çš„åˆ‡ç‰‡</span></span><br><span class="line">a[<span class="number">0</span>,<span class="number">1</span>,:,<span class="number">1</span>:<span class="number">3</span>,:]  <span class="comment"># (å–a01çš„å…¨éƒ¨çš„1åˆ°3çš„å…¨éƒ¨ã€‚ã€‚ã€‚å¾ˆçµæ´»)</span></span><br><span class="line"><span class="comment"># step,æ­¥é•¿.... [::] åŒç†, æ­¥é•¿ä¸ºè´Ÿï¼Œå®ç°å€’å™</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># çœç•¥å·:çœç•¥å¤šä¸ª:(è‡ªåŠ¨è¯†åˆ«)</span></span><br><span class="line">a[<span class="number">1</span>,<span class="number">2</span>,...,<span class="number">0</span>,:]  <span class="comment"># ä¸­é—´çš„æ²¡æœ‰åˆ‡ç‰‡æ“ä½œ,ä½†æ˜¯å€’æ•°ç¬¬äºŒæœ‰åˆ‡ç‰‡æ“ä½œ,ç”¨...å°±ä¸ç”¨äººä¸ºçš„æŠŠä¸­é—´çš„:ä¸ä¸Šäº†</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Selective Indexing </span></span><br><span class="line"><span class="comment"># å¯ä»¥ä¹±åºå–æ ·</span></span><br><span class="line"><span class="comment"># å‡è®¾a.shape = [4,32,8] ,a[4ä¸ªç­,35ä¸ªå­¦ç”Ÿ,8é—¨ç§‘ç›®æˆç»©]</span></span><br><span class="line">a = tf.gather(a,axis=<span class="number">0</span>,indices=[<span class="number">2</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">0</span>])</span><br><span class="line"><span class="comment"># 1.å–æ ·çš„æ ·æœ¬ 2.æŠ½å–çš„ç»´åº¦,ä¸Šé¢å°±æ˜¯ä»ç¬¬ä¸€ä¸ªç»´åº¦ä¸­ä¹±åºçš„æŠ½å–,éšæœºæŠ½å–ä¸€ä¸ªç­æŸ¥çœ‹ 3.æŠ½å–çš„é¡ºåº,æŠ½2ç­1ç­3ç­0ç­</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿˜æ˜¯ä¸Šé¢çš„ä¾‹å­,å¦‚æœæƒ³è¦å–nä¸ªå­¦ç”Ÿçš„mé—¨æˆç»©å‘¢ï¼Ÿ</span></span><br><span class="line">aa = tf.gather(a,axis=<span class="number">1</span>,indices=[<span class="number">2</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">0</span>])  <span class="comment"># å–4ä¸ªç­2ï¼Œ1ï¼Œ3ï¼Œ0å·å­¦ç”Ÿ</span></span><br><span class="line">aaa = tf.gather(aa,axis=<span class="number">2</span>,indices=[<span class="number">2</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">0</span>])  <span class="comment"># å–è¿™4ä¸ªç­2ï¼Œ1ï¼Œ3ï¼Œ0å·å­¦ç”Ÿ,çš„2ï¼Œ1ï¼Œ3ï¼Œ0å·æˆç»©</span></span><br><span class="line"><span class="comment"># å¤šä¸ªgatheråµŒå¥—</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># tf.gather_nd !!!æ¯”è¾ƒéš¾ç†è§£</span></span><br><span class="line">gather_nd(a,[<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>])  <span class="comment"># 1ç­1å·åŒå­¦çš„1å·æˆç»©,æ ‡é‡</span></span><br><span class="line">gather_nd(a,[[<span class="number">0</span>,<span class="number">0</span>],[<span class="number">1</span>,<span class="number">1</span>]])  <span class="comment"># 0ç­0å·åŒå­¦çš„8é—¨æˆç»©,å’Œ1ç­1å·åŒå­¦çš„8é—¨æˆç»©,ç»„æˆçš„çŸ©é˜µ,shape = [2,8] 2ä¸ªåŒå­¦,8é—¨æˆç»©</span></span><br><span class="line">gather_nd(a,[[<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>],[<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>]])  <span class="comment"># shape = [2]</span></span><br><span class="line">gather_nd(a,[[[<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>],[<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>]]])  <span class="comment"># shape = [1,2]</span></span><br><span class="line"><span class="comment"># ä½“ä¼šæ ‡é‡æ”¾[]é‡Œå’ŒçŸ©é˜µæ”¾[]é‡Œçš„åŒºåˆ«,å·®ä¸å¤šå°±æ˜¯è¿™ä¸ªæ„æ€</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># tf.boolean_mask</span></span><br><span class="line"><span class="comment"># é€šè¿‡booleanæ¥å–æ · å‡è®¾a.shape = [4,28,28,3]</span></span><br><span class="line">tf.boolean_mask(a,mask=[<span class="literal">True</span>,<span class="literal">True</span>,<span class="literal">False</span>,<span class="literal">False</span>])  <span class="comment"># é»˜è®¤ä»æœ€å¤–å±‚(maskå˜›)</span></span><br><span class="line"><span class="comment"># ç»“æœshape = [2,28,28,3]</span></span><br><span class="line"><span class="comment"># å¤šç»´é®ç½© ä¾‹:a.shape = [2,3,4]</span></span><br><span class="line">tf.boolean_mask(a,mask=[[<span class="literal">True</span>,<span class="literal">False</span>,<span class="literal">False</span>],[<span class="literal">False</span>,<span class="literal">True</span>,<span class="literal">True</span>]])  <span class="comment"># mask.shape=[2,3] é‡‡æ ·çš„å…ƒç´ å–å¯¹åº”å…³ç³»,æ ¹æ®mask,ç¬¬0è¡Œç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯Trueï¼Œæ‰€ä»¥è¦...</span></span><br><span class="line"><span class="comment"># ç»“æœshape = [3,4]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å½“ç„¶ä¹Ÿå¯ä»¥æŒ‡å®š,é®ç½©å“ªä¸ªç»´åº¦ </span></span><br><span class="line">tf.boolean_mask(a,mask=[<span class="literal">True</span>,<span class="literal">True</span>,<span class="literal">False</span>],axis = <span class="number">3</span>)  <span class="comment"># shape = [4,28,28,2]</span></span><br></pre></td></tr></table></figure>

<h5 id="ç»´åº¦å˜æ¢"><a href="#ç»´åº¦å˜æ¢" class="headerlink" title="ç»´åº¦å˜æ¢"></a>ç»´åº¦å˜æ¢</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># a.shape = [4,28,28,3]</span></span><br><span class="line">tf.reshape(a,[<span class="number">4</span>,<span class="number">784</span>,<span class="number">3</span>])  <span class="comment"># 4*28*28*3  ==  4*784*3 æ‰èƒ½ä¿è¯æ‰€æœ‰æ•°æ®å……åˆ†åˆ©ç”¨</span></span><br><span class="line"><span class="comment"># å¦‚æœå…ˆå·æ‡’çš„è¯å¯ä»¥ç”¨-1</span></span><br><span class="line">tf.reshape(a,[<span class="number">4</span>,<span class="number">-1</span>,<span class="number">3</span>])  <span class="comment"># ä¸€ä¸ªå¼å­åªèƒ½æœ‰ä¸€ä¸ª-1,-1å°±ç›¸å½“äºx,ä¿è¯4*28*28*3 == 4*x*3</span></span><br><span class="line"><span class="comment"># å˜æ¢å‰è¦ç†æ¸…æ¥šç‰©ç†å«ä¹‰</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># çŸ©é˜µå˜æ¢,æ”¹å˜æ ¼å¼</span></span><br><span class="line"><span class="comment"># a.shape = [4,3,2,1] </span></span><br><span class="line">tf.transpose(a)  <span class="comment"># çŸ©é˜µè½¬ç½®</span></span><br><span class="line">tf.transpose(a,perm=[<span class="number">0</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">2</span>])  <span class="comment"># åŸæ¥çš„0ç»´æ”¾åœ¨æ–°çš„0ç»´...åŸæ¥çš„3ç»´æ”¾åœ¨æ–°çš„2ç»´...</span></span><br><span class="line"><span class="comment"># ç»“æœ shape = [4,3,1,2]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç»´åº¦çš„å¢åŠ </span></span><br><span class="line"><span class="comment"># a.shape=[4,35,8]</span></span><br><span class="line">tf.expand_dims(a,axis=<span class="number">0</span>)  <span class="comment"># æ’å…¥çš„(ä¸€ä¸ª)ç»´åº¦ç›¸å½“äºæ’å…¥åç»´åº¦çš„ç¬¬0ç»´,a.shape=[1,4,35,8]</span></span><br><span class="line">tf.expand_dims(a,axis=<span class="number">3</span>)  <span class="comment"># æ’å…¥çš„ç»´åº¦ç›¸å½“äºæ’å…¥åç»´åº¦çš„ç¬¬3ç»´,a.shape=[4,35,8,1]</span></span><br><span class="line"><span class="comment"># è´Ÿæ•°åŒç†</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç»´åº¦å‡å°‘</span></span><br><span class="line"><span class="comment"># å…ƒç´ ä¸ªæ•°ä¸º1çš„ç»´åº¦æ˜¯å¯ä»¥å»æ‰çš„,a.shape=[1,2,1,1,3]</span></span><br><span class="line">tf.squeeze(a)  <span class="comment"># ä¸åŠ axiså‚æ•°å°±æ˜¯æŠŠæ‰€æœ‰1å»æ‰</span></span><br><span class="line">tf.squeeze(a,axis=<span class="number">2</span>)  <span class="comment"># æŠŠç¬¬äºŒç»´åº¦å»æ‰</span></span><br></pre></td></tr></table></figure>

<h5 id="Broadcasting"><a href="#Broadcasting" class="headerlink" title="Broadcasting"></a>Broadcasting</h5><ul>
<li>expand without copying data:æ‰©å¼ äº†ä¸€ä¸ªæ•°æ®,ä½†å®é™…ä¸Šå¹¶æ²¡æœ‰å¤åˆ¶å‡ºæ¥å¤šä»½<img src="./static/broadcasting.png" style="zoom:50%">

</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">tf.broadcast_to</span><br><span class="line"><span class="comment"># ape=[3,5]</span></span><br><span class="line">aa = broadcast_to(a,[<span class="number">4</span>,<span class="number">3</span>,<span class="number">5</span>])</span><br><span class="line">aa.shape = [<span class="number">4</span>,<span class="number">3</span>,<span class="number">5</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¦‚å‰é¢çš„ x@w+b,bæ˜¯ä¸€ä¸ªä¸€ç»´çš„ï¼Œä½†å´èƒ½åŠ ä¸Šå»,å°±æ˜¯broadcastçš„åŠŸåŠ³</span></span><br><span class="line"><span class="comment"># å¦‚a.shape=[4,16,16,32] b.shape=[32]</span></span><br><span class="line"><span class="comment"># å¦‚æœa+b é‚£ä¹ˆbå°±ä¼šç›¸å½“äºè‡ªåŠ¨å˜æˆ[4,16,16,32],ä»¥æ»¡è¶³ç›¸åº”çš„è¿ç®—(åŒ…æ‹¬åŠ å‡ä¹˜é™¤</span></span><br><span class="line"><span class="comment"># å…ˆä»å°ç»´åº¦å¼€å§‹åŒ¹é…,è‡ªåŠ¨æ‰©å¼ æ˜¯æ»¡è¶³è¿ç®—</span></span><br><span class="line"><span class="comment"># ä½†å´ä¸ä¼šç”Ÿæˆ4*16*16ä¸ªb</span></span><br><span class="line"><span class="comment"># åˆ¤æ–­æ–¹æ³•:å³å¯¹å…¶,ç”¨1æŠŠç»´åº¦è¡¥ç›¸åŒ,ç„¶åæŠŠ1æ˜¯ç»´åº¦å˜æˆå’Œå¦ä¸€ä¸ªåŒ¹é…çš„</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># a.shape=[1,3,4]</span></span><br><span class="line"><span class="comment"># tf.tile(a,[2,1,3]) ç¬¬ä¸€ä¸ªç»´åº¦å¤åˆ¶2ciï¼Œç¬¬äºŒä¸ª1æ¬¡ï¼Œç¬¬ä¸‰ä¸ª4æ¬¡</span></span><br><span class="line"><span class="comment"># a.shape = [2,3,12]</span></span><br></pre></td></tr></table></figure>

<h5 id="æ•°å­¦è¿ç®—"><a href="#æ•°å­¦è¿ç®—" class="headerlink" title="æ•°å­¦è¿ç®—"></a>æ•°å­¦è¿ç®—</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># element-wise: +-*/</span></span><br><span class="line"><span class="comment"># shapeä¸€æ ·ï¼Œå¯¹åº”å…ƒç´ è¿ç®—</span></span><br><span class="line"><span class="comment"># (ä¸€èˆ¬çš„è¿ç®—,éçŸ©é˜µ...å§)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># matrix-wise: @,matmul</span></span><br><span class="line"><span class="comment"># å¦‚ [b,3,4]@[b,4,5]</span></span><br><span class="line"><span class="comment"># ç›¸å½“äºæŠŠåä¸¤ä¸ªå½“æˆçŸ©é˜µç„¶åæ¥è¿ç®—[3,4]*[4,5] = [3,5]</span></span><br><span class="line"><span class="comment"># ç›¸å½“äºä¸€ä¸‹å­bä¸ªçŸ©é˜µç›¸ä¹˜</span></span><br><span class="line"><span class="comment"># (çŸ©é˜µè¿ç®—...)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># dim-wise: reduce_mean/max/min/sum</span></span><br></pre></td></tr></table></figure>

<h5 id="æ‰‹å†™æ•°å­—è¯†åˆ«-ä½ å¯èƒ½ç”¨åˆ°"><a href="#æ‰‹å†™æ•°å­—è¯†åˆ«-ä½ å¯èƒ½ç”¨åˆ°" class="headerlink" title="æ‰‹å†™æ•°å­—è¯†åˆ«,ä½ å¯èƒ½ç”¨åˆ°"></a>æ‰‹å†™æ•°å­—è¯†åˆ«,ä½ å¯èƒ½ç”¨åˆ°</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"><span class="keyword">from</span> tensorflow <span class="keyword">import</span> keras</span><br><span class="line"><span class="keyword">from</span> tensorflow.keras <span class="keyword">import</span> datasets</span><br><span class="line"></span><br><span class="line">(xs, ys),_ = datasets.mnist.load_data()</span><br><span class="line">xs = tf.convert_to_tensor(xs, dtype=tf.float32) / <span class="number">255.</span>    <span class="comment"># é™¤ä»¥255æ˜¯ä¸ºäº†ä¼˜åŒ–,è¿™æ ·0&lt;x&lt;1</span></span><br><span class="line">ys = ....  <span class="comment"># å˜æˆtensor</span></span><br><span class="line"></span><br><span class="line">train_db = tf.data.Dataset.from_tenfor_slices((x,y)).batch(<span class="number">128</span>)</span><br><span class="line">train_iter = iter(train_db)</span><br><span class="line">sample = next(train_iter)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">w1 = tf.Variable(tf.random.truncated_normal([<span class="number">784</span>,<span class="number">256</span>]),stddev=<span class="number">0.1</span>)  <span class="comment"># stddev=0.1æ˜¯ä¸ºäº†......</span></span><br><span class="line">b1 = tf.Variable(tf.zeros([<span class="number">256</span>]))   <span class="comment"># å˜æˆtf.Variableæ‰èƒ½è¢«Gradientè·Ÿè¸ª</span></span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line"><span class="keyword">for</span> epoch <span class="keyword">in</span> range(<span class="number">10</span>):   <span class="comment"># å¯¹æ•´ä¸ªæ•°æ®é›†å¾ªç¯,åå¤ä½¿ç”¨ç”¨ä¸€ä¸ªæ•°æ®é›†ä¸æ–­ä¼˜åŒ–</span></span><br><span class="line">	<span class="keyword">for</span> step,(x, y) <span class="keyword">in</span> enumerate(train_db):  <span class="comment"># step,æ–¹ä¾¿è®°å½•,æŸ¥enumerateç”¨æ³•</span></span><br><span class="line">		x = tf.reshape(x,[<span class="number">-1</span>,<span class="number">28</span>*<span class="number">28</span>])</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">with</span> tf.GradientTape() <span class="keyword">as</span> tape:  <span class="comment"># é»˜è®¤åªä¼šè·Ÿè¸ªtf.Variableçš„ç±»å‹</span></span><br><span class="line">			h1 = x@w1 + b1</span><br><span class="line">			h1 = tf.nn.relu(h1)</span><br><span class="line">			...</span><br><span class="line">			out = ...</span><br><span class="line">			</span><br><span class="line">			y_onehot = tf.one_hot(y, depth=<span class="number">10</span>)  <span class="comment"># y:[b] =&gt; [b,10]</span></span><br><span class="line">		</span><br><span class="line">			loss = tf.square(y_onehot - out)</span><br><span class="line">			loss = tf.reduce_mean(loss)</span><br><span class="line">			</span><br><span class="line">		grads = tape.gradient(loss,[w1,b1,w2,b2,w3,b3])</span><br><span class="line">		<span class="comment"># æ›´æ–°w,b</span></span><br><span class="line">		w1.assign_sub(lr*grads[<span class="number">0</span>])  <span class="comment"># åŸåœ°æ›´æ–°,å¼•ç”¨ä¸å˜,ç±»å‹ä¸å˜</span></span><br><span class="line">		...</span><br><span class="line">		...</span><br><span class="line">		<span class="keyword">if</span> step % <span class="number">100</span> ==<span class="number">0</span>:</span><br><span class="line">			print(float(loss))</span><br></pre></td></tr></table></figure>

<h5 id="åˆå¹¶ä¸æ‹¼æ¥"><a href="#åˆå¹¶ä¸æ‹¼æ¥" class="headerlink" title="åˆå¹¶ä¸æ‹¼æ¥"></a>åˆå¹¶ä¸æ‹¼æ¥</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">c =tf.concat([a,b],axis=<span class="number">0</span>)   <span class="comment"># aå’Œbç¬¬0ç»´åº¦åˆå¹¶</span></span><br><span class="line"><span class="comment"># åœ¨åŸæœ‰ç»´åº¦ä¸Šç´¯åŠ ,ä¸èƒ½ç”Ÿæˆæ–°çš„ç»´åº¦</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¦‚æœè¦åˆ›é€ æ–°çš„ç»´åº¦</span></span><br><span class="line"><span class="comment"># a.shape = [4,3,5] b.shape = [4,3,5]</span></span><br><span class="line">c = tf.stack([a,b]axis = <span class="number">1</span>)</span><br><span class="line"><span class="comment"># c.shape = [4,2,3,5]  </span></span><br><span class="line"><span class="comment"># æ ¹æ®è¡¨ç¤ºæ„ä¹‰ç†è§£ å¦‚[chool,class,student,scores]</span></span><br><span class="line"><span class="comment">### ä»¥ä¸Šå¯¹ç»´åº¦éƒ½æœ‰è¦æ±‚,æœ‰ä¸€å®šçš„å±€é™æ€§</span></span><br><span class="line"><span class="comment"># åŒæ ·ç”¨[class,student,scores] æ¨¡å‹ä¸¾ä¾‹</span></span><br><span class="line"><span class="comment"># æ¯ä¸ªå­¦æ ¡ï¼Œç­ç­‰éƒ½å¯èƒ½ä¸åŒ,stackå°±æ“ä½œä¸äº†</span></span><br><span class="line"></span><br><span class="line">tf.unstack(a,axis=<span class="number">0</span>)   <span class="comment"># å…¨éƒ¨æ‹†å¼€,è¿”å›å‡ ä¸ªtensorå–å†³äºæœ‰å‡ ä¸ª</span></span><br><span class="line">tf.unstack(a,axis=<span class="number">3</span>,num_or_size_splits=<span class="number">2</span>)   <span class="comment"># åœ¨æŒ‡å®šç»´åº¦æ‹†å¼€æ‹†å¼€,å‚æ•°æ˜¯2æ‰€ä»¥æ‹†æˆä¸¤ä¸ª</span></span><br><span class="line">tf.unstack(a,axis=<span class="number">3</span>,num_or_size_splits=[<span class="number">2</span>,<span class="number">2</span>,<span class="number">3</span>])   <span class="comment"># æŒ‡å®šæ‹†å¼€,æ‹†å¼€çš„ä½0ä¸ªæœ‰2ä»½,åœ°2ä¸ªæœ‰3ä»½...</span></span><br></pre></td></tr></table></figure>

<h5 id="æ•°æ®ç»Ÿè®¡"><a href="#æ•°æ®ç»Ÿè®¡" class="headerlink" title="æ•°æ®ç»Ÿè®¡"></a>æ•°æ®ç»Ÿè®¡</h5><ul>
<li>èŒƒæ•°<ul>
<li>äºŒèŒƒæ•°<br>$${||x||}_2 = [\sum_k{x^2_k}]^\frac{1}{2}$$  </li>
<li>æ— ç©·èŒƒæ•°  </li>
<li>ä¸€èŒƒæ•°..ç­‰ç­‰<br>$${||x||}_1 = \sum_k{|x_k|}$$  </li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">###  è¿™é‡Œè®¨è®ºçš„éƒ½æ˜¯å‘é‡çš„èŒƒæ•°(éçŸ©é˜µ)</span></span><br><span class="line">tf.norm(a)  <span class="comment"># äºŒèŒƒæ•°</span></span><br><span class="line">tf.norm(a,ord=<span class="number">1</span>,axis=<span class="number">1</span>)  <span class="comment"># ä¸€èŒƒæ•°,åŒæ—¶æŠŠæŸç»´åº¦çœ‹åšæ•´ä½“æ¥åšèŒƒæ•°</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># reduce_mean/min/max</span></span><br><span class="line"><span class="comment"># reduceè¯´æ˜,è¿™æ“ä½œä¼šæœ‰ä¸ªå‡ç»´çš„è¿‡ç¨‹:ç›¸å½“äºæ¯ç»„é€‰å‡ºäº†æŒ‡å®šçš„æ•°,é‚£ç»„çš„å¤§å°å°±æˆäº†1</span></span><br><span class="line">tf.reduce_mean(a,axis=<span class="number">1</span>)  <span class="comment"># 2.ä¸æŒ‡å®šç»´åº¦çš„è¯ä¼šæ‰“å¹³æˆä»¥ç»´åº¦</span></span><br><span class="line"><span class="comment"># æŒ‡å®šäº†ç»´åº¦å°±ä¼šåœ¨æŒ‡å®šç»´åº¦å–  $æ³¨æ„,è¿™é‡Œè®¨è®ºçš„éƒ½æ˜¯å‘é‡,ä¸ç”¨çŸ©é˜µæ¥ç†è§£</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å°±æœ€å¤§æœ€å°å€¼çš„ä½ç½®</span></span><br><span class="line"><span class="comment"># a.shape = [4,10]</span></span><br><span class="line">tf.argmax(a)  <span class="comment"># é»˜è®¤ç¬¬0ç»´æ¯”è¾ƒ,aæœ‰10ç»„,æ‰€ä»¥ä¼šè¿”å›10ä¸ªç»“æœ[2,3,4..]</span></span><br><span class="line">tf.argmin(a,axis=<span class="number">1</span>)  <span class="comment"># æŒ‡å®šç»´åº¦</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¯”è¾ƒ</span></span><br><span class="line">tf.equal(a,b) <span class="comment"># è¿”å›[True,False,True,...]</span></span><br><span class="line"><span class="comment"># å‡†ç¡®åº¦:æŠŠä¸Šé¢çš„è¿”å›ç»“æœdtypeæˆ0,1ç„¶åç´¯åŠ </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># tf.unique</span></span><br><span class="line">tf,unique(a)</span><br><span class="line"><span class="comment"># è¿”å›ä¸¤ä¸ªå€¼,ç¬¬ä¸€ä¸ªæ˜¯æ— é‡å¤å€¼çš„tensor,ç¬¬äºŒä¸ªæ˜¯tensoræ˜¯å€¼è¡¨ç¤ºåŸtensorçš„å…ƒç´ åœ¨æ–°tensorä¸­çš„ä½ç½®</span></span><br><span class="line"><span class="comment"># è¿™ä¹ˆä¸€æ¥å¯ä»¥ç”¨tf.gatheræ¥å§åŸtensorè¿˜åŸå‡ºæ¥</span></span><br></pre></td></tr></table></figure>

<h5 id="å¼ é‡æ’åº"><a href="#å¼ é‡æ’åº" class="headerlink" title="å¼ é‡æ’åº"></a>å¼ é‡æ’åº</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">tf.sort(a,direction=<span class="string">'DESCENDING'</span>)  <span class="comment"># é™åº,  direction='ASCENDING'å°±èƒ½å‡åº</span></span><br><span class="line">tf.argsort(a,direction=<span class="string">'DESCENDING'</span>)  <span class="comment"># é™åº,è¿”å›çš„æ˜¯ä½ç½®:å¦‚[æœ€å¤§å€¼ä½ç½®ï¼Œæ¬¡å¤§..]</span></span><br><span class="line"><span class="comment"># åŒç†å¯ä¸gatheré…åˆ</span></span><br><span class="line"><span class="comment"># é«˜ç»´çš„è¯å°±æŒ‰æ¯ç»´æ’åˆ—å®Œå…¨æ’åº</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½†æœ‰æ—¶å€™æˆ‘ä»¬åªéœ€è¦æœ€å¤§æœ€å°(ä¸ç”¨å®Œå…¨æ’åº,è€—æ—¶)</span></span><br><span class="line">res = tf.max.top_k(a,<span class="number">2</span>)  <span class="comment"># è¿”å›æœ€å¤§çš„ä¸¤ä¸ª</span></span><br><span class="line">res.indices   <span class="comment"># è¿”å›ç´¢å¼•å€¼,åƒargsort</span></span><br><span class="line">res.values  <span class="comment"># è¿”å›å€¼</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åº”ç”¨</span></span><br><span class="line"><span class="comment"># é¢„æµ‹é—®é¢˜:0,1,2,3çš„é¢„æµ‹åˆ†åˆ«æ˜¯ prob[0.1,0.2,0.3,0.4]</span></span><br><span class="line"><span class="comment"># çœŸå®å€¼æ˜¯2</span></span><br><span class="line"><span class="comment"># top-1 prediction(æ­£ç¡®ç­”æ¡ˆåœ¨å‰1ä¸ªçš„æ¦‚ç‡):0%   (é¢„æµ‹å¯¹çš„æ ·æœ¬ä¸ªæ•°/æ€»æ ·æœ¬æ•°(è¿™äº†åªç”¨åº”è¯¥æ ·æœ¬)) </span></span><br><span class="line"><span class="comment"># top-2 prediction(æ­£ç¡®ç­”æ¡ˆåœ¨å‰2ä¸ªçš„æ¦‚ç‡):100% </span></span><br><span class="line"><span class="comment"># top-3 prediction(æ­£ç¡®ç­”æ¡ˆåœ¨å‰3ä¸ªçš„æ¦‚ç‡):100% </span></span><br><span class="line"><span class="comment"># ä¸¾ä¾‹</span></span><br><span class="line"><span class="comment"># prob = tf.constant([[0.1,0.2,0.7],[0.2,0.7,0.1]]) #æ ·æœ¬1æœ€å¯èƒ½æ˜¯2,æ ·æœ¬2æœ€å¯èƒ½æ˜¯1</span></span><br><span class="line"><span class="comment"># target = tf.constant([2,0])  # æ ·æœ¬1æ­£å¼å€¼åº”è¯¥æ˜¯2ï¼Œæ ·æœ¬2çœŸå®å€¼åº”è¯¥æ˜¯0</span></span><br><span class="line"><span class="comment"># æ‰€ä»¥: top-1 prediction=1/2  = 50%</span></span><br><span class="line"><span class="comment"># top-2 prediction = 2/2 = 100%</span></span><br><span class="line"><span class="comment"># top-3 prediction = 2/2 = 100%</span></span><br></pre></td></tr></table></figure>

<h5 id="å¡«å……ä¸å¤åˆ¶"><a href="#å¡«å……ä¸å¤åˆ¶" class="headerlink" title="å¡«å……ä¸å¤åˆ¶"></a>å¡«å……ä¸å¤åˆ¶</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¡«å…… pad</span></span><br><span class="line">tf.pad(a,[[<span class="number">2</span>,<span class="number">0</span>],[<span class="number">0</span>,<span class="number">1</span>]])  <span class="comment"># è¡Œä¸Šè¾¹è¾¹å¡«å……2è¡Œä¸‹è¾¹0è¡Œ;åˆ—å·¦0å³1</span></span><br><span class="line"><span class="comment">#          ^è¡Œ  ^åˆ—  </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¤åˆ¶ tile</span></span><br><span class="line"><span class="comment"># a.shape = [3,3]</span></span><br><span class="line">tf.tile(a,[<span class="number">1</span>,<span class="number">2</span>])  <span class="comment"># ç¬¬ä¸€ç»´å¤åˆ¶ä¸€æ¬¡(ä¸å˜),ç¬¬äºŒç»´å¤åˆ¶2æ¬¡ </span></span><br><span class="line"><span class="comment"># res.shape = [3,6]</span></span><br><span class="line"><span class="comment"># ä¼šçœŸå®çš„å¤åˆ¶åˆ°å†…å­˜</span></span><br></pre></td></tr></table></figure>

<h5 id="å¼ é‡çš„é™å¹…"><a href="#å¼ é‡çš„é™å¹…" class="headerlink" title="å¼ é‡çš„é™å¹…"></a>å¼ é‡çš„é™å¹…</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é™åˆ¶æœ€å°å€¼</span></span><br><span class="line">tf.maximum(a,<span class="number">2</span>)  <span class="comment"># è¿”å›a,2é—´çš„æœ€å¤§å€¼,æ•…aä¸ä¼šå°äº2,é™åˆ¶çš„æœ€å°å€¼</span></span><br><span class="line"><span class="comment"># é™åˆ¶æœ€å¤§å€¼</span></span><br><span class="line">tf.minimum(a,<span class="number">8</span>)  <span class="comment"># è¿”å›a,8é—´çš„æœ€å°å€¼ </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é™åˆ¶èŒƒå›´</span></span><br><span class="line">tf.clip_by_value(a,<span class="number">2</span>,<span class="number">8</span>)  <span class="comment"># 2&lt;x&lt;8</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># reluå‡½æ•°,xå°äº0æ—¶å–0ï¼Œå¤§äº0æ˜¯å–æœ¬èº«</span></span><br><span class="line"><span class="comment"># å¯ç”¨maximum(a,0)å®ç°</span></span><br><span class="line"><span class="comment"># ä¹Ÿå¯ç”¨å°è£…å¥½çš„reluå‡½æ•°</span></span><br><span class="line">tf.relu(a)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç­‰æ¯”ä¾‹æ”¾ç¼©,å¸Œæœ›æŠŠgradç¼©å°æ–¹ä¾¿å­¦ä¹ ,ä½†åˆä¸å¸Œæœ›æ”¹å˜gredå€¼</span></span><br><span class="line"><span class="comment"># å¯ç”¨é™¤ä»¥æ¨¡å†ä¹˜ä»¥ä¸€ä¸ªå€¼æ¥æ§åˆ¶èŒƒå›´æ¥,ä¹Ÿå¯ç”¨å‡½æ•°</span></span><br><span class="line">tf.clipe_by_norm(a,<span class="number">15</span>)  <span class="comment"># ç›¸å½“äºé™¤æ¨¡åä¹˜15,æ”¹å˜äº†açš„æ¨¡</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Gradient Exploding æ¢¯åº¦å¤ªå¤§,ä¸€æ­¥å­¦ä¹ è·¨è¶Šå¤ªå¤§,æ¥å›éœ‡è¡</span></span><br><span class="line"><span class="comment"># Gradient Vanishing æ¢¯åº¦å¤ªå°,å­¦ä¹ å¤ªæ…¢ï¼Œé•¿æ—¶é—´æ²¡æœ‰å˜åŒ–</span></span><br><span class="line"><span class="comment"># tf.clipe_by_global_norm(grads,25)  # æ•´ä½“ç¼©æ”¾,é¿å…æ–¹å‘æ”¹å˜</span></span><br><span class="line"><span class="comment"># æ¢¯åº¦å‘é‡è¡¨ç¤º[2,5,3],é‚£ä¹ˆæ•´ä½“ç¼©å°å°±ä¸ä¼šæ”¹å˜æ–¹å‘</span></span><br></pre></td></tr></table></figure>

<h5 id="é«˜çº§æ“ä½œ"><a href="#é«˜çº§æ“ä½œ" class="headerlink" title="é«˜çº§æ“ä½œ"></a>é«˜çº§æ“ä½œ</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç­›é€‰ mask = [True,False,True]</span></span><br><span class="line">tf.where(mask)  <span class="comment"># æ²¡æœ‰å‚æ•°,è¿”å›tensorä¸­å€¼æ˜¯Trueçš„å€¼çš„å¯¹åº”åæ ‡tensor</span></span><br><span class="line">tf.where(mask,A,B)  <span class="comment"># Trueæ—¶å¯¹Aé‡‡æ ·,Falseæ—¶å¯¹Bé‡‡æ ·</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># æœ‰ç›®çš„æ€§çš„æ›´æ–°</span></span><br><span class="line">tf.scatter_nd(indices,updates,shape) </span><br><span class="line"><span class="comment"># 1.åªèƒ½åœ¨å…¨0çš„åº•æ¿ä¸Šæ›´æ–°,å°±æ˜¯ä¸Šé¢çš„shape</span></span><br><span class="line"><span class="comment"># 2.indicesè¡¨ç¤ºè¦æ›´æ–°çš„ä½ç½®,æŠŠå¯¹åº”ä½ç½®ä¸Šupdatesçš„å€¼æ›´æ–°è¿‡å»</span></span><br><span class="line"><span class="comment"># ä¸€èˆ¬ç”¨ä½œç»™æŒ‡å®šä½ç½®åŠ å‡(å› ä¸ºåªèƒ½å…¨0ä¸ºåº•æ¿)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¿«é€Ÿç”Ÿæˆåæ ‡è½´ç³»(GPUåŠ é€Ÿçš„,åŒºåˆ«äºä¼ ç»Ÿforå¾ªç¯çš„)</span></span><br><span class="line">point_x,point_y = tf.meshgrid(x,y)</span><br><span class="line"><span class="comment"># è¿”å›ä¸¤ä¸ªå€¼,ä¸ªå­˜å–xçš„æ‰€æœ‰å€¼å’Œyçš„æ‰€æœ‰å€¼</span></span><br><span class="line"><span class="comment"># å¯¹åº”ä½ç½®çš„ç¥è´ºå°±æ˜¯(x,y) </span></span><br><span class="line"><span class="comment"># é‡æ–°ç»„åˆ: tf.stack([point_x,point_y],axis=2)</span></span><br></pre></td></tr></table></figure>

<h4 id="ç¥ç»ç½‘ç»œä¸å…¨è¿æ¥å±‚"><a href="#ç¥ç»ç½‘ç»œä¸å…¨è¿æ¥å±‚" class="headerlink" title="ç¥ç»ç½‘ç»œä¸å…¨è¿æ¥å±‚"></a>ç¥ç»ç½‘ç»œä¸å…¨è¿æ¥å±‚</h4><h5 id="æ•°æ®é›†çš„åŠ è½½-å°å‹"><a href="#æ•°æ®é›†çš„åŠ è½½-å°å‹" class="headerlink" title="æ•°æ®é›†çš„åŠ è½½(å°å‹)"></a>æ•°æ®é›†çš„åŠ è½½(å°å‹)</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ•°æ®é›†å‡†å¤‡</span></span><br><span class="line">(x,y),(x_test,y_test) = keras.datasets.mnist.load_data()  <span class="comment"># è·å–mninstæ•°æ®é›†,è¿”å›å„æœ‰ä¸åŒ</span></span><br><span class="line"><span class="comment"># è¿”å›çš„æ˜¯numpyçš„æ ¼å¼</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†numpyè½¬æ¢æˆå¯¹è±¡</span></span><br><span class="line">db = tf.data.Dataset.from_tenfor_slices(x_test,y_test)</span><br><span class="line">next(iter(db))[<span class="number">0</span>].shape  <span class="comment"># è½¬æ¢æˆå¯¹è±¡åå°±å¯è¿›è¡Œçš„ä¸€ç³»åˆ—æ“ä½œ,æ”¯æŒå¤šçº¿ç¨‹ç­‰</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰“æ•£</span></span><br><span class="line">db = db.shuffle(<span class="number">10000</span>)  <span class="comment"># æ‰“æ•£,ä½†xå’Œyçš„å¯¹åº”å…³ç³»ä¸æ‰“æ’’(gather),å‚æ•°?ç»™å¤§ç‚¹å°±æ˜¯äº†</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ•°æ®é¢„å¤„ç†</span></span><br><span class="line">db2 = db.map(func)  <span class="comment"># å¯¹dbé‡Œçš„æ¯ä¸ªå…ƒç´ è¿›è¡Œfuncé‡Œçš„æ“ä½œ</span></span><br><span class="line"><span class="comment"># å¦‚æ¯ä¸ªå…ƒç´ æ˜¯(x,y),funcå‡½æ•°çš„å‚æ•°çš„x,yè¿”å›çš„æ˜¯å¤„ç†åçš„x,y</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># batch</span></span><br><span class="line">db3 = db2.batch(<span class="number">42</span>)  <span class="comment"># ä¸å†ä¸€æ¬¡è¯»å–ä¸€ç»„æ•°æ®,ä¸€æ¬¡è¯»å–æŒ‡å®šæ•°é‡çš„æ•°æ®</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡å¤è¿­ä»£</span></span><br><span class="line">db4 = db3.repeat(<span class="number">2</span>)  <span class="comment"># é‡å¤è¿­ä»£2æ¬¡</span></span><br><span class="line">db4 = db3.repeat()  <span class="comment"># æ— é™é‡å¤</span></span><br></pre></td></tr></table></figure>

<h5 id="å…¨è¿æ¥å±‚"><a href="#å…¨è¿æ¥å±‚" class="headerlink" title="å…¨è¿æ¥å±‚"></a>å…¨è¿æ¥å±‚</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ¯ä¸ªèŠ‚ç‚¹è·Ÿæ¯ä¸ªèŠ‚ç‚¹è¿æ¥â€”â€”Dense</span></span><br><span class="line">x = tf.random.normal([<span class="number">4</span>,<span class="number">728</span>])  <span class="comment"># è¾“å…¥</span></span><br><span class="line">net = tf.keras.layers.Dense(<span class="number">512</span>)  <span class="comment"># åˆ›å»ºè¾“å‡º512çš„å±‚</span></span><br><span class="line">out = net(x)  <span class="comment"># out.shape = [4,512]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¤šå±‚åµŒå¥—â€”â€”Multi-Layers</span></span><br><span class="line"><span class="comment"># keras.Sequential([layer1,layer2,...])  # layer-&gt;Dense</span></span><br><span class="line">network = keras.Sequential([</span><br><span class="line">        keras.layers.Dense(<span class="number">2</span>,activation=<span class="string">'relu'</span>),</span><br><span class="line">        keras.layers.Dense(<span class="number">2</span>,activation=<span class="string">'relu'</span>),</span><br><span class="line">        keras.layers.Dense(<span class="number">2</span>)</span><br><span class="line">    ])</span><br><span class="line">network.build(input_shape=[<span class="literal">None</span>,<span class="number">3</span>])  <span class="comment"># åˆ›å»ºï¼Œç»™å®šè¾“å…¥ç»´åº¦3</span></span><br><span class="line">network.summary()   <span class="comment"># æ‰“å°ä¿¡æ¯</span></span><br><span class="line">network.trainable_variables   <span class="comment"># list[],å¯è®­ç»ƒå‚æ•°</span></span><br></pre></td></tr></table></figure>

<h5 id="è¾“å‡ºæ–¹å¼"><a href="#è¾“å‡ºæ–¹å¼" class="headerlink" title="è¾“å‡ºæ–¹å¼"></a>è¾“å‡ºæ–¹å¼</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¾“å‡ºèŒƒå›´å‹ç¼©</span></span><br><span class="line"><span class="comment"># sigmodå‡½æ•°(åŒç†relu)</span></span><br><span class="line">y = tf.sigmod(x)   <span class="comment"># xå±äºR,yå±äº[0,1]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># tanhå‡½æ•°,å‹ç¼©èŒƒå›´åˆ°[-1,1]</span></span><br><span class="line">tf.tanh(x)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># è¾“å‡ºæ¦‚ç‡(æ‰€æœ‰çš„å’Œä¸º1)</span></span><br><span class="line"><span class="comment"># softmaxå‡½æ•°</span></span><br><span class="line">tf.softmax(a)</span><br></pre></td></tr></table></figure>

<h5 id="æŸå¤±å‡½æ•°çš„è®¡ç®—"><a href="#æŸå¤±å‡½æ•°çš„è®¡ç®—" class="headerlink" title="æŸå¤±å‡½æ•°çš„è®¡ç®—"></a>æŸå¤±å‡½æ•°çš„è®¡ç®—</h5><ul>
<li>MSE<br>$$loss=\frac{1}{N}\sum(y-out)^2$$<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">loss1 = tf.reduce_mean(tf.square(y-out))</span><br><span class="line">loss2 = tf.reduce_mean(tf.losses.MSE(y,out))</span><br><span class="line"><span class="comment"># loss1 = loss2 ç­‰ä»·</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h5 id="æ ‡å·®ç†µ"><a href="#æ ‡å·®ç†µ" class="headerlink" title="æ ‡å·®ç†µ"></a>æ ‡å·®ç†µ</h5><ul>
<li>ç†µ $Entropy = -\sum P(i)\log_2{P(i)}$<ul>
<li>ä¸ç¡®å®šåº¦ Uncertainty</li>
<li>æƒŠå¥‡åº¦ measure of surprise</li>
<li>lower entropy -&gt; more info</li>
</ul>
</li>
</ul>
<h5 id="äº¤å‰ç†µ-Cross-Entropy"><a href="#äº¤å‰ç†µ-Cross-Entropy" class="headerlink" title="äº¤å‰ç†µ Cross Entropy"></a>äº¤å‰ç†µ Cross Entropy</h5><ul>
<li><p>æè¿°ä¸¤ä¸ªé›†åˆp,qçš„æƒŠå¥‡åº¦</p>
<ul>
<li>$H(p,q) = -\sum{p(x) \log_2{q(x)}}$</li>
<li>$H(p,g) = H(p) + D(p|q)$ <ul>
<li>$D(p|q)$ è¡¨ç¤ºpå’Œqçš„ç¦»æ•£åº¦</li>
<li>å½“p=qæ—¶$D(p|q)=0$</li>
</ul>
</li>
</ul>
</li>
<li><p>for p:one_hot encoding</p>
<ul>
<li>$h(p:[0,1,0]) = -1\log_2{1}=0$</li>
<li>$H([0,1,0],[q_1,q_2,q_3]) = 0+D(p|q)=-1\log{q_1}$</li>
<li>å³è¦ä½¿pé€¼è¿‘ä¸qç”¨äº¤å‰ç†µçš„æ–¹æ³•çš„å¯è¡Œçš„  </li>
</ul>
</li>
<li><p>å…·ä½“è§£æ³•<br>è®¾ä¸€ç»„åˆ†ç±»çš„one_hot encodingæ˜¯$P_1[1,0,0,0,0]$;<br>ä¸€ç»„è¾“å‡ºä¸º$Q_1[0.4,0.3,0.05,0.05,0.5]$;<br>åˆ™:</p>
</li>
</ul>
<p>$$\begin{aligned}<br>loss &amp;= H(p,q) \<br>&amp;= -\sum{P_1(x) \log_2{Q_1(x)}} \<br>&amp;= -\log_2{0.4}  \<br>&amp;= 0.916<br>\end{aligned}<br>$$</p>
<p>ç„¶ålr,w1,b2â€¦,å¤šæ¬¡å­¦ä¹ åå‘ç°lossè¶Šæ¥è¶Šå°,å³q = p  </p>
<ul>
<li>åœ¨tensorflowä¸­çš„ä½¿ç”¨</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">tf.losses.categorical_crossentropy(p,q) <span class="comment"># å‡½æ•°çš„å½¢å¼</span></span><br><span class="line">tf.losses.BinaryCrossentropy()(p,q)  <span class="comment"># ç±»çš„å½¢å¼</span></span><br><span class="line">tf.losses.binary_crossentropy(p,q) <span class="comment"># å‡½æ•°çš„å½¢å¼ </span></span><br><span class="line"><span class="comment"># pæ˜¯çœŸå®åœ¨çš„one_hot encodingqæ˜¯é¢„æµ‹å€¼</span></span><br><span class="line"><span class="comment"># å¦‚tf.losses.categorical_crossentropy([1,0,0,0],[0.25,0.25,0.25,0.25])</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">### é€šå¸¸çš„ç”¨æ³• ###</span></span><br><span class="line">tf.losses.categorical_crossentropy(one_hot,logits,from_logits=<span class="literal">True</span>)  <span class="comment"># è¿™æ ·èƒ½å¤„ç†logitsè½¬æ¢æˆprobæ—¶çš„é”™è¯¯</span></span><br><span class="line">tf.losses.categorical_crossentropy(one_hot,prob)  <span class="comment"># ç­‰ä»·ä½†ä¸æ¨è</span></span><br></pre></td></tr></table></figure>


<h3 id="æ¢¯åº¦ä¸‹é™-Gradient-Descent"><a href="#æ¢¯åº¦ä¸‹é™-Gradient-Descent" class="headerlink" title="æ¢¯åº¦ä¸‹é™ Gradient Descent"></a>æ¢¯åº¦ä¸‹é™ Gradient Descent</h3><ul>
<li>æ¢¯åº¦:å‘é‡grad<ul>
<li>ç”¨æ¢¯åº¦ä¸‹é™æ¥é€¼è¿‘<br>$$ w_n = w - lr \times \frac{\partial{loss}}{\partial{w}} $$</li>
</ul>
</li>
<li>åœ¨tensorflowä¸­çš„ä½¿ç”¨</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> tf.GradientTape() <span class="keyword">as</span> tape:  <span class="comment"># æŠŠè®¡ç®—è¿‡ç¨‹åŒ…åœ¨é‡Œé¢</span></span><br><span class="line">    tape.watch([w,b])  <span class="comment"># å¦‚æœå‚æ•°ä¸æ˜¯tf.variableç±»å‹è¯è¦ç”¨è¿™ä¸ªå‡½æ•°å£°æ˜</span></span><br><span class="line">    loss = f(x)</span><br><span class="line">[w_grad] = tape.gradient(loss,[w])  <span class="comment"># è‡ªåŠ¨æ±‚è§£å‚æ•°çš„æ¢¯åº¦,å¹¶è¿”å›ç›¸åº”çš„åˆ—è¡¨</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># tape.gradientè°ƒç”¨ä¸€æ¬¡åä¼šæŠŠèµ„æºé‡Šæ”¾æ‰,å¯ç”¨å‚æ•°persistentæ”¹å˜</span></span><br><span class="line"><span class="keyword">with</span> tf.GradientTape(persistent=<span class="literal">True</span>) <span class="keyword">as</span> tape:  <span class="comment"># ç”¨å®Œåä¼šä¿ç•™èµ„æº</span></span><br><span class="line">grad1 = tape.gradient(loss,[w]) </span><br><span class="line">grad2 = tape.gradient(loss,[w])  <span class="comment"># å¯è°ƒç”¨å¤šæ¬¡</span></span><br><span class="line"><span class="comment"># ä½†è¦è®°å¾—æ‰‹åŠ¨é‡Šæ”¾èµ„æºï¼ï¼ï¼</span></span><br></pre></td></tr></table></figure>


<h4 id="æ¿€æ´»å‡½æ•°-Activation-Function"><a href="#æ¿€æ´»å‡½æ•°-Activation-Function" class="headerlink" title="æ¿€æ´»å‡½æ•° Activation Function"></a>æ¿€æ´»å‡½æ•° Activation Function</h4><p>ç§‘å­¦å®¶åœ¨ç ”ç©¶é’è›™ç¥ç»æ˜¯å‘ç°ï¼Œå½“åˆºæ¿€åˆ°è¾¾ä¸€å®šç¨‹åº¦æ˜¯é’è›™æ‰ä¼šåšå‡ºç›¸åº”çš„ååº”ï¼Œæ˜¯ä¸ªç¦»æ•£çš„è¿‡ç¨‹<br>å› æ­¤åœ¨æ·±åº¦å­¦ä¹ ä¸­å°±å¯æ¨¡ä»¿è®¾ç‚¹ï¼Œè®¾è®¡ç¥ç»ç½‘ç»œï¼Œå› æ­¤æœ‰äº†æ¿€æ´»å‡½æ•°  </p>
<p>è¿ç»­çš„å…‰æ»‘çš„æ¿€æ´»å‡½æ•°</p>
<ul>
<li><strong>sigmoid(logistic)</strong><ul>
<li>$f(x)=\delta(x)=\frac{1}{1+e^{-x}}$</li>
<li><code>y = tf.sigmoid(a)</code></li>
<li>å¯ä»¥å°†èŒƒå›´å‹ç¼©åˆ°[0,1]</li>
<li>ä½†å½“xæ¥è¿‘æ— ç©·æ—¶ï¼Œå¯¼æ•°å‡ ä¹ä¸ºé›¶ï¼Œå¯¼è‡´æ¢¯åº¦ç¦»æ•£ï¼Œä½¿å¾—é•¿æœŸå¾—ä¸åˆ°æ›´æ–°</li>
</ul>
</li>
<li><strong>Tanh</strong><ul>
<li>$f(x)=tanh(x)=\frac{(e^x-e^{-x})}{e^x+e^{-x}}=2sigmoid(2x)-1$</li>
<li><code>y = tf.tanh(a)</code></li>
</ul>
</li>
<li><strong>ReLU(Rectified Linear Unit)</strong><ul>
<li>$<br>f(x) = \begin{cases}<br>0, &amp; \text{if } x &lt; 0  \<br>x, &amp; \text{if } x \geq 0<br>\end{cases}<br>$</li>
<li><code>tf.nn.relu()</code></li>
<li>æ·±åº¦å­¦ä¹ æœ€å¸¸ç”¨çš„<ul>
<li>ä¼˜åŠ¿</li>
<li>æ±‚å¯¼ç®€å•</li>
<li>ä¸ä¼šæ”¾å¤§æˆ–ç¼©å°æ¢¯åº¦(reLUçš„å¯¼æ•°ä¸º1)</li>
</ul>
</li>
</ul>
</li>
<li><strong>Softmax</strong><ul>
<li>$S(y_i)=\frac{e^{y_i}}{\sum_j{e^{y_i}}}$</li>
<li>å¸¸ç”¨äºå¤šåˆ†ç±»é—®é¢˜ï¼Œå› ä¸ºå®ƒæŠŠlogitsè½¬æ¢ä¸ºprob</li>
<li>åŒºåˆ«äºä¸€èˆ¬çš„è½¬æ¢æˆprobçš„æ–¹æ³•ï¼ŒSoftmaxä¼šæŠŠå¤§çš„æ”¾å¤§ï¼Œå°çš„ç¼©å°ï¼›æ‹‰å¤§å·®è·(sotf version of max)</li>
<li>æ±‚å¯¼:æŠŠå…ˆæŠŠåˆ†å­åˆ†æ¯çœ‹åšæ•´ä½“<code>f(x)å’Œg(x)</code>ç„¶åç›¸å½“äº$\frac{\partial p_i}{\partial a_j}=\frac{fâ€™(x)g(x)-f(x)gâ€™(x)}{g(x)^2}$;æ³¨æ„iå’Œjä¸åŒçš„æƒ…å†µè¦åˆ†å¼€è®¨è®º<ul>
<li>$$<br>  \frac{\partial p_i}{\partial a_j} = \begin{cases}<br>  p_i(1-p_1), &amp; \text{if } i=j  \<br>  -p_jp_i, &amp; \text{if } i\neq j<br>  \end{cases}<br>$$</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="Losså‡½æ•°çš„æ¢¯åº¦"><a href="#Losså‡½æ•°çš„æ¢¯åº¦" class="headerlink" title="Losså‡½æ•°çš„æ¢¯åº¦"></a>Losså‡½æ•°çš„æ¢¯åº¦</h4><p>ç»å…¸çš„losså‡½æ•°</p>
<ul>
<li>Mean Squared Error(MSE,å‡æ–¹å·®)<ul>
<li>$loss=\frac{1}{N}\sum(y-out)^2$</li>
<li><code>loss1 = tf.reduce_mean(tf.square(y-out))</code></li>
<li><code>loss2 = tf.reduce_mean(tf.losses.MSE(y,out))</code></li>
</ul>
</li>
<li>Cross Entropy Loss<ul>
<li>Softmax</li>
</ul>
</li>
</ul>
<h4 id="é“¾å¼æ³•åˆ™"><a href="#é“¾å¼æ³•åˆ™" class="headerlink" title="é“¾å¼æ³•åˆ™"></a>é“¾å¼æ³•åˆ™</h4><p>$\frac{\partial y}{\partial x} = \frac{\partial y}{\partial u}\frac{\partial u}{\partial x}$</p>
<h4 id="æ„ŸçŸ¥æœºæ¢¯åº¦ä¼ å¯¼"><a href="#æ„ŸçŸ¥æœºæ¢¯åº¦ä¼ å¯¼" class="headerlink" title="æ„ŸçŸ¥æœºæ¢¯åº¦ä¼ å¯¼"></a>æ„ŸçŸ¥æœºæ¢¯åº¦ä¼ å¯¼</h4><p>åˆ©ç”¨é“¾å¼æ³•åˆ™ä»è¾“å‡ºå¾€è¾“å…¥é€€å°±å¯ä»¥çŸ¥é“æ¢¯åº¦ä¿¡æ¯ï¼Œç„¶åæ›´æ–°  </p>
<h3 id="å¯è§†åŒ–"><a href="#å¯è§†åŒ–" class="headerlink" title="å¯è§†åŒ–"></a>å¯è§†åŒ–</h3><ul>
<li>tensorboard<ul>
<li><code>pip install tensorboard</code></li>
<li>åœ¨ä»£ç ä¸­å†™å…¥<code>summary_writer = tf.summary.create_file_writer(DIR)</code></li>
<li>æ‹¿åˆ°<code>summary_writer</code>åå°±å¯ä»¥å¿˜é‡Œé¢å–‚æ•°æ®</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1,å–‚æ•°æ®ç‚¹</span></span><br><span class="line"><span class="keyword">with</span> summary_writer.as_default():</span><br><span class="line">    tf.summary.scalar(<span class="string">'NAME1'</span>, float(LOSS), step=STEP)  <span class="comment"># (å›¾çš„åå­—,æ•°æ®,åæ ‡(é»˜è®¤æ˜¯xè½´))</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2,å–‚ä¸€ä¸ªå›¾ç‰‡</span></span><br><span class="line"><span class="keyword">with</span> summary_writer.as_default():</span><br><span class="line">    tf.summary.image(<span class="string">'NAME1'</span>, IMG, step=STEP)  <span class="comment"># (å›¾çš„åå­—,æ•°æ®,åæ ‡(é»˜è®¤æ˜¯xè½´))</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3,ç»™å¤šä¸ªå›¾ç‰‡</span></span><br><span class="line"><span class="comment"># æœ€å¥½çš„åŠæ³•æ˜¯è®¤ä¸ºçš„æ‹¼æ¥å›¾ç‰‡,ç„¶åä¼ ä¸€å¼ æ‹¼æ¥çš„å›¾ç‰‡(google)</span></span><br></pre></td></tr></table></figure>

<ul>
<li>visdom </li>
</ul>
<h2 id="Kerasé«˜å±‚API"><a href="#Kerasé«˜å±‚API" class="headerlink" title="Kerasé«˜å±‚API"></a>Kerasé«˜å±‚API</h2><h4 id="ä¼˜åŒ–"><a href="#ä¼˜åŒ–" class="headerlink" title="ä¼˜åŒ–"></a>ä¼˜åŒ–</h4><p>åœ¨è®¡ç®—loss,accuracyçš„æ—¶å€™ç»å¸¸ä¼šå‘ç°æ•°æ®å¿½é«˜å¿½ä½,æ‰€ä»¥å¯å€ŸåŠ©kerasçš„apiæ¥ä¼˜åŒ–</p>
<ul>
<li>metricsæµ‹é‡<ul>
<li>kerasä¼šå°†æ•°æ®æ”¾åœ¨ä¸€ä¸ªlist,ç„¶åå–å¹³å‡å€¼æ¥ä¼˜åŒ–?</li>
<li>å¦‚<code>loss_meter = metrics.Mean()</code>,<code>acc_meter = metrics.Accuracy()</code></li>
</ul>
</li>
<li>update_stateæ›´æ–°æ•°æ®<ul>
<li><code>loss_meter.update_state(loss)</code>,<code>acc_meter.update_state(y, pred)</code></li>
</ul>
</li>
<li>result().numpy()è·å–ç»“æœ,è½¬æ¢æˆnumpyè¾“å‡º<ul>
<li><code>loss_meter.result().numpy()</code>resultå¾—åˆ°tensorï¼Œå†è½¬æ¢æˆnumpy</li>
</ul>
</li>
<li>reset_statesé‡Šæ”¾æ•°æ®<ul>
<li>å½“è¦åºŸå¼ƒæ—§çš„æ•°æ®æ—¶<code>loss_meter.reset_states()</code></li>
</ul>
</li>
</ul>
<h4 id="Compile-amp-Fit"><a href="#Compile-amp-Fit" class="headerlink" title="Compile&amp;Fit"></a>Compile&amp;Fit</h4><ul>
<li>Compile,ç±»ä¼¼è£…è½½å¼¹è¯,å¯ä»¥æŒ‡å®šloss,ä¼˜åŒ–å™¨,è¯„ä¼°æŒ‡æ ‡</li>
<li>Fix,å®Œæˆæ ‡å‡†åˆ›ç«‹</li>
<li>Evaluate,æµ‹è¯•</li>
<li>Predic,æ‹¿åˆ›å»ºå¥½çš„æ¨¡å‹æ¥é¢„æµ‹</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">### ä¸€èˆ¬çš„æµç¨‹</span></span><br><span class="line">epoch <span class="keyword">in</span> range(num):</span><br><span class="line">    <span class="keyword">for</span> step, (x, y) <span class="keyword">in</span> enumerate(db):</span><br><span class="line">        <span class="keyword">with</span> tf.GradientTape() <span class="keyword">as</span> tape:   <span class="comment"># å¾ªç¯ç½‘ç»œ</span></span><br><span class="line">            <span class="comment"># [b, 784] =&gt; [b, 10]</span></span><br><span class="line">            logits = model(x)</span><br><span class="line">            y_onehot = tf.one_hot(y, depth=<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">            loss_ce = tf.losses.categorical_crossentropy(y_onehot, logits, from_logits=<span class="literal">True</span>)</span><br><span class="line">            loss_ce = tf.reduce_mean(loss_ce)</span><br><span class="line"></span><br><span class="line">        grads = tape.gradient(loss_ce, model.trainable_variables)    <span class="comment"># æ›´æ–°</span></span><br><span class="line">        optimizer.apply_gradients(zip(grads, model.trainable_variables))</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> step % <span class="number">100</span> == <span class="number">0</span>:   </span><br><span class="line">            <span class="comment"># ...</span></span><br><span class="line">    <span class="keyword">for</span> (x_test, y_test) <span class="keyword">in</span> test_db:    <span class="comment"># æµ‹è¯•</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">### ä½¿ç”¨Kerasçš„apiå¿«é€Ÿå»ºç«‹æ ‡å‡†åŒ–çš„ç¥ç»ç½‘ç»œ</span></span><br><span class="line"><span class="comment"># ç§°networkæˆ–model</span></span><br><span class="line">network = Sequential([...])   <span class="comment"># å¦‚æœæ˜¯åˆ«çš„æ²¡å­¦åˆ°çš„è¯...</span></span><br><span class="line">network.compile(</span><br><span class="line">        optimizer=optimizers.Adam(lr=<span class="number">0.01</span>),    <span class="comment"># æŒ‡å®šä¼˜åŒ–å™¨</span></span><br><span class="line">        loss=tf.loss.CategoricalCrossentropy(from_logits=<span class="literal">True</span>),   <span class="comment"># æŒ‡å®šlosså‡½æ•°</span></span><br><span class="line">        metrics=[<span class="string">'accuracy'</span>]     <span class="comment"># æŒ‡å®šæµ‹è¯•æ ‡å‡†</span></span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">network.fit(</span><br><span class="line">        db,   <span class="comment"># è¦è®­ç»ƒçš„æ•°æ®é›†</span></span><br><span class="line">        epochs=<span class="number">10</span>,    <span class="comment"># è®­ç»ƒçš„å‘¨æœŸ</span></span><br><span class="line">        validation_data=db_test,    <span class="comment"># ç”¨äºåšæµ‹è¯•çš„æ•°æ®é›†,ä¸€èˆ¬å†™ä½œds_val</span></span><br><span class="line">        validation_freq=<span class="number">2</span>    <span class="comment"># æµ‹è¯•çš„å‘¨æœŸ,å¦‚è¿™é‡Œä¸€å…±10ä¸ªepochs,æ¯2ä¸ªepochså°±è¿›è¡Œä¸€æ¬¡æµ‹è¯•</span></span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">network.evaluate(ds_val)    <span class="comment"># è®­ç»ƒå®Œåå¯¹æ¨¡å‹çš„è¯„ä¼°,ä¼ å…¥ä¸€ä¸ªæ•°æ®é›†</span></span><br><span class="line"></span><br><span class="line">pred = network(x)</span><br><span class="line"><span class="comment"># æˆ– pred = network.predict(x)    é¢„æµ‹</span></span><br></pre></td></tr></table></figure>


<h4 id="è‡ªå®šä¹‰ç½‘ç»œ"><a href="#è‡ªå®šä¹‰ç½‘ç»œ" class="headerlink" title="è‡ªå®šä¹‰ç½‘ç»œ"></a>è‡ªå®šä¹‰ç½‘ç»œ</h4><ul>
<li>keras.Sequential(layer1, layer2, â€¦)<ul>
<li>å‚æ•°è¦ç»§æ‰¿è‡ª<code>keras.layers.Layer()</code></li>
<li>å»ºç«‹å¥½ç½‘ç»œåvariable(wå’Œb)æ˜¯æ²¡æœ‰çš„<ul>
<li>æ³•1:æŒ‡å®šè¾“å…¥shape<code>network.build(input_shape=(None, 28*28))</code></li>
<li>æ³•2:è‡ªåŠ¨è¯†åˆ«<code>network(x)</code><ul>
<li>è¿™ä¸ªçš„åŸç†æ˜¯è°ƒç”¨äº†ç±»ä¸­çš„call()æ–¹æ³•,ç›¸å½“äºnetwork.<strong>call</strong>(x)ã€‚åŒç†è‡ªå®šä¹‰ç±»ä¸­ä¹Ÿå¯å¦‚æ­¤</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>keras.layers.Layer()<ul>
<li>ä»»ä½•è¦è‡ªå®šä¹‰çš„å±‚è¦ç»§æ‰¿è‡ªå®ƒ</li>
</ul>
</li>
<li>keras.Model()<ul>
<li>compile/fit/evaluate</li>
<li>Sequentialä¹Ÿæ˜¯ç»§æ‰¿è‡ªè¯¥ç±»ï¼Œæ‰€ä»¥è‡ªå®šä¹‰çš„ç½‘ç»œåº”è¯¥ç»§æ‰¿è¿™ä¸ª</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyDense</span><span class="params">(layers.Layer)</span>:</span>    <span class="comment"># è‡ªå®šä¹‰å±‚ç»§æ‰¿</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, inp_dim, outp_dim)</span>:</span></span><br><span class="line">        super(MyDense, self).__init__() </span><br><span class="line">        self.kernel = self.add_weight(<span class="string">'name1'</span>, [inp_dim, outp_dim])   <span class="comment"># ç”¨æ¯ç±»çš„add_weightè€Œä¸æ˜¯ç”¨tf.variable</span></span><br><span class="line">        self.bias = self.add_weight(<span class="string">'name2'</span>, [outp_dim])    <span class="comment"># nameæ˜¯ç»™æ¯ç±»ç®¡ç†ç”¨çš„</span></span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">call</span><span class="params">(self, inputs, training=None)</span>:</span></span><br><span class="line">        out = inputs @ self.kernel + self.bias</span><br><span class="line">        <span class="keyword">return</span> out</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯¹æ¯”</span></span><br><span class="line">layers.Dense(<span class="number">256</span>, activation=tf.nn.relu),</span><br><span class="line"></span><br><span class="line"><span class="comment"># åŒç†Modelè‡ªå®šä¹‰æ–¹æ³•ä¹Ÿä¸€æ ·</span></span><br></pre></td></tr></table></figure>

<h4 id="æ¨¡å‹çš„åŠ è½½ä¸ä¿æŒ"><a href="#æ¨¡å‹çš„åŠ è½½ä¸ä¿æŒ" class="headerlink" title="æ¨¡å‹çš„åŠ è½½ä¸ä¿æŒ"></a>æ¨¡å‹çš„åŠ è½½ä¸ä¿æŒ</h4><ul>
<li>save/load weights<ul>
<li>åªä¿å­˜æ¨¡å‹å‚æ•°</li>
<li>ç¼ºç‚¹æ˜¯æ²¡æœ‰æºä»£ç ï¼Œç½‘ç»œä¸å¾—è€ŒçŸ¥</li>
</ul>
</li>
<li>save/load entire model<ul>
<li>ç®€å•ç²—æš´çš„</li>
</ul>
</li>
<li>saved_model <ul>
<li>é€šç”¨çš„ä¿å­˜æ ¼å¼</li>
</ul>
</li>
</ul>
<p><strong>save/load weights</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># save</span></span><br><span class="line">model.save_weights(<span class="string">'PATH'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># load</span></span><br><span class="line">model = create_model()    <span class="comment"># éœ€è¦äººå·¥åˆ›å»ºç½‘ç»œ</span></span><br><span class="line">model.load_weights(<span class="string">'PATH'</span>)</span><br></pre></td></tr></table></figure>

<p><strong>save/load entire model</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># save</span></span><br><span class="line">model.save(<span class="string">'PATH'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># load</span></span><br><span class="line">model = tf.keras.models.load_model(<span class="string">'PATH'</span>)  <span class="comment"># ä¸éœ€è¦äººå·¥åˆ›å»ºç½‘ç»œ</span></span><br></pre></td></tr></table></figure>

<p><strong>saved model</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># save</span></span><br><span class="line">tf.saved_model.saved(model, <span class="string">'PATH'</span>)   <span class="comment"># æ ‡å‡†çš„ï¼Œå¯ä¾›å…¶ä»–æ¨¡å‹ä½¿ç”¨çš„ä¿å­˜</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># load</span></span><br><span class="line">imported = tf.saved_model.load(path)   </span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿˜åŸé™¤ç½‘ç»œ</span></span><br><span class="line">f = imported.signature[<span class="string">'serving_defaut'</span>]</span><br></pre></td></tr></table></figure>



<h3 id="è¿‡æ‹Ÿåˆå’Œæ¬ æ‹Ÿåˆ"><a href="#è¿‡æ‹Ÿåˆå’Œæ¬ æ‹Ÿåˆ" class="headerlink" title="è¿‡æ‹Ÿåˆå’Œæ¬ æ‹Ÿåˆ"></a>è¿‡æ‹Ÿåˆå’Œæ¬ æ‹Ÿåˆ</h3><p>ç°å®æƒ…å†µæ˜¯æˆ‘ä»¬å¹¶ä¸çŸ¥é“æ¨¡å‹çš„ç¬¦åˆä»€ä¹ˆåˆ†å¸ƒ  </p>
<ul>
<li>model capacity,æ¨¡å‹çš„å­¦ä¹ èƒ½åŠ›<ul>
<li>æ˜¾ç„¶é¡¹è¶Šå¤šè¶Šé«˜</li>
</ul>
</li>
<li>underfitting<ul>
<li>æ¨¡å‹çš„è¡¨è¾¾èƒ½åŠ›å¼±äºçœŸå®æ•°æ®ï¼Œå¦‚ç”¨ç›´çº¿æ‹ŸåˆåŒæ›²çº¿</li>
</ul>
</li>
<li>overfitting<ul>
<li>æ¨¡å‹çš„è¡¨è¾¾èƒ½åŠ›å¤§äºçœŸå®æ•°æ®ï¼ŒæŠŠä¸å¿…è¦çš„å™ªå£°ä¹Ÿæ‹Ÿåˆè¿›æ¥äº†</li>
<li>æœ€å¸¸è§</li>
</ul>
</li>
</ul>
<h4 id="æ£€æŸ¥overfitting"><a href="#æ£€æŸ¥overfitting" class="headerlink" title="æ£€æŸ¥overfitting"></a>æ£€æŸ¥overfitting</h4><h5 id="äº¤å‰éªŒè¯"><a href="#äº¤å‰éªŒè¯" class="headerlink" title="äº¤å‰éªŒè¯"></a>äº¤å‰éªŒè¯</h5><p>æ£€æŸ¥æ¬ æ‹Ÿåˆå’Œè¿‡æ‹Ÿåˆçš„æ–¹æ³•   </p>
<p>ä¸€èˆ¬æƒ…å†µä¸‹ä¼šæŠŠæ•°æ®é›†åˆ‡åˆ†(splitting)æˆä¸‰ä»½,ä½œç”¨åˆ†åˆ«æ˜¯train setï¼Œval setï¼Œtest set<br>æ•°æ®é›†ä¸€éƒ¨åˆ†ç”¨æ¥è®­ç»ƒï¼Œä¸€éƒ¨åˆ†ç”¨æ¥éªŒè¯accuracyè¿™æ˜¯æ˜¯æ˜¾ç„¶çš„ï¼Œé‚£ä¸ºä»€ä¹ˆæœ‰ç¬¬ä¸‰ä»½å‘¢ï¼Ÿ<br>å› ä¸ºåœ¨çœŸå®çš„éœ€æ±‚ä¸­ï¼Œæ˜¯ä¸æ˜¯æœ‰å–å·§çš„äººä¼šæŠŠtestç”¨çš„æ•°æ®é›†ä¹Ÿç”¨æ¥è®­ç»ƒï¼Œä»è€Œè¿‡æ‹Ÿåˆæ¥è¾¾åˆ°å¾ˆé«˜çš„å‡†ç¡®åº¦(ä½†å®é™…å®ƒä»¬å·²ç»è¿‡æ‹Ÿåˆäº†)<br>æ‰€ä»¥ç¬¬ä¸‰ä»½æ˜¯ç”¨æ¥é˜²æ­¢è¿™ç§æƒ…å†µå‘ç”Ÿçš„ï¼Œä¸å‚ä¸è®­ç»ƒçš„ï¼Œæœ€ç»ˆæ£€éªŒæ¨¡å‹çš„æ•°æ®é›†</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">network.compile(</span><br><span class="line">        optimizer=optimizers.Adam(lr=<span class="number">0.01</span>),   </span><br><span class="line">        loss=tf.loss.CategoricalCrossentropy(from_logits=<span class="literal">True</span>),   </span><br><span class="line">        metrics=[<span class="string">'accuracy'</span>]   </span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">network.fit(</span><br><span class="line">        db,    <span class="comment"># training</span></span><br><span class="line">        epochs=<span class="number">10</span>,</span><br><span class="line">        validation_data=db_test,   <span class="comment"># val set</span></span><br><span class="line">        validation_freq=<span class="number">2</span>   </span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">network.evaluate(ds_val)   <span class="comment"># test set</span></span><br></pre></td></tr></table></figure>

<h5 id="K-fold-cross-validation"><a href="#K-fold-cross-validation" class="headerlink" title="K-fold cross-validation"></a>K-fold cross-validation</h5><p>ç”±ä¸Šé¢çŸ¥ï¼Œtest setæ˜¯å®Œå…¨ä¸èƒ½åŠ¨çš„ï¼Œæ‰€ä»¥åœ¨åˆ‡åˆ†çš„æ—¶å€™train setå’Œval setå¯ä»¥éšæœºçš„åˆ‡åˆ†ï¼Œå¯ä»¥é˜²æ­¢ç½‘ç»œè®°å¿†ç‰¹æ€§</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åœ¨tensorflowä¸­å¯ä»¥è¡¨ç°ä¸º</span></span><br><span class="line">shuffle(db)  <span class="comment"># æ‰“æ•£</span></span><br><span class="line">splices()   <span class="comment"># åˆ‡å‰²</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¹Ÿå¯ç”¨kerasçš„åŠŸèƒ½</span></span><br><span class="line">network.fit(db, validation_split=<span class="number">0.1</span>)   <span class="comment"># æŒ‰ç…§9:1éšæœºåˆ‡åˆ†</span></span><br></pre></td></tr></table></figure>

<h4 id="å‡è½»overfitting"><a href="#å‡è½»overfitting" class="headerlink" title="å‡è½»overfitting"></a>å‡è½»overfitting</h4><h5 id="Regularization"><a href="#Regularization" class="headerlink" title="Regularization"></a>Regularization</h5><ul>
<li>L1-regularization<ul>
<li>lossåŠ ä¸Šlambdaçº¦æŸçš„ä¸€èŒƒå¼</li>
<li>$j(\theta) = -\sum^m_1{y_i\log_e{\bar y_i} + (1-y_i)\log_e{(1-\bar y_i)}} + \lambda \sum_i^n{|\theta_i|}$</li>
</ul>
</li>
<li>L2-regularization<ul>
<li>lossåŠ ä¸Šlambdaçº¦æŸçš„ä¸€èŒƒå¼</li>
<li>$J(W;x,y)+\frac{1}{2} \times ||W||^2$</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ³•ä¸€ï¼šåœ¨ä¸€å±‚ç½‘ç»œä¸­æ·»åŠ kernel_regularizerå‚æ•°</span></span><br><span class="line">keras.layers.Dense(<span class="number">16</span>,</span><br><span class="line">                    kernel_regularizer=keras.regularizers.L2(<span class="number">0.001</span>)   <span class="comment"># 0.001å°±æ˜¯ lambda</span></span><br><span class="line">            )</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ³•äºŒï¼šæ›´åŠ çµæ´»çš„è‡ªå·±æ§åˆ¶èŒƒå¼</span></span><br><span class="line">loss_regularization = []   </span><br><span class="line"><span class="keyword">for</span> p <span class="keyword">in</span> network.trainable_variables:     <span class="comment"># å–èŒƒå¼é‡Œé¢çš„å‚æ•°w1,w2...b1,b2...å–æ³•å¾ˆçµæ´»</span></span><br><span class="line">    loss_regularization.append(tf.nn.l2_loss(p))</span><br><span class="line">loss_regularization = tf.reduce_sum(tf.stack(loss_regularization))  <span class="comment"># åšä¸€èŒƒå¼è¿˜æ˜¯äºŒèŒƒæ•°...</span></span><br><span class="line"></span><br><span class="line">loss = loss + <span class="number">0.0001</span>*loss_regularization</span><br></pre></td></tr></table></figure>

<h4 id="åŠ¨é‡ä¸å­¦ä¹ ç‡"><a href="#åŠ¨é‡ä¸å­¦ä¹ ç‡" class="headerlink" title="åŠ¨é‡ä¸å­¦ä¹ ç‡"></a>åŠ¨é‡ä¸å­¦ä¹ ç‡</h4><h5 id="Momentum-åŠ¨é‡"><a href="#Momentum-åŠ¨é‡" class="headerlink" title="Momentum åŠ¨é‡"></a>Momentum åŠ¨é‡</h5><p>ç”±äºæ¢¯åº¦çš„æ›´æ–°ï¼Œä¼šæœ‰å¤§å¹…çš„åå¤è·³è·ƒçš„ç°è±¡ï¼ŒåŠ¨é‡å°±æ˜¯åœ¨æ›´æ–°æ–¹å‘çš„åŸºç¡€ä¸Šç»“åˆä¸Šä¸€é˜¶æ®µçš„æ–¹å‘è¿›è¡Œæ¢¯åº¦æ›´æ–°ï¼Œä»è€Œä½¿å¾—æ›´å¹³ç¼“ï¼Œåƒè¸©åˆ¹è½¦ä¸€æ ·</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">optimizer = SGD(learing_rate=<span class="number">0.02</span>, momentum=<span class="number">0.9</span>)   <span class="comment"># momentum å°±åœ¨è¶…å‚æ•°lambda</span></span><br><span class="line">optimizer = RMSprop(learing_rate=<span class="number">0.02</span>, momentum=<span class="number">0.9</span>)</span><br><span class="line">optimizer = Adam(learing_rate=<span class="number">0.02</span>,   <span class="comment"># Adamæ²¡æœ‰momentum(å†…ç½®),ä½†æœ‰beta_1,beta_2</span></span><br><span class="line">        beta_1=<span class="number">0.9</span>,</span><br><span class="line">        beta_2=<span class="number">0.999</span>)</span><br></pre></td></tr></table></figure>

<h5 id="Learning-rate-å­¦ä¹ ç‡"><a href="#Learning-rate-å­¦ä¹ ç‡" class="headerlink" title="Learning rate å­¦ä¹ ç‡"></a>Learning rate å­¦ä¹ ç‡</h5><p>å­¦ä¹ ç‡åŠ¨æ€è°ƒæ•´æ¥ä¼˜åŒ–ç½‘ç»œ</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">optimizer = SGD(learing_rate=<span class="number">0.02</span>)</span><br><span class="line"><span class="keyword">for</span> epoch <span class="keyword">in</span> range(<span class="number">100</span>):</span><br><span class="line">    <span class="comment"># get loss</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># change learing_rate æ¯”è¾ƒç®€å•ç²—æš´</span></span><br><span class="line">    optimizer.learing_rate = <span class="number">0.2</span>*(<span class="number">100</span>-epoch)/<span class="number">100</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># update weights</span></span><br></pre></td></tr></table></figure>

<h4 id="Early-Stopping-amp-Dropout"><a href="#Early-Stopping-amp-Dropout" class="headerlink" title="Early Stopping &amp; Dropout"></a>Early Stopping &amp; Dropout</h4><h5 id="Early-Stopping"><a href="#Early-Stopping" class="headerlink" title="Early Stopping"></a>Early Stopping</h5><p>å¾ˆå¤šæƒ…å†µä¸‹è™½ç„¶training accuracyè¿˜åœ¨ä¸Šå‡ï¼Œä½†æ˜¯validation accuracyä»¥åŠè¾¾åˆ°æœ€ä¼˜ç”šè‡³å¼€å§‹ä¸‹é™äº†ï¼Œè¿™æ˜¯å°±éœ€è¦ä»¥å‰ç»ˆæ­¢</p>
<h5 id="Dropout"><a href="#Dropout" class="headerlink" title="Dropout"></a>Dropout</h5><p>å’Œoverfittingçš„æƒ…å†µä¸€æ ·ï¼Œä¸ºå‡å°‘å™ªå£°çš„å¹²æ‰°ï¼Œå¯ä»¥å‡å°‘èŠ‚ç‚¹æ•°(?çŸ©é˜µé‡Œé¢çš„?),learning less to learning better</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">network = Sequential([layers.Dense(<span class="number">256</span>, activation=<span class="string">'relu'</span>),</span><br><span class="line">                      layers.Dropout(<span class="number">0.5</span>),    <span class="comment"># 0.5 rate to dropout</span></span><br><span class="line">                      layers.Dense(<span class="number">256</span>, activation=<span class="string">'relu'</span>),</span><br><span class="line">                      layers.Dropout(<span class="number">0.5</span>),    <span class="comment"># 0.5 rate to dropout</span></span><br><span class="line">                      ...</span><br><span class="line">                    ])</span><br></pre></td></tr></table></figure>
<p>å› ä¸ºtrainingå’Œtestçš„ç­–ç•¥ä¸åŒ(trainingæ—¶ä¸ºå¾—åˆ°æ›´å¥½çš„w,bï¼Œè€Œä½¿ç”¨dropoutçš„æ–¹æ³•æ¥å‡å°overfitting,æ‰€ä»¥å¼€å¯dropoutï¼Œtestæ˜¯æµ‹è¯•æ¨¡å‹ï¼Œæ‰€ä»¥ä¸ç”¨å¼€)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># training</span></span><br><span class="line">network(x, training=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># validation || test</span></span><br><span class="line">network(x, training=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>

<h5 id="Stochastic"><a href="#Stochastic" class="headerlink" title="Stochastic"></a>Stochastic</h5><h5 id="Deterministic"><a href="#Deterministic" class="headerlink" title="Deterministic"></a>Deterministic</h5><h2 id="å·ç§¯ç¥ç»ç½‘ç»œ"><a href="#å·ç§¯ç¥ç»ç½‘ç»œ" class="headerlink" title="å·ç§¯ç¥ç»ç½‘ç»œ"></a>å·ç§¯ç¥ç»ç½‘ç»œ</h2><p>åœ¨å¤„ç†å›¾åƒé—®é¢˜æ—¶ï¼Œä½¿ç”¨å…¨è¿æ¥çš„æ–¹å¼ä¼šå¯¼è‡´å¤§é‡çš„èµ„æºå ç”¨.<br>äºæ˜¯ç”±ç”Ÿç‰©å­¦ä¸Šçœ¼ç›å¯è§†åŸŸçš„å¯å‘ï¼Œæˆ‘ä»¬é‡‡ç”¨å±€éƒ¨è¿æ¥ï¼Œç„¶åæ»‘åŠ¨ç›´è‡³æ‰«æå…¨éƒ¨è¾“å…¥ã€‚ç‰¹ç‚¹åœ¨äºå¯¹äºç›¸åŒçš„å±‚å¦‚(RGB),æ¯æ¬¡æ‰«æçš„è§‚å¯Ÿæ–¹å¼(å·ç§¯æ ¸)æ˜¯ä¸€æ ·çš„(weight sharing)<br>æ‰€ä»¥å­¦ä¹ çš„æ—¶å€™å°±å¤§å¤§å‡å°‘äº†å‚æ•°é‡  </p>
<h3 id="å·ç§¯"><a href="#å·ç§¯" class="headerlink" title="å·ç§¯"></a>å·ç§¯</h3><p>ä¿¡å·çš„å åŠ å«åšå·ç§¯,å¾—åˆ°çš„ç»“æœå«åš<strong>feature map</strong>  </p>
<p>$$<br>y(t)=x(t) * h(t)=\int^\infty _ {-\infty}  x(\tau)h(t-\tau)\mathrm{d}x<br>$$</p>
<p>* è¡¨ç¤ºå·ç§¯æ“ä½œ,xå°±ç›¸å½“äºè¾“å…¥,hå°±ç›¸å½“äºè§‚å¯Ÿæ–¹å¼(å·ç§¯æ ¸),tå°±ç›¸å½“åç§»é‡ï¼Œæ‰«è¿‡æ•´ä¸ªå›¾ç‰‡tå‘ç”Ÿæ”¹å˜xå’Œhå·ç§¯å‡ºä¿¡å·è¾“å‡ºy</p>
<h4 id="Padding-amp-Stride"><a href="#Padding-amp-Stride" class="headerlink" title="Padding &amp; Stride"></a>Padding &amp; Stride</h4><ul>
<li>Padding<ul>
<li>æŠŠè¾“å…¥å±‚æ‰©å¤§(è™šçš„)ç„¶åæ‰«æåå°±èƒ½å¾—åˆ°ç»´åº¦ä¸è¾“å…¥ç›¸ç­‰çš„è¾“å‡º</li>
</ul>
</li>
<li>Stride<ul>
<li>æŠŠæ‰«æçš„æ­¥é•¿åŠ å¤§ï¼Œå°±èƒ½å‡å°‘è¾“å‡ºçš„ç»´åº¦</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">layers.Conv2D(<span class="number">4</span>, kernel_size=<span class="number">5</span>, stride=<span class="number">1</span>, padding=<span class="string">'samd'</span>)  <span class="comment"># å·ç§¯æ ¸ä¸ªæ•°,5*5,æ­¥é•¿,'same'å¯ä»¥ä¿è¯è¾“å…¥ç»´åº¦ç­‰äºè¾“å‡º</span></span><br></pre></td></tr></table></figure>

<h4 id="Channels"><a href="#Channels" class="headerlink" title="Channels"></a>Channels</h4><ul>
<li>è®¾è¾“å…¥æ˜¯[1, 32, 32, 3],32*32çš„å›¾ç‰‡,3ä¸ªé€šé“<ul>
<li>é‚£æˆ‘ä»¬çš„ä¸€ä¸ªå·ç§¯æ ¸å¯ä»¥æ˜¯[3, 5, 5] 3è¡¨ç¤ºè¾“å…¥é€šé“çš„æ•°é‡(RGB)</li>
<li>æœ€åå¯ä»¥å¾—åˆ°ä¸€ä¸ª[b, 30, 30, 1]çš„è¾“å‡º</li>
</ul>
</li>
<li>å¦‚æœä½¿ç”¨å¤šä¸ªæ ¸å¦‚[N, 3, 5, 5]é‚£å°±èƒ½å¾—åˆ°Nä¸ª[b, 30, 30, 1]å³[b, 30, 30, N]</li>
</ul>
<p>å¤šé€šé“è¾“å‡ºï¼Œå¤šé€šé“è¾“å…¥</p>
<h4 id="Gradient"><a href="#Gradient" class="headerlink" title="Gradient"></a>Gradient</h4><p>$$<br>O _ {mn} = \sum {x _ {ij} * w _ {ij}} + b  \<br>\frac{\delta Loss}{\delta w _ {ij}}<br>$$</p>
<h3 id="Classic-Network"><a href="#Classic-Network" class="headerlink" title="Classic Network"></a>Classic Network</h3><h4 id="GoogLeNet"><a href="#GoogLeNet" class="headerlink" title="GoogLeNet"></a>GoogLeNet</h4><p>When the network get deeper, above 20, is get harder to training, even make trains revoke.</p>
<h4 id="ResNet"><a href="#ResNet" class="headerlink" title="ResNet"></a>ResNet</h4><p>Residual</p>
<h2 id="Sequence"><a href="#Sequence" class="headerlink" title="Sequence"></a>Sequence</h2><p>Signal with time order</p>
<ul>
<li>sequence embed<ul>
<li>turn digital signal into a sequence</li>
</ul>
</li>
</ul>
<p>Many sets can be like a sequence. mnist for example[b, 28, 28]. can expand like [b, time, 28] or [time, b, 28] and so on.</p>
<p>But a sequence better to expand like a time orde things [time, b, 28] is much better. It depend on how you expand.</p>
<p>Here are some rules:</p>
<ul>
<li>semantic similarity</li>
<li>trainable</li>
</ul>
<h3 id="Cycle-network"><a href="#Cycle-network" class="headerlink" title="Cycle network"></a>Cycle network</h3><p>Two question:</p>
<ul>
<li><p>Long sentence</p>
<ul>
<li>weight sharing</li>
<li>We can do like a conv_net</li>
</ul>
</li>
<li><p>Context information</p>
<ul>
<li>It is a pertinence bettween word and word</li>
<li>Here is the example formulation</li>
</ul>
</li>
</ul>
<p>$$\begin{aligned}<br>h_t &amp;= f_w(h_{t-1}, x_t) \<br>h_t &amp;= tanh(W_{hh}h_{t-1} + W{xh}x_t) \<br>y_t &amp;= W_{hy}h_t \<br>\end{aligned}$$</p>
<h3 id="RNNlayer"><a href="#RNNlayer" class="headerlink" title="RNNlayer"></a>RNNlayer</h3><h4 id="SimpleRNN"><a href="#SimpleRNN" class="headerlink" title="SimpleRNN"></a>SimpleRNN</h4><p>$$<br>\begin{aligned}<br>call &amp;= xw_{xh} + h_tw_{hh}, (for\ each\ item\ in\ timeline) \<br>out_1, h_1 &amp;= call(x, h_0) \<br>out_2, h_2 &amp;= call(x, h_1) \<br>out_t, h_t &amp;= call(x, h_{t-1})<br>\end{aligned}<br>$$</p>
<p>$h_t$ and $out_t$ is the same thing(id) but have difference meaning </p>
<h4 id="Optimize"><a href="#Optimize" class="headerlink" title="Optimize"></a>Optimize</h4><ul>
<li>Step 1:Gradient Exploding<ul>
<li>Gradient Clipping</li>
<li>$grad = \frac{|grad|}{grad}$ ,shrink to 1 and mult $15\times{lr}$</li>
<li><code>grads = [tf.clipe_by_norm(g, 15) for g in grads]</code></li>
</ul>
</li>
<li>Step 2:Gradient Vanishing<ul>
<li><em>LSTM</em> \ <em>GRU</em>  </li>
</ul>
</li>
</ul>
<h5 id="LSTM"><a href="#LSTM" class="headerlink" title="LSTM"></a>LSTM</h5><p>Compare with RNN(short term memory), which can only remenber nearly sentence.<em>LSTM</em> is long short term memory.</p>
<p>LSTM use three gates(sigmoid) to contral the signal. </p>
<ul>
<li>Forget gate<ul>
<li>$f_t = \sigma(W_f\cdot[h_{t-1}, x_t]+b_f)$</li>
<li><img src="./static/forget_gate.png" style="zoom:50%"></li>
</ul>
</li>
<li>Input gate<ul>
<li>$$<br>\begin{aligned}<br>  i_t &amp;= \sigma(W_i\cdot[h{t-1}, x_t] + b_i) \<br>  \widetilde{C_t} &amp;= tanh(W_C\cdot[h_{t-1}, x_t] + b_C)<br>\end{aligned}<br>$$</li>
<li><img src="./static/input_gate.png" style="zoom:50%"></li>
</ul>
</li>
<li>Cell state<ul>
<li>$C_t = f_f * C_{t-1} + i_t * \widetilde{C_t}$</li>
<li><img src="./static/cell_state.png" style="zoom:50%"></li>
</ul>
</li>
<li>Output gate<ul>
<li>$$<br>  \begin{aligned}<br>  O_t &amp;= \sigma(W_o[h_{t-1}, x_t] + b_o) \<br>  h_t &amp;= O_t * tanh(C_t)<br>  \end{aligned}$$</li>
<li><img src="./static/output_gate.png" style="zoom:50%">

</li>
</ul>
</li>
</ul>
<h5 id="GRU"><a href="#GRU" class="headerlink" title="GRU"></a>GRU</h5><h2 id="Auto-Encoder"><a href="#Auto-Encoder" class="headerlink" title="Auto-Encoder"></a>Auto-Encoder</h2><p>Why we need:</p>
<ul>
<li>Dimension reduction</li>
<li>Visualization</li>
<li>Take advantages of <em>unsupervised</em> date<ul>
<li>Unsupervise</li>
<li><em>Reconstruct</em> itself</li>
</ul>
</li>
</ul>
<h3 id="Denoising-AutoEncoder"><a href="#Denoising-AutoEncoder" class="headerlink" title="Denoising AutoEncoder"></a>Denoising AutoEncoder</h3><p>Add some noise and can still reconstruct well. Means model can dig out information from a mass data.</p>
<h3 id="Dropout-AutoEncoder"><a href="#Dropout-AutoEncoder" class="headerlink" title="Dropout AutoEncoder"></a>Dropout AutoEncoder</h3><p>Use dropout to autoencoder. It the hard dropouted network can than the disdropout network do better.</p>
<h3 id="Adversarial-AutoEncoder"><a href="#Adversarial-AutoEncoder" class="headerlink" title="Adversarial AutoEncoder"></a>Adversarial AutoEncoder</h3><h3 id="Variational-AutoEncoder"><a href="#Variational-AutoEncoder" class="headerlink" title="Variational AutoEncoder"></a>Variational AutoEncoder</h3><h1 id="Gen"><a href="#Gen" class="headerlink" title="Gen"></a>Gen</h1><ul>
<li>Painter or Generator</li>
<li>Critic or Discriminator</li>
</ul>
<p>$$<br>\begin{aligned}<br>min_G\ max_D\ L(D,G) &amp;= E_{x<del>p_r(x)}[\log{D(x)}] + E_{z</del>p_r(z)}[\log{1-D(G(z))}] \<br>&amp;= E_{x<del>p_r(x)}[\log{D(x)}] + E_{x</del>p_r(x)}[\log{1-D(x)}] \<br>\end{aligned}<br>$$</p>
<p>Both of they want to maximum and than get a nash equilibrium</p>
<h3 id="Nash-Equilibrium"><a href="#Nash-Equilibrium" class="headerlink" title="Nash Equilibrium"></a>Nash Equilibrium</h3><ul>
<li>Q1.Where will D converge, given fixed G</li>
<li>Q2.Where will G converge, after optimal D</li>
</ul>
<h3 id="tensorflowè¿è¡Œæœºåˆ¶"><a href="#tensorflowè¿è¡Œæœºåˆ¶" class="headerlink" title="tensorflowè¿è¡Œæœºåˆ¶"></a>tensorflowè¿è¡Œæœºåˆ¶</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æœ¬è´¨ tf = tensor + è®¡ç®—å›¾</span></span><br><span class="line"><span class="comment"># tensor æ•°æ®</span></span><br><span class="line"><span class="comment"># op æ“ä½œ</span></span><br><span class="line"><span class="comment"># graphs æ•°æ®æ“ä½œ</span></span><br><span class="line"><span class="comment"># session ä¼šè¯æ ¸å¿ƒ</span></span><br></pre></td></tr></table></figure>

<h3 id="å››åˆ™è¿ç®—"><a href="#å››åˆ™è¿ç®—" class="headerlink" title="å››åˆ™è¿ç®—"></a>å››åˆ™è¿ç®—</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¦‚æœæ˜¯å˜é‡çš„è¯è¦å…ˆinit</span></span><br><span class="line">tf.add(data1+data2)</span><br><span class="line">tf.multiply(data1,data2)</span><br><span class="line">tf.subtract(data1,data2)</span><br><span class="line">tf.divide(data1,data2)</span><br><span class="line"></span><br><span class="line">dataCopy = tf.assign(x1,x2)  <span class="comment"># æŠŠx2çš„å€¼èµ‹ç»™x1</span></span><br><span class="line">dataCopy.eval()  <span class="comment"># ç›¸å½“äºsess.run(dataCopy)</span></span><br><span class="line"><span class="comment"># ç­‰ä»·äº</span></span><br><span class="line">tf.get_default_session().run(dataCopy)</span><br></pre></td></tr></table></figure>

<h3 id="çŸ©é˜µè¿ç®—"><a href="#çŸ©é˜µè¿ç®—" class="headerlink" title="çŸ©é˜µè¿ç®—"></a>çŸ©é˜µè¿ç®—</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"># æ•°æ®è£…è½½</span><br><span class="line">x1 &#x3D; tf.placeholder(tf.float32)</span><br><span class="line">x2 &#x3D; tf.placeholder(tf.float32)</span><br><span class="line">dataAdd &#x3D; tf.add(x1,x2)</span><br><span class="line">sess.run(dataAdd,feed_dict&#x3D;&#123;x1:2,x2:4&#125;)</span><br><span class="line"># 1.tensorå¼ é‡dataAdd  2.è¿½åŠ çš„æ•°æ® è¯­æ³•åŒä¸Š</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## çŸ©é˜µ~&#x3D;æ•°ç»„ çŸ©é˜µæ•´ä½“[] æ¯åˆ—éƒ½è¦[]åŒ…èµ·æ¥ æ¯[]å°±æ˜¯ä¸€è¡Œ</span><br><span class="line">x1 &#x3D; tf.constant([2,2])</span><br><span class="line">x2 &#x3D; tf.constant([[2],</span><br><span class="line">				  [2]])</span><br><span class="line">x1.shape  #ç»´åº¦</span><br><span class="line">sess.run(x1)   # æ‰“å°æ•´ä½“</span><br><span class="line">sess.run(x1.[0])   # æ‰“å°ç¬¬0è¡Œ</span><br><span class="line">sess.run(x1.[:,0])   # æ‰“å°ç¬¬0åˆ—</span><br><span class="line"></span><br><span class="line"># è¿ç®—</span><br><span class="line">tf.matmul(x1,x2)  # çŸ©é˜µä¹˜æ³•</span><br><span class="line">tf.multiply()  # æ™®é€šä¹˜æ³• å¯¹åº”å…ƒç´ ç›¸ä¹˜</span><br><span class="line">tf.add()   # ..</span><br><span class="line"></span><br><span class="line"># ç‰¹æ®ŠçŸ©é˜µçš„åˆå§‹åŒ–</span><br><span class="line">tf.zeros([2,3])  # ä¸¤è¡Œä¸‰åˆ—ç©ºé—´çŸ©é˜µ</span><br><span class="line">tf.onex([2,3])   # å…¨ä¸€çŸ©é˜µ</span><br><span class="line">tf.fill([2,3],15)  # å¡«å……çŸ©é˜µ,å…¨ä¸º15çš„2*3çŸ©é˜µ</span><br><span class="line"></span><br><span class="line">tf.zeros_like(x1)  # çŸ©é˜µç»´åº¦åŒx1çš„å…¨é›¶çŸ©é˜µ</span><br><span class="line">x3 &#x3D; tf.linspace(0.0,2.0,11)  # ç”Ÿæˆä¸€ä¸ªçŸ©é˜µï¼Œå…ƒç´ ä»0åˆ°2å‡åŒ€åˆ†æˆ11åˆ†</span><br><span class="line">x4 &#x3D; tf.random_uniform([2,3],-1,2)  # ç”Ÿæˆ2*3çš„ä¸€ä¸ªçŸ©é˜µï¼Œå…ƒç´ æ˜¯-1åˆ°2çš„éšæœºæ•°</span><br></pre></td></tr></table></figure>

<h3 id="Loss-Function"><a href="#Loss-Function" class="headerlink" title="Loss Function"></a>Loss Function</h3><p>loss function:<br>$$loss = \sum_i(w\times x_i+b-y_i)^2 \tag{1}$$<br>loss ç´¯åŠ ä¼šå¾ˆå¤§ï¼Œæ‰€ä»¥ä¸€èˆ¬ä¼šé™¤ä»¥å…ƒç´ ä¸ªæ•°n,ç»“æœè¿˜æ˜¯ä¸€æ ·çš„</p>
<p>$$w^<code>= w - lr \times \frac{\partial{loss}}{\partial{w}} \tag{2}$$
$$b^</code> = b - lr \times \frac{\partial{loss}}{\partial{b}}$$<br>è¿™æ ·å°±ä¼šå¾—åˆ°æ–°çš„w b,å†è¿”å›ç¬¬(1)æ­¥ï¼Œå¦‚æ­¤å¾ªç¯å°±èƒ½å¾—åˆ°æœ€å›äº‹çš„w b</p>
<p>å¯¹lossçš„æ±‚å¯¼å…¶å®æœ‰è§„å¾‹å¯å¾ª:<br>$$\frac{\partial{loss}}{\partial{w}} = \frac{2}{n}\sum(wx + b - y)x$$<br>$$\frac{\partial{loss}}{\partial{b}} = \frac{2}{n}\sum(wx + b - y)$$</p>
<h3 id="Discrete-Prediction"><a href="#Discrete-Prediction" class="headerlink" title="Discrete Prediction"></a>Discrete Prediction</h3><p>ç¦»æ•£å€¼é¢„æµ‹  </p>
<p>Classification (åˆ†ç±»)ä¸ºä¾‹<br>æ˜¾ç„¶çš„ç¦»æ•£çš„é—®é¢˜ï¼Œé‚£æˆ‘ä»¬è¦æ€ä¹ˆè§£å†³ç¦»æ•£çš„é—®é¢˜å‘¢ï¼Ÿ<br>æ¿€æ´»å‡½æ•° activation<br>å¸¸è§çš„æœ‰ReLUå’Œsigmoid<br>ç›®çš„æ˜¯ä¸ºäº†æŠŠçº¿æ€§çš„å€¼ç¦»æ•£åŒ–ï¼Œç„¶åæ‰èƒ½å¥—ç”¨ä¸Šé¢çš„å…¬å¼  </p>
<p>ä½†æ˜¯å°±ç®—ç”¨ä¸€ä¸ªå‡½æ•°æŠŠçº¿æ€§æ¨¡å‹ç¦»æ•£åŒ–äº†ï¼Œä½†è¿˜æ˜¯å¤ªç®€å•<br>æ‰€ä»¥å¼•å…¥éšè—å±‚æ¦‚å¿µ<br>input -&gt; h1 -&gt; h2 -&gt; out<br>ç»è¿‡å¤šå±‚éšè—å±‚é—®é¢˜å°±æ›´åŠ ç¦»æ•£äº†<br>$$h1 = relu(x@w_1 + b_1)$$<br>$$h2 = relu(h1@w_2 + b_2)$$<br>$$out = relu(h2@w_3 + b_3)$$<br>@è¡¨ç¤ºçŸ©é˜µä¹˜æ³•, æ¯é“å·¥åºéƒ½æœ‰è‡ªå·±çš„å‚æ•°   </p>
<p>é‚£å‚æ•°wå’Œbæ€ä¹ˆç¡®å®šå‘¢ï¼Ÿ<br>è‹¥æˆ‘ä»¬æƒ³è¦è¯†åˆ«0~9,é‚£æˆ‘ä»¬æ˜¯ä¸æ˜¯åº”è¯¥å¸Œæœ›æœ€åè¾“å‡ºæ˜¯æœ‰10ç±»(ä¸€ä¸ª[1,10]çš„çŸ©é˜µ,æ¯ä¸ªå…ƒç´ å¯ä»¥ä»£è¡¨ä¸€ä¸ªæ•°å­—)<br>é‚£ä¹ˆæ ¹æ®çŸ©é˜µè¿ç®—çš„è§„åˆ™(nm*mt = nt),æ‰€ä»¥æˆ‘ä»¬åªè¦æ§åˆ¶æ¯å±‚è¿ç®—ç¬¦åˆçŸ©é˜µä¹˜æ³•è§„åˆ™ä¸”æœ€åè¾“å‡ºæ˜¯æˆ‘ä»¬æƒ³è¦çš„è§„æ¨¡å°±å¥½<br>æœ€åå†ç”¨outæ¥è®¡ç®—loss(è¿™é‡Œæ˜¯æ¬§æ°è·ç¦»(nç»´ç©ºé—´ä¸¤ç‚¹çš„è·ç¦»)çš„loss)<br>ç„¶åå°±å¯ä»¥åå¤æ›´æ–°w` b`äº†</p>
<hr>
<h1 id="Numpy"><a href="#Numpy" class="headerlink" title="Numpy"></a>Numpy</h1><p>tensorflowçš„å¼Ÿå¼Ÿç‰ˆ,å› ä¸ºä»–ä¸èƒ½GPUè®¡ç®—</p>
<h3 id="åŸºæœ¬æ“ä½œ-2"><a href="#åŸºæœ¬æ“ä½œ-2" class="headerlink" title="åŸºæœ¬æ“ä½œ"></a>åŸºæœ¬æ“ä½œ</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">x1 = np.array([ç¬¬ä¸€è¡Œ],[ç¬¬äºŒè¡Œ]...)</span><br><span class="line">x1.shape   <span class="comment"># æ‰“å°è§„æ¨¡</span></span><br><span class="line">np.zeros([<span class="number">2</span>,<span class="number">3</span>])</span><br><span class="line">np.ones([<span class="number">2</span>,<span class="number">3</span>])   <span class="comment"># é›¶çŸ©é˜µå’Œå•ä½çŸ©é˜µçš„åˆå§‹åŒ–ï¼ˆ2è¡Œ3åˆ—ï¼‰</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ”¹æŸ¥</span></span><br><span class="line">x1[<span class="number">1</span>,<span class="number">2</span>]=<span class="number">5</span>  <span class="comment"># ç¬¬äºŒè¡Œç¬¬ä¸€åˆ—æ”¹æˆ5</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># åŸºæœ¬è¿ç®—</span></span><br><span class="line">x1*x2   <span class="comment"># åŠ å‡ä¹˜é™¤éƒ½æ˜¯å¯¹åº”å…ƒç´ åŠ å‡ä¹˜é™¤</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># çŸ©é˜µè¿ç®—</span></span><br></pre></td></tr></table></figure>

<hr>
<h1 id="Matplotlib"><a href="#Matplotlib" class="headerlink" title="Matplotlib"></a>Matplotlib</h1><p><code>import matplotlib as plt</code></p>
<h3 id="åŸºæœ¬æ“ä½œ-3"><a href="#åŸºæœ¬æ“ä½œ-3" class="headerlink" title="åŸºæœ¬æ“ä½œ"></a>åŸºæœ¬æ“ä½œ</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">x = np.array([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>])</span><br><span class="line">y = np.array([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŠ˜çº¿å›¾</span></span><br><span class="line">plt.plot(x,y,<span class="string">"r"</span>)  <span class="comment"># 1.xè½´ 2.yè½´ 3.é¢œè‰²</span></span><br><span class="line">plt.plot(x,y,<span class="string">"g"</span>,lw=<span class="number">10</span>)  <span class="comment"># 1.xè½´ 2.yè½´ 3.é¢œè‰² 4.æŠ˜çº¿çš„å®½åº¦</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ±çŠ¶å›¾</span></span><br><span class="line">plt.bar(x,y,<span class="number">0.9</span>,alpha=<span class="number">1</span>,color=<span class="string">'b'</span>)  <span class="comment"># 3.æŸ±çŠ¶å›¾çš„å®½ 4.alphaé€šé“,å³é€æ˜åº¦</span></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>













<hr>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/4/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/6/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Travis TuRing</p>
  <div class="site-description" itemprop="description">Mens et Manus</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">64</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">58</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Travis TuRing</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  

</body>
</html>
